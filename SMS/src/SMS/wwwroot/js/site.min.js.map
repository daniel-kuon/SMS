{"version":3,"sources":["wwwroot/js/site.js","/source/wwwroot/js/ViewModels/Home/Map.ts"],"names":["getMiddle","pol","start","getLatLngs","end","L","LatLng","lat","lng","splitPolyline","polyline","Waypoints","length","DummyHandle","Waypoint","w2","w3","RemoveFromPolyline","undefined","AddToPolyline","addDummyHandle","model","AddPolyline","Error","removePolyline","_i","_a","waypoint","RemoveFromMap","Map","removeLayer","CreateWaypoint","MarkerType","Dummy","redrawPolyline","middleLatLng","Longitude","Latitude","SetLatLng","redraw","removeFromPolyline","latLng","removeFromArray","arr","obj","tmpArr","Array","arr_1","item","push","pop","shift","LoadWaypointConnections","waypointsInitialized","waypointConnectionsInitialized","WaypointConnections","connection","GetWayPointById","Waypoint1Id","Waypoint2Id","__extends","this","d","b","__","constructor","p","hasOwnProperty","prototype","Object","create","SEntity","ServerModel","Entity","SPerson","Person","SJob","Job","ClientModel","Id","ko","observable","DeleteOnServer","ServerApi","Delete","SaveToServer","_this","Create","ConvertToServerEntity","done","data","Update","LoadFromServerEntity","serverEntity","idOnly","entity","CreateServerEntity","CopyTo","SaveState","savedState","prop","isWriteableObservable","val","unwrap","slice","val_1","elem","RevertState","ignoreError","val_2","_super","apply","arguments","PersonApi","GetDefault","LastName","FirstName","FullName","computed","call","person","DueTo","AssignedTo","AssignedToId","Title","Content","Done","SuperJob","SuperJobId","Trip","TripId","SubJobs","observableArray","IsList","JobApi","job","markerType","WaypointNumber","polylines","Distance","Name","Description","WaypointApi","subscribe","value","options","draggable","opacity","icon","Icon","iconUrl","iconSize","Point","className","marker","Marker","addTo","addEventListener","e","getLatLng","Polylines","Redraw","Popup","content","popup","bindPopup","Show","highlight","setOpacity","IsDummy","$","_icon","addClass","Hide","removeClass","setLatLng","i","GetConnectedWaypoints","ret","line","_b","_c","sort","w1","distanceTo","convertFromDummyHandle","w","wCA","WaypointConnectionApi","Disconnect","Connect","IsInPolyline","currentPolyline","addLatLng","console","log","RemoveIfHasZeroOrOnePolylines","CenterOnMap","setView","Harbour","name","map","HarbourApi","Locations","Album","AlbumId","Rating","Start","End","Tacks","TripApi","Address","Street","Zip","Town","Comment","AddressApi","Image","Path","ImageApi","StandAlone","Images","AlbumApi","image","Tack","Crew","TackApi","Location","HarbourId","Website","AddressId","LocationApi","Restaurant","RestaurantApi","Supermarket","SupermarketApi","WaypointDistance","Precessor","calculaterdWaypoints","ConnectedWayPoints","ConnectedDistances","wp","indexOf","HttpMethod","Api","baseUrl","BuildRequestBody","url","method","contentType","dataType","JSON","stringify","Get","id","CreateRequest","GET","toString","DELETE","POST","PUT","body","ajax","fail","alert","ConnectionApi","id1","id2","GetType","WaypointConnection","WaypointTack","MapMode","SailingMapViewModel","Harbours","SelectedHarbour","SelectedWaypoint","EditingHarbour","EditingWaypoint","WaypointMarkers","RemoveHarbour","remove","RemoveWaypoint","CenterWaypoint","harbour","SelectWaypoint","SelectHarbour","SaveHarbour","CopyHarbour","SaveWaypoint","CopyWaypoint","RemovePolyline","DrawingPolyline","mapbox","accessToken","GetMapMode","RouteDrawing","DrawingLatLng","latlng","containerPoint","startId_1","originalEvent","cancelBubble","preventDefault","stopPropagation","document","keyup","keyCode","latLngToContainerPoint","AddHarbour","CreateHarbour","getCenter","h1","h2","arg","Polyline","AdminView","CalculateDistances","waypoints","calculating","calculated","minimalDist","Number","POSITIVE_INFINITY","minimalWP","calculating_1","dist","calculated_1","h","Math","round","InitializeWaypoint","addOneTimeEventListener","harboursLoaded","waypointsLoaded","personsLoaded","harbourApi","waypointApi","personApi","waypointConnectionApi","applyBindings","on","contextFor","$data","data_1","Type","data_2","MapHelper","personDeails","deletePerson","adminPersonViewModel","AdminPersonViewModel","Model","People","CurrentPerson","NewPerson","SavePerson","modal","CancelEditPerson","DeletePerson","AddPerson","SelectPerson","m","HomeJobsViewModel","JobLists","Persons","d_1","sPerson","d_2","sJobList","Seed","l","Date","j","l2","ApplyChangeToViewModel","context","target","bodyElement","tinymce","init","selector","inline","toolbar","menubar","plugins","setup","editor","SHarbour","MapViewModel","WaypointsLoaded","WaypointConnectionsLoaded","PersonsLoaded","JobsLoaded","TripsLoaded","AddressesLoaded","ImagesLoaded","AlbumsLoaded","WaypointTacksLoaded","TacksLoaded","LocationsLoaded","Jobs","Trips","Addresses","Albums","Supermarkets","Restaurants","SelectedPerson","SelectedJob","SelectedTrip","SelectedAddress","SelectedImage","SelectedAlbum","SelectedTack","SelectedLocation","SelectedSupermarket","SelectedRestaurant","_loop_1","sEntity","harbour_1","InitializeModel","d_3","d_4","d_5","d_6","d_7","d_8","d_9","d_10","GetAlbumById","GetPersonById","GetTripById","GetJobById","_d","_e","GetAddressById","GetHarbourById","_f","_g","GetWaypointById","GetImageById","GetTackById","GetLocationById","mapViewModel","dropzoneModalOpenedByDrag","dropzoneModal","dropzone","Dropzone","acceptedFiles","dictInvalidFileType","dictDefaultMessage","ondragenter","is","dataTransfer","types","getQueuedFiles","getUploadingFiles","stopImmediatePropagation","removeAllFiles"],"mappings":"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","file":"wwwroot/js/site.min.js","sourcesContent":["var __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar SEntity = ServerModel.Entity;\nvar SPerson = ServerModel.Person;\nvar SJob = ServerModel.Job;\nvar ClientModel;\n(function (ClientModel) {\n    var Entity = (function () {\n        function Entity() {\n            this.Id = ko.observable();\n        }\n        Entity.prototype.DeleteOnServer = function () {\n            return this.ServerApi.Delete(this.Id());\n        };\n        ;\n        Entity.prototype.SaveToServer = function () {\n            var _this = this;\n            if (this.Id() === undefined)\n                return this.ServerApi.Create(this.ConvertToServerEntity()).done(function (data) { return _this.Id(data.Id); });\n            return this.ServerApi.Update(this.ConvertToServerEntity());\n        };\n        Entity.prototype.LoadFromServerEntity = function (serverEntity) {\n            this.Id(serverEntity.Id);\n            return this;\n        };\n        Entity.prototype.ConvertToServerEntity = function (idOnly) {\n            if (idOnly === void 0) { idOnly = false; }\n            var entity = this.CreateServerEntity();\n            entity.Id = this.Id();\n            return entity;\n        };\n        Entity.prototype.CopyTo = function (entity) {\n            entity.Id(this.Id());\n        };\n        Entity.prototype.SaveState = function () {\n            var entity = this;\n            entity.savedState = new Object();\n            for (var prop in entity) {\n                if (entity.hasOwnProperty(prop)) {\n                    if (ko.isWriteableObservable(entity[prop])) {\n                        var val = ko.unwrap(entity[prop]);\n                        if (val instanceof Array) {\n                            val = val.slice(0);\n                            for (var _i = 0, val_1 = val; _i < val_1.length; _i++) {\n                                var elem = val_1[_i];\n                                if (elem instanceof Entity)\n                                    elem.SaveState();\n                            }\n                        }\n                        else if (val instanceof Entity)\n                            val.SaveState();\n                        entity.savedState[prop] = val;\n                    }\n                }\n            }\n        };\n        Entity.prototype.RevertState = function (ignoreError) {\n            if (ignoreError === void 0) { ignoreError = false; }\n            if (this.savedState === undefined)\n                if (ignoreError)\n                    return;\n                else\n                    throw \"No saved state\";\n            var entity = this;\n            for (var prop in entity) {\n                if (entity.hasOwnProperty(prop)) {\n                    if (ko.isWriteableObservable(entity[prop])) {\n                        var val = entity.savedState[prop];\n                        //this.savedState[prop] = val;\n                        entity[prop](val);\n                        if (val instanceof Entity)\n                            val.RevertState();\n                        else if (val instanceof Array)\n                            for (var _i = 0, val_2 = val; _i < val_2.length; _i++) {\n                                var elem = val_2[_i];\n                                if (elem instanceof Entity)\n                                    elem.RevertState();\n                            }\n                    }\n                }\n            }\n        };\n        return Entity;\n    }());\n    ClientModel.Entity = Entity;\n    var Person = (function (_super) {\n        __extends(Person, _super);\n        function Person() {\n            var _this = this;\n            _super.apply(this, arguments);\n            this.ServerApi = ServerApi.PersonApi.GetDefault();\n            this.LastName = ko.observable();\n            this.FirstName = ko.observable();\n            this.FullName = ko.computed(function () { return _this.FirstName() + \" \" + _this.LastName(); });\n        }\n        Person.prototype.DeleteOnServer = function () {\n            return _super.prototype.DeleteOnServer.call(this);\n        };\n        Person.prototype.SaveToServer = function () {\n            return _super.prototype.SaveToServer.call(this);\n        };\n        Person.prototype.LoadFromServerEntity = function (serverEntity) {\n            _super.prototype.LoadFromServerEntity.call(this, serverEntity);\n            this.LastName(serverEntity.LastName);\n            this.FirstName(serverEntity.FirstName);\n            return this;\n        };\n        Person.prototype.ConvertToServerEntity = function (idOnly) {\n            if (idOnly === void 0) { idOnly = false; }\n            var entity = _super.prototype.ConvertToServerEntity.call(this, idOnly);\n            if (!idOnly) {\n                entity.FirstName = this.FirstName();\n                entity.LastName = this.LastName();\n            }\n            return entity;\n        };\n        Person.prototype.CreateServerEntity = function () {\n            return new SPerson();\n        };\n        Person.prototype.CopyTo = function (person) {\n            _super.prototype.CopyTo.call(this, person);\n            person.LastName(this.LastName());\n            person.FirstName(this.FirstName());\n        };\n        return Person;\n    }(Entity));\n    ClientModel.Person = Person;\n    var Job = (function (_super) {\n        __extends(Job, _super);\n        function Job() {\n            _super.apply(this, arguments);\n            this.DueTo = ko.observable();\n            this.AssignedTo = ko.observable();\n            this.AssignedToId = ko.observable();\n            this.Title = ko.observable();\n            this.Content = ko.observable();\n            this.Done = ko.observable();\n            this.SuperJob = ko.observable();\n            this.SuperJobId = ko.observable();\n            this.Trip = ko.observable();\n            this.TripId = ko.observable();\n            this.SubJobs = ko.observableArray();\n            this.IsList = false;\n            this.ServerApi = ServerApi.JobApi.GetDefault();\n        }\n        Job.prototype.DeleteOnServer = function () {\n            return _super.prototype.DeleteOnServer.call(this);\n        };\n        Job.prototype.SaveToServer = function () {\n            return _super.prototype.SaveToServer.call(this);\n        };\n        Job.prototype.LoadFromServerEntity = function (serverEntity) {\n            _super.prototype.LoadFromServerEntity.call(this, serverEntity);\n            this.DueTo(serverEntity.DueTo);\n            this.AssignedToId(serverEntity.AssignedToId);\n            this.Title(serverEntity.Title);\n            this.Content(serverEntity.Content);\n            this.Done(serverEntity.Done);\n            this.TripId(serverEntity.TripId);\n            this.SuperJobId(serverEntity.SuperJobId);\n            return this;\n        };\n        Job.prototype.ConvertToServerEntity = function (idOnly) {\n            if (idOnly === void 0) { idOnly = false; }\n            var entity = _super.prototype.ConvertToServerEntity.call(this, idOnly);\n            if (!idOnly) {\n                entity.DueTo = this.DueTo();\n                entity.Title = this.Title();\n                entity.Content = this.Content();\n                entity.Done = this.Done();\n                entity.AssignedToId = this.AssignedToId();\n                entity.TripId = this.TripId();\n                entity.SuperJobId = this.SuperJobId();\n            }\n            return entity;\n        };\n        Job.prototype.CreateServerEntity = function () {\n            return new ServerModel.Job();\n        };\n        Job.prototype.CopyTo = function (job) {\n            _super.prototype.CopyTo.call(this, job);\n            job.DueTo(this.DueTo());\n            job.AssignedTo(this.AssignedTo());\n            job.AssignedToId(this.AssignedToId());\n            job.Title(this.Title());\n            job.Content(this.Content());\n            job.Done(this.Done());\n            job.SubJobs(this.SubJobs());\n            job.Trip(this.Trip());\n            job.TripId(this.TripId());\n            job.SuperJob(this.SuperJob());\n            job.SuperJobId(this.SuperJobId());\n        };\n        return Job;\n    }(Entity));\n    ClientModel.Job = Job;\n    var Waypoint = (function (_super) {\n        __extends(Waypoint, _super);\n        function Waypoint(latLng, markerType, Map) {\n            var _this = this;\n            _super.call(this);\n            this.Map = Map;\n            this.WaypointNumber = ko.observable();\n            this.polylines = new Array();\n            this.Latitude = ko.observable();\n            this.Longitude = ko.observable();\n            this.Distance = ko.observable();\n            this.Name = ko.observable();\n            this.Description = ko.observable();\n            this.ServerApi = ServerApi.WaypointApi.GetDefault();\n            this.Latitude(latLng.lat);\n            this.Longitude(latLng.lng);\n            this.LatLng = new L.LatLng(latLng.lat, latLng.lng);\n            this.Latitude.subscribe(function (value) {\n                if (_this.LatLng.lat !== value) {\n                    _this.LatLng.lat = value;\n                }\n            });\n            this.Longitude.subscribe(function (value) {\n                if (_this.LatLng.lng !== value) {\n                    _this.LatLng.lng = value;\n                }\n            });\n            this.markerType = markerType;\n            var options = {\n                draggable: true\n            };\n            if (markerType === MarkerType.Dummy) {\n                options.opacity = 0.5;\n            }\n            if (markerType === MarkerType.Waypoint || markerType === MarkerType.Dummy) {\n                options.icon = new L.Icon({\n                    iconUrl: \"/images/waypointhandle.png\",\n                    iconSize: new L.Point(10, 10, true),\n                    className: \"waypoint\"\n                });\n            }\n            var marker = new L.Marker(this.LatLng, options);\n            marker.addTo(this.Map);\n            marker.Waypoint = this;\n            this.marker = marker;\n            marker.addEventListener(\"drag\", function (e) {\n                _this.SetLatLng(_this.marker.getLatLng());\n            });\n            this.LatLng.Polylines = new Array();\n            this.LatLng.Waypoint = this;\n            this.Latitude.subscribe(function (value) {\n                if (_this.LatLng.lat !== value) {\n                    _this.Redraw();\n                }\n            });\n            this.Longitude.subscribe(function (value) {\n                if (_this.LatLng.lng !== value) {\n                    _this.Redraw();\n                }\n            });\n        }\n        Waypoint.prototype.Popup = function (content) {\n            if (this.popup !== undefined) {\n                this.Map.removeLayer(this.popup);\n                this.popup = undefined;\n            }\n            if (content !== undefined) {\n                //this.popup = L.popup();\n                this.marker.bindPopup(content); //.openPopup();\n            }\n        };\n        Waypoint.prototype.Show = function (highlight) {\n            if (highlight === void 0) { highlight = false; }\n            this.marker.setOpacity(this.marker.Waypoint.IsDummy() ? 0.5 : 1);\n            if (highlight)\n                $(this.marker._icon).addClass(\"expose\");\n        };\n        Waypoint.prototype.Hide = function () {\n            this.marker.setOpacity(0.1);\n            $(this.marker._icon).removeClass(\"expose\");\n        };\n        Waypoint.prototype.Redraw = function () {\n            this.marker.setLatLng(this.LatLng);\n            for (var i = 0; i < this.polylines.length; i++)\n                redrawPolyline(this.polylines[i]);\n        };\n        Waypoint.prototype.GetConnectedWaypoints = function () {\n            var _this = this;\n            var ret = new Array();\n            for (var _i = 0, _a = this.polylines; _i < _a.length; _i++) {\n                var line = _a[_i];\n                for (var _b = 0, _c = line.Waypoints; _b < _c.length; _b++) {\n                    var waypoint = _c[_b];\n                    if (waypoint !== this)\n                        ret.push(waypoint);\n                }\n            }\n            return ret.sort(function (w1, w2) {\n                return w1.LatLng.distanceTo(_this.LatLng) - w2.LatLng.distanceTo(_this.LatLng);\n            });\n        };\n        Waypoint.prototype.convertFromDummyHandle = function () {\n            this.marker.setOpacity(1);\n            var w1 = this.polylines[0].Waypoints[0];\n            var w2 = this.polylines[0].Waypoints[1];\n            splitPolyline(this.polylines[0]);\n            this.markerType = MarkerType.Waypoint;\n            this.SaveToServer()\n                .done(function (w) {\n                var wCA = ServerApi.WaypointConnectionApi.GetDefault();\n                wCA.Disconnect(w1.Id(), w2.Id());\n                wCA.Connect(w1.Id(), w.Id);\n                wCA.Connect(w2.Id(), w.Id);\n            });\n        };\n        Waypoint.prototype.IsInPolyline = function (polyline) {\n            for (var _i = 0, _a = this.polylines; _i < _a.length; _i++) {\n                var currentPolyline = _a[_i];\n                if (polyline === currentPolyline)\n                    return true;\n            }\n            return false;\n        };\n        Waypoint.prototype.RemoveFromMap = function () {\n            if (this.markerType !== MarkerType.Dummy)\n                for (var _i = 0, _a = this.polylines; _i < _a.length; _i++) {\n                    var polyline = _a[_i];\n                    removePolyline(polyline);\n                }\n            this.Map.removeLayer(this.marker);\n        };\n        Waypoint.prototype.AddToPolyline = function (polyline) {\n            if (this.IsInPolyline(polyline))\n                return false;\n            if (polyline.DummyHandle !== this) {\n                polyline.Waypoints.push(this);\n                polyline.addLatLng(this.LatLng);\n                polyline.redraw();\n            }\n            this.LatLng.Polylines.push(polyline);\n            this.polylines.push(polyline);\n            console.log(polyline.Waypoints);\n            //ServerApi.WaypointConnectionApi.GetDefault().\n            return true;\n        };\n        Waypoint.prototype.RemoveFromPolyline = function (polyline) {\n            if (!this.IsInPolyline(polyline))\n                return false;\n            removeFromArray(polyline.Waypoints, this);\n            removeFromArray(this.polylines, polyline);\n            removeFromArray(this.LatLng.Polylines, polyline);\n            removeFromArray(polyline.getLatLngs(), this.LatLng);\n            polyline.redraw();\n            return true;\n        };\n        Waypoint.prototype.RemoveIfHasZeroOrOnePolylines = function () {\n            return true;\n        };\n        Waypoint.prototype.SetLatLng = function (latLng) {\n            this.LatLng.lat = latLng.lat;\n            this.LatLng.lng = latLng.lng;\n            this.Latitude(latLng.lat);\n            this.Longitude(latLng.lng);\n            this.Redraw();\n        };\n        Waypoint.prototype.CenterOnMap = function () {\n            this.Map.setView(this.LatLng);\n        };\n        Waypoint.prototype.IsDummy = function () {\n            return this.markerType === MarkerType.Dummy;\n        };\n        Waypoint.prototype.DeleteOnServer = function () {\n            return _super.prototype.DeleteOnServer.call(this);\n        };\n        Waypoint.prototype.SaveToServer = function () {\n            return _super.prototype.SaveToServer.call(this);\n        };\n        Waypoint.prototype.LoadFromServerEntity = function (serverEntity) {\n            _super.prototype.LoadFromServerEntity.call(this, serverEntity);\n            this.Description(serverEntity.Description);\n            this.Latitude(serverEntity.Latitude);\n            this.Longitude(serverEntity.Longitude);\n            this.Name(serverEntity.Name);\n            this.WaypointNumber(serverEntity.WaypointNumber);\n            return this;\n        };\n        Waypoint.prototype.ConvertToServerEntity = function (idOnly) {\n            if (idOnly === void 0) { idOnly = false; }\n            var entity = _super.prototype.ConvertToServerEntity.call(this, idOnly);\n            entity.Description = this.Description();\n            entity.Latitude = this.Latitude();\n            entity.Longitude = this.Longitude();\n            entity.Name = this.Name();\n            entity.WaypointNumber = this.WaypointNumber();\n            return entity;\n        };\n        Waypoint.prototype.CopyTo = function (entity) {\n            _super.prototype.CopyTo.call(this, entity);\n            entity.Description(this.Description());\n            entity.LatLng = this.LatLng;\n            entity.Latitude(this.Latitude());\n            entity.Longitude(this.Longitude());\n            entity.Name(this.Name());\n            entity.WaypointNumber(this.WaypointNumber());\n        };\n        Waypoint.prototype.CreateServerEntity = function () {\n            return new ServerModel.Waypoint();\n        };\n        return Waypoint;\n    }(Entity));\n    ClientModel.Waypoint = Waypoint;\n    var Harbour = (function (_super) {\n        __extends(Harbour, _super);\n        function Harbour(name, latLng, map) {\n            _super.call(this, latLng, MarkerType.Harbour, map);\n            this.ServerApi = ServerApi.HarbourApi.GetDefault();\n            this.Locations = ko.observableArray();\n            this.Album = ko.observable();\n            this.AlbumId = ko.observable();\n            this.Rating = ko.observable();\n            this.Content = ko.observable();\n            this.Name(name);\n        }\n        Harbour.prototype.RemoveIfHasZeroOrOnePolylines = function () {\n            return false;\n        };\n        Harbour.prototype.DeleteOnServer = function () {\n            return _super.prototype.DeleteOnServer.call(this);\n        };\n        Harbour.prototype.SaveToServer = function () {\n            return _super.prototype.SaveToServer.call(this);\n        };\n        Harbour.prototype.LoadFromServerEntity = function (serverEntity) {\n            _super.prototype.LoadFromServerEntity.call(this, serverEntity);\n            this.AlbumId(serverEntity.AlbumId);\n            this.Rating(serverEntity.Rating);\n            this.Content(serverEntity.Content);\n            console.log(serverEntity);\n            return this;\n        };\n        Harbour.prototype.ConvertToServerEntity = function (idOnly) {\n            if (idOnly === void 0) { idOnly = false; }\n            var serverEntity = _super.prototype.ConvertToServerEntity.call(this, idOnly);\n            serverEntity.AlbumId = this.AlbumId();\n            serverEntity.Rating = this.Rating();\n            return serverEntity;\n        };\n        Harbour.prototype.CopyTo = function (entity) {\n            _super.prototype.CopyTo.call(this, entity);\n            entity.Locations(this.Locations());\n            entity.Album(this.Album());\n            entity.AlbumId(this.AlbumId());\n            entity.Rating(this.Rating());\n        };\n        Harbour.prototype.CreateServerEntity = function () {\n            return new ServerModel.Harbour();\n        };\n        return Harbour;\n    }(Waypoint));\n    ClientModel.Harbour = Harbour;\n    var Trip = (function (_super) {\n        __extends(Trip, _super);\n        function Trip() {\n            _super.apply(this, arguments);\n            this.Name = ko.observable();\n            this.Start = ko.observable();\n            this.End = ko.observable();\n            this.Content = ko.observable();\n            this.Tacks = ko.observableArray();\n            this.ServerApi = ServerApi.TripApi.GetDefault();\n        }\n        Trip.prototype.LoadFromServerEntity = function (serverEntity) {\n            var entity = _super.prototype.LoadFromServerEntity.call(this, serverEntity);\n            entity.Name(serverEntity.Name);\n            entity.Start(serverEntity.Start);\n            entity.End(serverEntity.End);\n            entity.Content(serverEntity.Content);\n            return entity;\n        };\n        Trip.prototype.ConvertToServerEntity = function (idOnly) {\n            if (idOnly === void 0) { idOnly = false; }\n            var entity = _super.prototype.ConvertToServerEntity.call(this, idOnly);\n            if (!idOnly) {\n                entity.Name = this.Name();\n                entity.Start = this.Start();\n                entity.End = this.End();\n                entity.Content = this.Content();\n            }\n            return entity;\n        };\n        Trip.prototype.CopyTo = function (entity) {\n            _super.prototype.CopyTo.call(this, entity);\n            entity.Name(this.Name());\n            entity.Start(this.Start());\n            entity.End(this.End());\n            entity.Content(this.Content());\n            entity.Tacks(this.Tacks());\n        };\n        Trip.prototype.CreateServerEntity = function () {\n            return new ServerModel.Trip();\n        };\n        return Trip;\n    }(Entity));\n    ClientModel.Trip = Trip;\n    var Address = (function (_super) {\n        __extends(Address, _super);\n        function Address() {\n            _super.apply(this, arguments);\n            this.Street = ko.observable();\n            this.Zip = ko.observable();\n            this.Town = ko.observable();\n            this.Comment = ko.observable();\n            this.ServerApi = ServerApi.AddressApi.GetDefault();\n        }\n        Address.prototype.DeleteOnServer = function () {\n            return _super.prototype.DeleteOnServer.call(this);\n        };\n        Address.prototype.SaveToServer = function () {\n            return _super.prototype.SaveToServer.call(this);\n        };\n        Address.prototype.LoadFromServerEntity = function (serverEntity) {\n            var entity = _super.prototype.LoadFromServerEntity.call(this, serverEntity);\n            entity.Street(serverEntity.Street);\n            entity.Zip(serverEntity.Zip);\n            entity.Town(serverEntity.Town);\n            entity.Comment(serverEntity.Comment);\n            return entity;\n        };\n        Address.prototype.ConvertToServerEntity = function (idOnly) {\n            if (idOnly === void 0) { idOnly = false; }\n            var entity = _super.prototype.ConvertToServerEntity.call(this, idOnly);\n            if (!idOnly) {\n                entity.Street = this.Street();\n                entity.Zip = this.Zip();\n                entity.Town = this.Town();\n                entity.Comment = this.Comment();\n            }\n            return entity;\n        };\n        Address.prototype.CopyTo = function (entity) {\n            _super.prototype.CopyTo.call(this, entity);\n            entity.Street(this.Street());\n            entity.Zip(this.Zip());\n            entity.Town(this.Town());\n            entity.Comment(this.Comment());\n        };\n        Address.prototype.CreateServerEntity = function () {\n            return new ServerModel.Address();\n        };\n        return Address;\n    }(Entity));\n    ClientModel.Address = Address;\n    var Image = (function (_super) {\n        __extends(Image, _super);\n        function Image() {\n            _super.apply(this, arguments);\n            this.AlbumId = ko.observable();\n            this.Path = ko.observable();\n            this.Comment = ko.observable();\n            this.ServerApi = ServerApi.ImageApi.GetDefault();\n        }\n        Image.prototype.DeleteOnServer = function () {\n            return _super.prototype.DeleteOnServer.call(this);\n        };\n        Image.prototype.SaveToServer = function () {\n            return _super.prototype.SaveToServer.call(this);\n        };\n        Image.prototype.LoadFromServerEntity = function (serverEntity) {\n            var entity = _super.prototype.LoadFromServerEntity.call(this, serverEntity);\n            entity.AlbumId(serverEntity.AlbumId);\n            entity.Path(serverEntity.Path);\n            entity.Comment(serverEntity.Comment);\n            return entity;\n        };\n        Image.prototype.ConvertToServerEntity = function (idOnly) {\n            if (idOnly === void 0) { idOnly = false; }\n            var entity = _super.prototype.ConvertToServerEntity.call(this, idOnly);\n            if (!idOnly) {\n                entity.AlbumId = this.AlbumId();\n                entity.Path = this.Path();\n                entity.Comment = this.Comment();\n            }\n            return entity;\n        };\n        Image.prototype.CopyTo = function (entity) {\n            _super.prototype.CopyTo.call(this, entity);\n            entity.AlbumId(this.AlbumId());\n            entity.Path(this.Path());\n            entity.Comment(this.Comment());\n        };\n        Image.prototype.CreateServerEntity = function () {\n            return new ServerModel.Image();\n        };\n        return Image;\n    }(Entity));\n    ClientModel.Image = Image;\n    var Album = (function (_super) {\n        __extends(Album, _super);\n        function Album() {\n            _super.apply(this, arguments);\n            this.StandAlone = ko.observable();\n            this.Comment = ko.observable();\n            this.Images = ko.observableArray();\n            this.ServerApi = ServerApi.AlbumApi.GetDefault();\n        }\n        Album.prototype.DeleteOnServer = function () {\n            return _super.prototype.DeleteOnServer.call(this);\n        };\n        Album.prototype.SaveToServer = function () {\n            return _super.prototype.SaveToServer.call(this);\n        };\n        Album.prototype.LoadFromServerEntity = function (serverEntity) {\n            var entity = _super.prototype.LoadFromServerEntity.call(this, serverEntity);\n            entity.StandAlone(serverEntity.StandAlone);\n            entity.Comment(serverEntity.Comment);\n            return entity;\n        };\n        Album.prototype.ConvertToServerEntity = function (idOnly) {\n            if (idOnly === void 0) { idOnly = false; }\n            var entity = _super.prototype.ConvertToServerEntity.call(this, idOnly);\n            if (!idOnly) {\n                entity.StandAlone = this.StandAlone();\n                entity.Comment = this.Comment();\n                entity.Images = new Array();\n                for (var _i = 0, _a = this.Images(); _i < _a.length; _i++) {\n                    var image = _a[_i];\n                    entity.Images.push(image.ConvertToServerEntity());\n                }\n            }\n            return entity;\n        };\n        Album.prototype.CopyTo = function (entity) {\n            _super.prototype.CopyTo.call(this, entity);\n            entity.StandAlone(this.StandAlone());\n            entity.Comment(this.Comment());\n            entity.Images(this.Images());\n        };\n        Album.prototype.CreateServerEntity = function () {\n            return new ServerModel.Album();\n        };\n        return Album;\n    }(Entity));\n    ClientModel.Album = Album;\n    var Tack = (function (_super) {\n        __extends(Tack, _super);\n        function Tack() {\n            _super.apply(this, arguments);\n            this.Start = ko.observable();\n            this.End = ko.observable();\n            this.Waypoints = ko.observableArray();\n            this.Crew = ko.observableArray();\n            this.ServerApi = ServerApi.TackApi.GetDefault();\n        }\n        Tack.prototype.DeleteOnServer = function () {\n            return _super.prototype.DeleteOnServer.call(this);\n        };\n        Tack.prototype.SaveToServer = function () {\n            return _super.prototype.SaveToServer.call(this);\n        };\n        Tack.prototype.LoadFromServerEntity = function (serverEntity) {\n            var entity = _super.prototype.LoadFromServerEntity.call(this, serverEntity);\n            entity.Start(serverEntity.Start);\n            entity.End(serverEntity.End);\n            return entity;\n        };\n        Tack.prototype.ConvertToServerEntity = function (idOnly) {\n            if (idOnly === void 0) { idOnly = false; }\n            var entity = _super.prototype.ConvertToServerEntity.call(this, idOnly);\n            if (!idOnly) {\n                entity.Start = this.Start();\n                entity.End = this.End();\n            }\n            return entity;\n        };\n        Tack.prototype.CopyTo = function (entity) {\n            _super.prototype.CopyTo.call(this, entity);\n            entity.Start(this.Start());\n            entity.End(this.End());\n            entity.Waypoints(this.Waypoints());\n            entity.Crew(this.Crew());\n        };\n        Tack.prototype.CreateServerEntity = function () {\n            return new ServerModel.Tack();\n        };\n        return Tack;\n    }(Entity));\n    ClientModel.Tack = Tack;\n    var Location = (function (_super) {\n        __extends(Location, _super);\n        function Location() {\n            _super.apply(this, arguments);\n            this.HarbourId = ko.observable();\n            this.Website = ko.observable();\n            this.Name = ko.observable();\n            this.Rating = ko.observable();\n            this.Address = ko.observable();\n            this.AddressId = ko.observable();\n            this.ServerApi = ServerApi.LocationApi.GetDefault();\n        }\n        Location.prototype.DeleteOnServer = function () {\n            return _super.prototype.DeleteOnServer.call(this);\n        };\n        Location.prototype.SaveToServer = function () {\n            return _super.prototype.SaveToServer.call(this);\n        };\n        Location.prototype.LoadFromServerEntity = function (serverEntity) {\n            var entity = _super.prototype.LoadFromServerEntity.call(this, serverEntity);\n            entity.HarbourId(serverEntity.HarbourId);\n            entity.Website(serverEntity.Website);\n            entity.Name(serverEntity.Name);\n            entity.Rating(serverEntity.Rating);\n            return entity;\n        };\n        Location.prototype.ConvertToServerEntity = function (idOnly) {\n            if (idOnly === void 0) { idOnly = false; }\n            var entity = _super.prototype.ConvertToServerEntity.call(this, idOnly);\n            if (!idOnly) {\n                entity.HarbourId = this.HarbourId();\n                entity.Website = this.Website();\n                entity.Name = this.Name();\n                entity.Rating = this.Rating();\n            }\n            return entity;\n        };\n        Location.prototype.CopyTo = function (entity) {\n            _super.prototype.CopyTo.call(this, entity);\n            entity.HarbourId(this.HarbourId());\n            entity.Website(this.Website());\n            entity.Name(this.Name());\n            entity.Rating(this.Rating());\n        };\n        Location.prototype.CreateServerEntity = function () {\n            return new ServerModel.Location();\n        };\n        return Location;\n    }(Entity));\n    ClientModel.Location = Location;\n    var Restaurant = (function (_super) {\n        __extends(Restaurant, _super);\n        function Restaurant() {\n            _super.apply(this, arguments);\n            this.ServerApi = ServerApi.RestaurantApi.GetDefault();\n        }\n        Restaurant.prototype.DeleteOnServer = function () {\n            return _super.prototype.DeleteOnServer.call(this);\n        };\n        Restaurant.prototype.SaveToServer = function () {\n            return _super.prototype.SaveToServer.call(this);\n        };\n        Restaurant.prototype.LoadFromServerEntity = function (serverEntity) {\n            var entity = _super.prototype.LoadFromServerEntity.call(this, serverEntity);\n            return entity;\n        };\n        Restaurant.prototype.ConvertToServerEntity = function (idOnly) {\n            if (idOnly === void 0) { idOnly = false; }\n            var entity = _super.prototype.ConvertToServerEntity.call(this, idOnly);\n            if (!idOnly) {\n            }\n            return entity;\n        };\n        Restaurant.prototype.CopyTo = function (entity) {\n            _super.prototype.CopyTo.call(this, entity);\n        };\n        Restaurant.prototype.CreateServerEntity = function () {\n            return new ServerModel.Restaurant();\n        };\n        return Restaurant;\n    }(Location));\n    ClientModel.Restaurant = Restaurant;\n    var Supermarket = (function (_super) {\n        __extends(Supermarket, _super);\n        function Supermarket() {\n            _super.apply(this, arguments);\n            this.ServerApi = ServerApi.SupermarketApi.GetDefault();\n        }\n        Supermarket.prototype.DeleteOnServer = function () {\n            return _super.prototype.DeleteOnServer.call(this);\n        };\n        Supermarket.prototype.SaveToServer = function () {\n            return _super.prototype.SaveToServer.call(this);\n        };\n        Supermarket.prototype.LoadFromServerEntity = function (serverEntity) {\n            var entity = _super.prototype.LoadFromServerEntity.call(this, serverEntity);\n            return entity;\n        };\n        Supermarket.prototype.ConvertToServerEntity = function (idOnly) {\n            if (idOnly === void 0) { idOnly = false; }\n            var entity = _super.prototype.ConvertToServerEntity.call(this, idOnly);\n            if (!idOnly) {\n            }\n            return entity;\n        };\n        Supermarket.prototype.CopyTo = function (entity) {\n            _super.prototype.CopyTo.call(this, entity);\n        };\n        Supermarket.prototype.CreateServerEntity = function () {\n            return new ServerModel.Supermarket();\n        };\n        return Supermarket;\n    }(Location));\n    ClientModel.Supermarket = Supermarket;\n    var WaypointDistance = (function () {\n        function WaypointDistance(Precessor, Waypoint, Distance, calculaterdWaypoints) {\n            this.Precessor = Precessor;\n            this.Waypoint = Waypoint;\n            this.Distance = Distance;\n            this.ConnectedWayPoints = new Array();\n            this.ConnectedDistances = new Array();\n            this.LatLng = Waypoint.LatLng;\n            calculaterdWaypoints.push(Waypoint);\n            for (var _i = 0, _a = Waypoint.GetConnectedWaypoints(); _i < _a.length; _i++) {\n                var wp = _a[_i];\n                if (calculaterdWaypoints.indexOf(wp) === -1)\n                    this.ConnectedWayPoints.push(wp);\n            }\n        }\n        return WaypointDistance;\n    }());\n    ClientModel.WaypointDistance = WaypointDistance;\n})(ClientModel || (ClientModel = {}));\nvar MarkerType;\n(function (MarkerType) {\n    MarkerType[MarkerType[\"Harbour\"] = 0] = \"Harbour\";\n    MarkerType[MarkerType[\"Dummy\"] = 1] = \"Dummy\";\n    MarkerType[MarkerType[\"Waypoint\"] = 2] = \"Waypoint\";\n    MarkerType[MarkerType[\"WeatherStation\"] = 3] = \"WeatherStation\";\n})(MarkerType || (MarkerType = {}));\n\n//# sourceMappingURL=data:application/json;base64,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SyxDQUFBO0lBQ0wsbURBQVEsQ0FBQTtJQUNSLCtEQUFjLENBQUE7QUFDbEIsQ0FBQyxFQUxJLFVBQVUsS0FBVixVQUFVLFFBS2QiLCJmaWxlIjoiQ2xpZW50TW9kZWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgU0VudGl0eSA9IFNlcnZlck1vZGVsLkVudGl0eTtcclxuaW1wb3J0IFNQZXJzb24gPSBTZXJ2ZXJNb2RlbC5QZXJzb247XHJcbmltcG9ydCBTSm9iID0gU2VydmVyTW9kZWwuSm9iO1xyXG5cclxubW9kdWxlIENsaWVudE1vZGVsIHtcclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElFbnRpdHk8VCBleHRlbmRzIEVudGl0eSwgU1QgZXh0ZW5kcyBTZXJ2ZXJNb2RlbC5FbnRpdHk+IHtcclxuXHJcbiAgICAgICAgRGVsZXRlT25TZXJ2ZXIoKTogSlF1ZXJ5UHJvbWlzZTxTVD47XHJcblxyXG4gICAgICAgIFNhdmVUb1NlcnZlcigpOiBKUXVlcnlQcm9taXNlPFNUPjtcclxuXHJcbiAgICAgICAgTG9hZEZyb21TZXJ2ZXJFbnRpdHkoc2VydmVyRW50aXR5OiBTVCk6IFQ7XHJcblxyXG4gICAgICAgIENvbnZlcnRUb1NlcnZlckVudGl0eShpZE9ubHk6IGJvb2xlYW4pOiBTVDtcclxuXHJcbiAgICAgICAgQ29weVRvKGVudGl0eTogVCk6IHZvaWQ7XHJcblxyXG4gICAgICAgIENyZWF0ZVNlcnZlckVudGl0eSgpOiBTVDtcclxuXHJcbiAgICAgICAgU2VydmVyQXBpOiBTZXJ2ZXJBcGkuQXBpPFNUPjtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgRW50aXR5IHtcclxuXHJcbiAgICAgICAgSWQgPSBrby5vYnNlcnZhYmxlPG51bWJlcj4oKTtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIFNlcnZlckFwaTogU2VydmVyQXBpLkFwaTxTRW50aXR5PjtcclxuXHJcbiAgICAgICAgRGVsZXRlT25TZXJ2ZXIoKTogSlF1ZXJ5UHJvbWlzZTxTRW50aXR5PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLlNlcnZlckFwaS5EZWxldGUodGhpcy5JZCgpKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBTYXZlVG9TZXJ2ZXIoKTogSlF1ZXJ5UHJvbWlzZTxTRW50aXR5PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLklkKCkgPT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLlNlcnZlckFwaS5DcmVhdGUodGhpcy5Db252ZXJ0VG9TZXJ2ZXJFbnRpdHkoKSkuZG9uZShkYXRhID0+IHRoaXMuSWQoZGF0YS5JZCkpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5TZXJ2ZXJBcGkuVXBkYXRlKHRoaXMuQ29udmVydFRvU2VydmVyRW50aXR5KCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgTG9hZEZyb21TZXJ2ZXJFbnRpdHkoc2VydmVyRW50aXR5OiBTRW50aXR5KTogRW50aXR5IHtcclxuICAgICAgICAgICAgdGhpcy5JZChzZXJ2ZXJFbnRpdHkuSWQpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIENvbnZlcnRUb1NlcnZlckVudGl0eShpZE9ubHk6IGJvb2xlYW4gPSBmYWxzZSk6IFNFbnRpdHkge1xyXG4gICAgICAgICAgICBjb25zdCBlbnRpdHkgPSB0aGlzLkNyZWF0ZVNlcnZlckVudGl0eSgpO1xyXG4gICAgICAgICAgICBlbnRpdHkuSWQgPSB0aGlzLklkKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBlbnRpdHk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBDb3B5VG8oZW50aXR5OiBFbnRpdHkpIHtcclxuICAgICAgICAgICAgZW50aXR5LklkKHRoaXMuSWQoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhYnN0cmFjdCBDcmVhdGVTZXJ2ZXJFbnRpdHkoKTogU0VudGl0eTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzYXZlZFN0YXRlOiBhbnk7XHJcblxyXG4gICAgICAgIFNhdmVTdGF0ZSgpIHtcclxuICAgICAgICAgICAgY29uc3QgZW50aXR5ID0gdGhpcztcclxuICAgICAgICAgICAgZW50aXR5LnNhdmVkU3RhdGUgPSBuZXcgT2JqZWN0KCk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHByb3AgaW4gZW50aXR5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZW50aXR5Lmhhc093blByb3BlcnR5KHByb3ApKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtvLmlzV3JpdGVhYmxlT2JzZXJ2YWJsZShlbnRpdHlbcHJvcF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB2YWwgPSBrby51bndyYXAoZW50aXR5W3Byb3BdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSB2YWwuc2xpY2UoMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBlbGVtIG9mIHZhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtIGluc3RhbmNlb2YgRW50aXR5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtLlNhdmVTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbCBpbnN0YW5jZW9mIEVudGl0eSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbC5TYXZlU3RhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5LnNhdmVkU3RhdGVbcHJvcF0gPSB2YWw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBSZXZlcnRTdGF0ZShpZ25vcmVFcnJvcjogYm9vbGVhbj1mYWxzZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zYXZlZFN0YXRlID09PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgICBpZiAoaWdub3JlRXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IFwiTm8gc2F2ZWQgc3RhdGVcIjtcclxuICAgICAgICAgICAgY29uc3QgZW50aXR5ID0gdGhpcztcclxuICAgICAgICAgICAgZm9yIChsZXQgcHJvcCBpbiBlbnRpdHkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlbnRpdHkuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoa28uaXNXcml0ZWFibGVPYnNlcnZhYmxlKGVudGl0eVtwcm9wXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsID0gZW50aXR5LnNhdmVkU3RhdGVbcHJvcF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcy5zYXZlZFN0YXRlW3Byb3BdID0gdmFsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHlbcHJvcF0odmFsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIEVudGl0eSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbC5SZXZlcnRTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWwgaW5zdGFuY2VvZiBBcnJheSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGVsZW0gb2YgdmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW0gaW5zdGFuY2VvZiBFbnRpdHkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0uUmV2ZXJ0U3RhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFBlcnNvbiBleHRlbmRzIEVudGl0eSB7XHJcblxyXG4gICAgICAgIERlbGV0ZU9uU2VydmVyKCk6IEpRdWVyeVByb21pc2U8U1BlcnNvbj4ge1xyXG4gICAgICAgICAgICByZXR1cm4gc3VwZXIuRGVsZXRlT25TZXJ2ZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFNhdmVUb1NlcnZlcigpOiBKUXVlcnlQcm9taXNlPFNQZXJzb24+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLlNhdmVUb1NlcnZlcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgTG9hZEZyb21TZXJ2ZXJFbnRpdHkoc2VydmVyRW50aXR5OiBTUGVyc29uKTogUGVyc29uIHtcclxuICAgICAgICAgICAgc3VwZXIuTG9hZEZyb21TZXJ2ZXJFbnRpdHkoc2VydmVyRW50aXR5KTtcclxuICAgICAgICAgICAgdGhpcy5MYXN0TmFtZShzZXJ2ZXJFbnRpdHkuTGFzdE5hbWUpO1xyXG4gICAgICAgICAgICB0aGlzLkZpcnN0TmFtZShzZXJ2ZXJFbnRpdHkuRmlyc3ROYW1lKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBDb252ZXJ0VG9TZXJ2ZXJFbnRpdHkoaWRPbmx5OiBib29sZWFuID0gZmFsc2UpOiBTUGVyc29uIHtcclxuICAgICAgICAgICAgY29uc3QgZW50aXR5ID0gc3VwZXIuQ29udmVydFRvU2VydmVyRW50aXR5KGlkT25seSkgYXMgU1BlcnNvbjtcclxuICAgICAgICAgICAgaWYgKCFpZE9ubHkpIHtcclxuICAgICAgICAgICAgICAgIGVudGl0eS5GaXJzdE5hbWUgPSB0aGlzLkZpcnN0TmFtZSgpO1xyXG4gICAgICAgICAgICAgICAgZW50aXR5Lkxhc3ROYW1lID0gdGhpcy5MYXN0TmFtZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBlbnRpdHk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBDcmVhdGVTZXJ2ZXJFbnRpdHkoKTogU1BlcnNvbiB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgU1BlcnNvbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgQ29weVRvKHBlcnNvbjogUGVyc29uKSB7XHJcbiAgICAgICAgICAgIHN1cGVyLkNvcHlUbyhwZXJzb24pO1xyXG4gICAgICAgICAgICBwZXJzb24uTGFzdE5hbWUodGhpcy5MYXN0TmFtZSgpKTtcclxuICAgICAgICAgICAgcGVyc29uLkZpcnN0TmFtZSh0aGlzLkZpcnN0TmFtZSgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFNlcnZlckFwaSA9IFNlcnZlckFwaS5QZXJzb25BcGkuR2V0RGVmYXVsdCgpO1xyXG4gICAgICAgIExhc3ROYW1lID0ga28ub2JzZXJ2YWJsZTxzdHJpbmc+KCk7XHJcbiAgICAgICAgRmlyc3ROYW1lID0ga28ub2JzZXJ2YWJsZTxzdHJpbmc+KCk7XHJcbiAgICAgICAgRnVsbE5hbWUgPSBrby5jb21wdXRlZCgoKSA9PiB0aGlzLkZpcnN0TmFtZSgpICsgXCIgXCIgKyB0aGlzLkxhc3ROYW1lKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBKb2IgZXh0ZW5kcyBFbnRpdHkge1xyXG4gICAgICAgIER1ZVRvID0ga28ub2JzZXJ2YWJsZTxEYXRlPigpO1xyXG4gICAgICAgIEFzc2lnbmVkVG8gPSBrby5vYnNlcnZhYmxlPFBlcnNvbj4oKTtcclxuICAgICAgICBBc3NpZ25lZFRvSWQgPSBrby5vYnNlcnZhYmxlPG51bWJlcj4oKTtcclxuICAgICAgICBUaXRsZSA9IGtvLm9ic2VydmFibGU8U3RyaW5nPigpO1xyXG4gICAgICAgIENvbnRlbnQgPSBrby5vYnNlcnZhYmxlPFN0cmluZz4oKTtcclxuICAgICAgICBEb25lID0ga28ub2JzZXJ2YWJsZTxib29sZWFuPigpO1xyXG4gICAgICAgIFN1cGVySm9iID0ga28ub2JzZXJ2YWJsZTxKb2I+KCk7XHJcbiAgICAgICAgU3VwZXJKb2JJZCA9IGtvLm9ic2VydmFibGU8bnVtYmVyPigpO1xyXG4gICAgICAgIFRyaXAgPSBrby5vYnNlcnZhYmxlPFRyaXA+KCk7XHJcbiAgICAgICAgVHJpcElkID0ga28ub2JzZXJ2YWJsZTxudW1iZXI+KCk7XHJcbiAgICAgICAgU3ViSm9icyA9IGtvLm9ic2VydmFibGVBcnJheTxKb2I+KCk7XHJcblxyXG4gICAgICAgIERlbGV0ZU9uU2VydmVyKCk6IEpRdWVyeVByb21pc2U8U0pvYj4ge1xyXG4gICAgICAgICAgICByZXR1cm4gc3VwZXIuRGVsZXRlT25TZXJ2ZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFNhdmVUb1NlcnZlcigpOiBKUXVlcnlQcm9taXNlPFNKb2I+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLlNhdmVUb1NlcnZlcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgTG9hZEZyb21TZXJ2ZXJFbnRpdHkoc2VydmVyRW50aXR5OiBTZXJ2ZXJNb2RlbC5Kb2IpOiBKb2Ige1xyXG4gICAgICAgICAgICBzdXBlci5Mb2FkRnJvbVNlcnZlckVudGl0eShzZXJ2ZXJFbnRpdHkpO1xyXG4gICAgICAgICAgICB0aGlzLkR1ZVRvKHNlcnZlckVudGl0eS5EdWVUbyk7XHJcbiAgICAgICAgICAgIHRoaXMuQXNzaWduZWRUb0lkKHNlcnZlckVudGl0eS5Bc3NpZ25lZFRvSWQpO1xyXG4gICAgICAgICAgICB0aGlzLlRpdGxlKHNlcnZlckVudGl0eS5UaXRsZSk7XHJcbiAgICAgICAgICAgIHRoaXMuQ29udGVudChzZXJ2ZXJFbnRpdHkuQ29udGVudCk7XHJcbiAgICAgICAgICAgIHRoaXMuRG9uZShzZXJ2ZXJFbnRpdHkuRG9uZSk7XHJcbiAgICAgICAgICAgIHRoaXMuVHJpcElkKHNlcnZlckVudGl0eS5UcmlwSWQpO1xyXG4gICAgICAgICAgICB0aGlzLlN1cGVySm9iSWQoc2VydmVyRW50aXR5LlN1cGVySm9iSWQpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIENvbnZlcnRUb1NlcnZlckVudGl0eShpZE9ubHk6IGJvb2xlYW4gPSBmYWxzZSk6IFNlcnZlck1vZGVsLkpvYiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVudGl0eSA9IHN1cGVyLkNvbnZlcnRUb1NlcnZlckVudGl0eShpZE9ubHkpIGFzIFNlcnZlck1vZGVsLkpvYjtcclxuICAgICAgICAgICAgaWYgKCFpZE9ubHkpIHtcclxuICAgICAgICAgICAgICAgIGVudGl0eS5EdWVUbyA9IHRoaXMuRHVlVG8oKTtcclxuICAgICAgICAgICAgICAgIGVudGl0eS5UaXRsZSA9IHRoaXMuVGl0bGUoKTtcclxuICAgICAgICAgICAgICAgIGVudGl0eS5Db250ZW50ID0gdGhpcy5Db250ZW50KCk7XHJcbiAgICAgICAgICAgICAgICBlbnRpdHkuRG9uZSA9IHRoaXMuRG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgZW50aXR5LkFzc2lnbmVkVG9JZCA9IHRoaXMuQXNzaWduZWRUb0lkKCk7XHJcbiAgICAgICAgICAgICAgICBlbnRpdHkuVHJpcElkID0gdGhpcy5UcmlwSWQoKTtcclxuICAgICAgICAgICAgICAgIGVudGl0eS5TdXBlckpvYklkID0gdGhpcy5TdXBlckpvYklkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGVudGl0eTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIENyZWF0ZVNlcnZlckVudGl0eSgpOiBTZXJ2ZXJNb2RlbC5Kb2Ige1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFNlcnZlck1vZGVsLkpvYigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgQ29weVRvKGpvYjogSm9iKSB7XHJcbiAgICAgICAgICAgIHN1cGVyLkNvcHlUbyhqb2IpO1xyXG4gICAgICAgICAgICBqb2IuRHVlVG8odGhpcy5EdWVUbygpKTtcclxuICAgICAgICAgICAgam9iLkFzc2lnbmVkVG8odGhpcy5Bc3NpZ25lZFRvKCkpO1xyXG4gICAgICAgICAgICBqb2IuQXNzaWduZWRUb0lkKHRoaXMuQXNzaWduZWRUb0lkKCkpO1xyXG4gICAgICAgICAgICBqb2IuVGl0bGUodGhpcy5UaXRsZSgpKTtcclxuICAgICAgICAgICAgam9iLkNvbnRlbnQodGhpcy5Db250ZW50KCkpO1xyXG4gICAgICAgICAgICBqb2IuRG9uZSh0aGlzLkRvbmUoKSk7XHJcbiAgICAgICAgICAgIGpvYi5TdWJKb2JzKHRoaXMuU3ViSm9icygpKTtcclxuICAgICAgICAgICAgam9iLlRyaXAodGhpcy5UcmlwKCkpO1xyXG4gICAgICAgICAgICBqb2IuVHJpcElkKHRoaXMuVHJpcElkKCkpO1xyXG4gICAgICAgICAgICBqb2IuU3VwZXJKb2IodGhpcy5TdXBlckpvYigpKTtcclxuICAgICAgICAgICAgam9iLlN1cGVySm9iSWQodGhpcy5TdXBlckpvYklkKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgSXNMaXN0ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIFNlcnZlckFwaSA9IFNlcnZlckFwaS5Kb2JBcGkuR2V0RGVmYXVsdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBXYXlwb2ludCBleHRlbmRzIEVudGl0eSB7XHJcbiAgICAgICAgY29uc3RydWN0b3IobGF0TG5nOiBMLkxhdExuZywgbWFya2VyVHlwZTogTWFya2VyVHlwZSwgcHJvdGVjdGVkIE1hcDogTC5tYXBib3guTWFwKSB7XHJcbiAgICAgICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgICAgIHRoaXMuTGF0aXR1ZGUobGF0TG5nLmxhdCk7XHJcbiAgICAgICAgICAgIHRoaXMuTG9uZ2l0dWRlKGxhdExuZy5sbmcpO1xyXG4gICAgICAgICAgICB0aGlzLkxhdExuZyA9IG5ldyBMLkxhdExuZyhsYXRMbmcubGF0LCBsYXRMbmcubG5nKTtcclxuICAgICAgICAgICAgdGhpcy5MYXRpdHVkZS5zdWJzY3JpYmUoKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5MYXRMbmcubGF0ICE9PSB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuTGF0TG5nLmxhdCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5Mb25naXR1ZGUuc3Vic2NyaWJlKCh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuTGF0TG5nLmxuZyAhPT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkxhdExuZy5sbmcgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMubWFya2VyVHlwZSA9IG1hcmtlclR5cGU7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnM6IEwuTWFya2VyT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBpZiAobWFya2VyVHlwZSA9PT0gTWFya2VyVHlwZS5EdW1teSkge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5vcGFjaXR5ID0gMC41O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChtYXJrZXJUeXBlID09PSBNYXJrZXJUeXBlLldheXBvaW50IHx8IG1hcmtlclR5cGUgPT09IE1hcmtlclR5cGUuRHVtbXkpIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMuaWNvbiA9IG5ldyBMLkljb24oe1xyXG4gICAgICAgICAgICAgICAgICAgIGljb25Vcmw6IFwiL2ltYWdlcy93YXlwb2ludGhhbmRsZS5wbmdcIixcclxuICAgICAgICAgICAgICAgICAgICBpY29uU2l6ZTogbmV3IEwuUG9pbnQoMTAsIDEwLCB0cnVlKSxcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IFwid2F5cG9pbnRcIlxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgbWFya2VyID0gbmV3IEwuTWFya2VyKHRoaXMuTGF0TG5nLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgbWFya2VyLmFkZFRvKHRoaXMuTWFwKTtcclxuICAgICAgICAgICAgbWFya2VyLldheXBvaW50ID0gdGhpcztcclxuICAgICAgICAgICAgdGhpcy5tYXJrZXIgPSBtYXJrZXI7XHJcbiAgICAgICAgICAgIG1hcmtlci5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ1wiLFxyXG4gICAgICAgICAgICAoZTogTC5MZWFmbGV0TW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5TZXRMYXRMbmcodGhpcy5tYXJrZXIuZ2V0TGF0TG5nKCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5MYXRMbmcuUG9seWxpbmVzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgICAgIHRoaXMuTGF0TG5nLldheXBvaW50ID0gdGhpcztcclxuICAgICAgICAgICAgdGhpcy5MYXRpdHVkZS5zdWJzY3JpYmUoKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5MYXRMbmcubGF0ICE9PSB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuUmVkcmF3KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLkxvbmdpdHVkZS5zdWJzY3JpYmUoKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5MYXRMbmcubG5nICE9PSB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuUmVkcmF3KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFBvcHVwKGNvbnRlbnQ6IHN0cmluZyk7XHJcbiAgICAgICAgUG9wdXAoKTtcclxuICAgICAgICBQb3B1cChjb250ZW50Pzogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBvcHVwICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuTWFwLnJlbW92ZUxheWVyKHRoaXMucG9wdXApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wb3B1cCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY29udGVudCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAvL3RoaXMucG9wdXAgPSBMLnBvcHVwKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hcmtlci5iaW5kUG9wdXAoY29udGVudCk7IC8vLm9wZW5Qb3B1cCgpO1xyXG5cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFNob3coaGlnaGxpZ2h0OiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5tYXJrZXIuc2V0T3BhY2l0eSh0aGlzLm1hcmtlci5XYXlwb2ludC5Jc0R1bW15KCkgPyAwLjUgOiAxKTtcclxuICAgICAgICAgICAgaWYgKGhpZ2hsaWdodClcclxuICAgICAgICAgICAgICAgICQodGhpcy5tYXJrZXIuX2ljb24pLmFkZENsYXNzKFwiZXhwb3NlXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgSGlkZSgpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5tYXJrZXIuc2V0T3BhY2l0eSgwLjEpO1xyXG4gICAgICAgICAgICAkKHRoaXMubWFya2VyLl9pY29uKS5yZW1vdmVDbGFzcyhcImV4cG9zZVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFJlZHJhdygpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5tYXJrZXIuc2V0TGF0TG5nKHRoaXMuTGF0TG5nKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnBvbHlsaW5lcy5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgIHJlZHJhd1BvbHlsaW5lKHRoaXMucG9seWxpbmVzW2ldKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEdldENvbm5lY3RlZFdheXBvaW50cygpOiBXYXlwb2ludFtdIHtcclxuICAgICAgICAgICAgY29uc3QgcmV0ID0gbmV3IEFycmF5PFdheXBvaW50PigpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBsaW5lIG9mIHRoaXMucG9seWxpbmVzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB3YXlwb2ludCBvZiBsaW5lLldheXBvaW50cykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh3YXlwb2ludCAhPT0gdGhpcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0LnB1c2god2F5cG9pbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXQuc29ydCgodzEsIHcyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdzEuTGF0TG5nLmRpc3RhbmNlVG8odGhpcy5MYXRMbmcpIC0gdzIuTGF0TG5nLmRpc3RhbmNlVG8odGhpcy5MYXRMbmcpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnZlcnRGcm9tRHVtbXlIYW5kbGUoKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWFya2VyLnNldE9wYWNpdHkoMSk7XHJcbiAgICAgICAgICAgIHZhciB3MSA9IHRoaXMucG9seWxpbmVzWzBdLldheXBvaW50c1swXTtcclxuICAgICAgICAgICAgdmFyIHcyID0gdGhpcy5wb2x5bGluZXNbMF0uV2F5cG9pbnRzWzFdO1xyXG4gICAgICAgICAgICBzcGxpdFBvbHlsaW5lKHRoaXMucG9seWxpbmVzWzBdKTtcclxuICAgICAgICAgICAgdGhpcy5tYXJrZXJUeXBlID0gTWFya2VyVHlwZS5XYXlwb2ludDtcclxuICAgICAgICAgICAgdGhpcy5TYXZlVG9TZXJ2ZXIoKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoKHcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB3Q0EgPSBTZXJ2ZXJBcGkuV2F5cG9pbnRDb25uZWN0aW9uQXBpLkdldERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB3Q0EuRGlzY29ubmVjdCh3MS5JZCgpLCB3Mi5JZCgpKTtcclxuICAgICAgICAgICAgICAgICAgICB3Q0EuQ29ubmVjdCh3MS5JZCgpLCB3LklkKTtcclxuICAgICAgICAgICAgICAgICAgICB3Q0EuQ29ubmVjdCh3Mi5JZCgpLCB3LklkKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgSXNJblBvbHlsaW5lKHBvbHlsaW5lOiBMLlBvbHlsaW5lKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgY3VycmVudFBvbHlsaW5lIG9mIHRoaXMucG9seWxpbmVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocG9seWxpbmUgPT09IGN1cnJlbnRQb2x5bGluZSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBSZW1vdmVGcm9tTWFwKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tYXJrZXJUeXBlICE9PSBNYXJrZXJUeXBlLkR1bW15KVxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgcG9seWxpbmUgb2YgdGhpcy5wb2x5bGluZXMpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlUG9seWxpbmUocG9seWxpbmUpO1xyXG4gICAgICAgICAgICB0aGlzLk1hcC5yZW1vdmVMYXllcih0aGlzLm1hcmtlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBBZGRUb1BvbHlsaW5lKHBvbHlsaW5lOiBMLlBvbHlsaW5lKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLklzSW5Qb2x5bGluZShwb2x5bGluZSkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChwb2x5bGluZS5EdW1teUhhbmRsZSAhPT0gdGhpcykge1xyXG4gICAgICAgICAgICAgICAgcG9seWxpbmUuV2F5cG9pbnRzLnB1c2godGhpcyk7XHJcbiAgICAgICAgICAgICAgICBwb2x5bGluZS5hZGRMYXRMbmcodGhpcy5MYXRMbmcpO1xyXG4gICAgICAgICAgICAgICAgcG9seWxpbmUucmVkcmF3KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5MYXRMbmcuUG9seWxpbmVzLnB1c2gocG9seWxpbmUpO1xyXG4gICAgICAgICAgICB0aGlzLnBvbHlsaW5lcy5wdXNoKHBvbHlsaW5lKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocG9seWxpbmUuV2F5cG9pbnRzKTtcclxuICAgICAgICAgICAgLy9TZXJ2ZXJBcGkuV2F5cG9pbnRDb25uZWN0aW9uQXBpLkdldERlZmF1bHQoKS5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBSZW1vdmVGcm9tUG9seWxpbmUocG9seWxpbmU6IEwuUG9seWxpbmUpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLklzSW5Qb2x5bGluZShwb2x5bGluZSkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIHJlbW92ZUZyb21BcnJheShwb2x5bGluZS5XYXlwb2ludHMsIHRoaXMpO1xyXG4gICAgICAgICAgICByZW1vdmVGcm9tQXJyYXkodGhpcy5wb2x5bGluZXMsIHBvbHlsaW5lKTtcclxuICAgICAgICAgICAgcmVtb3ZlRnJvbUFycmF5KHRoaXMuTGF0TG5nLlBvbHlsaW5lcywgcG9seWxpbmUpO1xyXG4gICAgICAgICAgICByZW1vdmVGcm9tQXJyYXkocG9seWxpbmUuZ2V0TGF0TG5ncygpLCB0aGlzLkxhdExuZyk7XHJcbiAgICAgICAgICAgIHBvbHlsaW5lLnJlZHJhdygpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFJlbW92ZUlmSGFzWmVyb09yT25lUG9seWxpbmVzKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFdheXBvaW50TnVtYmVyID0ga28ub2JzZXJ2YWJsZTxudW1iZXI+KCk7XHJcbiAgICAgICAgcHJpdmF0ZSBwb2x5bGluZXMgPSBuZXcgQXJyYXk8TC5Qb2x5bGluZT4oKTtcclxuXHJcblxyXG4gICAgICAgIFNldExhdExuZyhsYXRMbmc6IEwuTGF0TG5nKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuTGF0TG5nLmxhdCA9IGxhdExuZy5sYXQ7XHJcbiAgICAgICAgICAgIHRoaXMuTGF0TG5nLmxuZyA9IGxhdExuZy5sbmc7XHJcbiAgICAgICAgICAgIHRoaXMuTGF0aXR1ZGUobGF0TG5nLmxhdCk7XHJcbiAgICAgICAgICAgIHRoaXMuTG9uZ2l0dWRlKGxhdExuZy5sbmcpO1xyXG4gICAgICAgICAgICB0aGlzLlJlZHJhdygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgQ2VudGVyT25NYXAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuTWFwLnNldFZpZXcodGhpcy5MYXRMbmcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgSXNEdW1teSgpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWFya2VyVHlwZSA9PT0gTWFya2VyVHlwZS5EdW1teTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIExhdGl0dWRlID0ga28ub2JzZXJ2YWJsZTxudW1iZXI+KCk7XHJcbiAgICAgICAgTG9uZ2l0dWRlID0ga28ub2JzZXJ2YWJsZTxudW1iZXI+KCk7XHJcbiAgICAgICAgRGlzdGFuY2UgPSBrby5vYnNlcnZhYmxlPG51bWJlcj4oKTtcclxuICAgICAgICBwcm90ZWN0ZWQgcG9wdXA6IEwuUG9wdXA7XHJcbiAgICAgICAgTGF0TG5nOiBMLkxhdExuZztcclxuICAgICAgICBwcm90ZWN0ZWQgbWFya2VyVHlwZTogTWFya2VyVHlwZTtcclxuICAgICAgICBtYXJrZXI6IEwuTWFya2VyO1xyXG5cclxuICAgICAgICBOYW1lID0ga28ub2JzZXJ2YWJsZTxzdHJpbmc+KCk7XHJcbiAgICAgICAgRGVzY3JpcHRpb24gPSBrby5vYnNlcnZhYmxlPHN0cmluZz4oKTtcclxuXHJcbiAgICAgICAgRGVsZXRlT25TZXJ2ZXIoKTogSlF1ZXJ5UHJvbWlzZTxTZXJ2ZXJNb2RlbC5XYXlwb2ludD4ge1xyXG4gICAgICAgICAgICByZXR1cm4gc3VwZXIuRGVsZXRlT25TZXJ2ZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFNhdmVUb1NlcnZlcigpOiBKUXVlcnlQcm9taXNlPFNlcnZlck1vZGVsLldheXBvaW50PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5TYXZlVG9TZXJ2ZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIExvYWRGcm9tU2VydmVyRW50aXR5KHNlcnZlckVudGl0eTogU2VydmVyTW9kZWwuV2F5cG9pbnQpOiBXYXlwb2ludCB7XHJcbiAgICAgICAgICAgIHN1cGVyLkxvYWRGcm9tU2VydmVyRW50aXR5KHNlcnZlckVudGl0eSk7XHJcbiAgICAgICAgICAgIHRoaXMuRGVzY3JpcHRpb24oc2VydmVyRW50aXR5LkRlc2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgdGhpcy5MYXRpdHVkZShzZXJ2ZXJFbnRpdHkuTGF0aXR1ZGUpO1xyXG4gICAgICAgICAgICB0aGlzLkxvbmdpdHVkZShzZXJ2ZXJFbnRpdHkuTG9uZ2l0dWRlKTtcclxuICAgICAgICAgICAgdGhpcy5OYW1lKHNlcnZlckVudGl0eS5OYW1lKTtcclxuICAgICAgICAgICAgdGhpcy5XYXlwb2ludE51bWJlcihzZXJ2ZXJFbnRpdHkuV2F5cG9pbnROdW1iZXIpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIENvbnZlcnRUb1NlcnZlckVudGl0eShpZE9ubHk6IGJvb2xlYW49ZmFsc2UpOiBTZXJ2ZXJNb2RlbC5XYXlwb2ludCB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVudGl0eSA9IHN1cGVyLkNvbnZlcnRUb1NlcnZlckVudGl0eShpZE9ubHkpIGFzIFNlcnZlck1vZGVsLldheXBvaW50O1xyXG4gICAgICAgICAgICBlbnRpdHkuRGVzY3JpcHRpb24gPSB0aGlzLkRlc2NyaXB0aW9uKCk7XHJcbiAgICAgICAgICAgIGVudGl0eS5MYXRpdHVkZSA9IHRoaXMuTGF0aXR1ZGUoKTtcclxuICAgICAgICAgICAgZW50aXR5LkxvbmdpdHVkZSA9IHRoaXMuTG9uZ2l0dWRlKCk7XHJcbiAgICAgICAgICAgIGVudGl0eS5OYW1lID0gdGhpcy5OYW1lKCk7XHJcbiAgICAgICAgICAgIGVudGl0eS5XYXlwb2ludE51bWJlciA9IHRoaXMuV2F5cG9pbnROdW1iZXIoKTtcclxuICAgICAgICAgICAgcmV0dXJuIGVudGl0eTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIENvcHlUbyhlbnRpdHk6IFdheXBvaW50KTogdm9pZCB7XHJcbiAgICAgICAgICAgIHN1cGVyLkNvcHlUbyhlbnRpdHkpO1xyXG4gICAgICAgICAgICBlbnRpdHkuRGVzY3JpcHRpb24odGhpcy5EZXNjcmlwdGlvbigpKTtcclxuICAgICAgICAgICAgZW50aXR5LkxhdExuZyA9IHRoaXMuTGF0TG5nO1xyXG4gICAgICAgICAgICBlbnRpdHkuTGF0aXR1ZGUodGhpcy5MYXRpdHVkZSgpKTtcclxuICAgICAgICAgICAgZW50aXR5LkxvbmdpdHVkZSh0aGlzLkxvbmdpdHVkZSgpKTtcclxuICAgICAgICAgICAgZW50aXR5Lk5hbWUodGhpcy5OYW1lKCkpO1xyXG4gICAgICAgICAgICBlbnRpdHkuV2F5cG9pbnROdW1iZXIodGhpcy5XYXlwb2ludE51bWJlcigpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIENyZWF0ZVNlcnZlckVudGl0eSgpOiBTZXJ2ZXJNb2RlbC5XYXlwb2ludCB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2VydmVyTW9kZWwuV2F5cG9pbnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFNlcnZlckFwaSA9IFNlcnZlckFwaS5XYXlwb2ludEFwaS5HZXREZWZhdWx0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIEhhcmJvdXIgZXh0ZW5kcyBXYXlwb2ludCB7XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKG5hbWU6IHN0cmluZywgbGF0TG5nOiBMLkxhdExuZywgbWFwOiBMLm1hcGJveC5NYXApIHtcclxuICAgICAgICAgICAgc3VwZXIobGF0TG5nLCBNYXJrZXJUeXBlLkhhcmJvdXIsIG1hcCk7XHJcbiAgICAgICAgICAgIHRoaXMuTmFtZShuYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFJlbW92ZUlmSGFzWmVyb09yT25lUG9seWxpbmVzKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBEZWxldGVPblNlcnZlcigpOiBKUXVlcnlQcm9taXNlPFNlcnZlck1vZGVsLkhhcmJvdXI+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLkRlbGV0ZU9uU2VydmVyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBTYXZlVG9TZXJ2ZXIoKTogSlF1ZXJ5UHJvbWlzZTxTZXJ2ZXJNb2RlbC5IYXJib3VyPiB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5TYXZlVG9TZXJ2ZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIExvYWRGcm9tU2VydmVyRW50aXR5KHNlcnZlckVudGl0eTogU2VydmVyTW9kZWwuSGFyYm91cik6IEhhcmJvdXIge1xyXG4gICAgICAgICAgICBzdXBlci5Mb2FkRnJvbVNlcnZlckVudGl0eShzZXJ2ZXJFbnRpdHkpO1xyXG4gICAgICAgICAgICB0aGlzLkFsYnVtSWQoc2VydmVyRW50aXR5LkFsYnVtSWQpO1xyXG4gICAgICAgICAgICB0aGlzLlJhdGluZyhzZXJ2ZXJFbnRpdHkuUmF0aW5nKTtcclxuICAgICAgICAgICAgdGhpcy5Db250ZW50KHNlcnZlckVudGl0eS5Db250ZW50KTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coc2VydmVyRW50aXR5KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBDb252ZXJ0VG9TZXJ2ZXJFbnRpdHkoaWRPbmx5OiBib29sZWFuPWZhbHNlKTogU2VydmVyTW9kZWwuSGFyYm91ciB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlcnZlckVudGl0eSA9IHN1cGVyLkNvbnZlcnRUb1NlcnZlckVudGl0eShpZE9ubHkpIGFzIFNlcnZlck1vZGVsLkhhcmJvdXI7XHJcbiAgICAgICAgICAgIHNlcnZlckVudGl0eS5BbGJ1bUlkID0gdGhpcy5BbGJ1bUlkKCk7XHJcbiAgICAgICAgICAgIHNlcnZlckVudGl0eS5SYXRpbmcgPSB0aGlzLlJhdGluZygpO1xyXG4gICAgICAgICAgICByZXR1cm4gc2VydmVyRW50aXR5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgQ29weVRvKGVudGl0eTogSGFyYm91cik6IHZvaWQge1xyXG4gICAgICAgICAgICBzdXBlci5Db3B5VG8oZW50aXR5KTtcclxuICAgICAgICAgICAgZW50aXR5LkxvY2F0aW9ucyh0aGlzLkxvY2F0aW9ucygpKTtcclxuICAgICAgICAgICAgZW50aXR5LkFsYnVtKHRoaXMuQWxidW0oKSk7XHJcbiAgICAgICAgICAgIGVudGl0eS5BbGJ1bUlkKHRoaXMuQWxidW1JZCgpKTtcclxuICAgICAgICAgICAgZW50aXR5LlJhdGluZyh0aGlzLlJhdGluZygpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIENyZWF0ZVNlcnZlckVudGl0eSgpOiBTZXJ2ZXJNb2RlbC5IYXJib3VyIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTZXJ2ZXJNb2RlbC5IYXJib3VyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBTZXJ2ZXJBcGkgPSBTZXJ2ZXJBcGkuSGFyYm91ckFwaS5HZXREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIExvY2F0aW9ucyA9IGtvLm9ic2VydmFibGVBcnJheTxMb2NhdGlvbj4oKTtcclxuICAgICAgICBBbGJ1bSA9IGtvLm9ic2VydmFibGU8QWxidW0+KCk7XHJcbiAgICAgICAgQWxidW1JZCA9IGtvLm9ic2VydmFibGU8bnVtYmVyPigpO1xyXG4gICAgICAgIFJhdGluZyA9IGtvLm9ic2VydmFibGU8bnVtYmVyPigpO1xyXG4gICAgICAgIENvbnRlbnQ9a28ub2JzZXJ2YWJsZTxzdHJpbmc+KCk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFRyaXAgZXh0ZW5kcyBFbnRpdHkgaW1wbGVtZW50cyBJRW50aXR5PFRyaXAsIFNlcnZlck1vZGVsLlRyaXA+IHtcclxuICAgICAgICBOYW1lID0ga28ub2JzZXJ2YWJsZTxzdHJpbmc+KCk7XHJcbiAgICAgICAgU3RhcnQgPSBrby5vYnNlcnZhYmxlPERhdGU+KCk7XHJcbiAgICAgICAgRW5kID0ga28ub2JzZXJ2YWJsZTxEYXRlPigpO1xyXG4gICAgICAgIENvbnRlbnQgPSBrby5vYnNlcnZhYmxlPHN0cmluZz4oKTtcclxuICAgICAgICBUYWNrcyA9IGtvLm9ic2VydmFibGVBcnJheTxUYWNrPigpO1xyXG5cclxuICAgICAgICBMb2FkRnJvbVNlcnZlckVudGl0eShzZXJ2ZXJFbnRpdHk6IFNlcnZlck1vZGVsLlRyaXApOiBUcmlwIHtcclxuICAgICAgICAgICAgY29uc3QgZW50aXR5ID0gc3VwZXIuTG9hZEZyb21TZXJ2ZXJFbnRpdHkoc2VydmVyRW50aXR5KSBhcyBUcmlwO1xyXG4gICAgICAgICAgICBlbnRpdHkuTmFtZShzZXJ2ZXJFbnRpdHkuTmFtZSk7XHJcbiAgICAgICAgICAgIGVudGl0eS5TdGFydChzZXJ2ZXJFbnRpdHkuU3RhcnQpO1xyXG4gICAgICAgICAgICBlbnRpdHkuRW5kKHNlcnZlckVudGl0eS5FbmQpO1xyXG4gICAgICAgICAgICBlbnRpdHkuQ29udGVudChzZXJ2ZXJFbnRpdHkuQ29udGVudCk7XHJcbiAgICAgICAgICAgIHJldHVybiBlbnRpdHk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBDb252ZXJ0VG9TZXJ2ZXJFbnRpdHkoaWRPbmx5OiBib29sZWFuPWZhbHNlKTogU2VydmVyTW9kZWwuVHJpcCB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVudGl0eSA9IHN1cGVyLkNvbnZlcnRUb1NlcnZlckVudGl0eShpZE9ubHkpIGFzIFNlcnZlck1vZGVsLlRyaXA7XHJcbiAgICAgICAgICAgIGlmICghaWRPbmx5KSB7XHJcbiAgICAgICAgICAgICAgICBlbnRpdHkuTmFtZSA9IHRoaXMuTmFtZSgpO1xyXG4gICAgICAgICAgICAgICAgZW50aXR5LlN0YXJ0ID0gdGhpcy5TdGFydCgpO1xyXG4gICAgICAgICAgICAgICAgZW50aXR5LkVuZCA9IHRoaXMuRW5kKCk7XHJcbiAgICAgICAgICAgICAgICBlbnRpdHkuQ29udGVudCA9IHRoaXMuQ29udGVudCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBlbnRpdHk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBDb3B5VG8oZW50aXR5OiBUcmlwKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHN1cGVyLkNvcHlUbyhlbnRpdHkpO1xyXG4gICAgICAgICAgICBlbnRpdHkuTmFtZSh0aGlzLk5hbWUoKSk7XHJcbiAgICAgICAgICAgIGVudGl0eS5TdGFydCh0aGlzLlN0YXJ0KCkpO1xyXG4gICAgICAgICAgICBlbnRpdHkuRW5kKHRoaXMuRW5kKCkpO1xyXG4gICAgICAgICAgICBlbnRpdHkuQ29udGVudCh0aGlzLkNvbnRlbnQoKSk7XHJcbiAgICAgICAgICAgIGVudGl0eS5UYWNrcyh0aGlzLlRhY2tzKCkpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIFNlcnZlckFwaSA9IFNlcnZlckFwaS5UcmlwQXBpLkdldERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgQ3JlYXRlU2VydmVyRW50aXR5KCk6IFNlcnZlck1vZGVsLlRyaXAge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFNlcnZlck1vZGVsLlRyaXAoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIEFkZHJlc3MgZXh0ZW5kcyBFbnRpdHkgaW1wbGVtZW50cyBJRW50aXR5PEFkZHJlc3MsIFNlcnZlck1vZGVsLkFkZHJlc3M+IHtcclxuICAgICAgICBTdHJlZXQgPSBrby5vYnNlcnZhYmxlPHN0cmluZz4oKTtcclxuICAgICAgICBaaXAgPSBrby5vYnNlcnZhYmxlPHN0cmluZz4oKTtcclxuICAgICAgICBUb3duID0ga28ub2JzZXJ2YWJsZTxzdHJpbmc+KCk7XHJcbiAgICAgICAgQ29tbWVudCA9IGtvLm9ic2VydmFibGU8c3RyaW5nPigpO1xyXG5cclxuICAgICAgICBEZWxldGVPblNlcnZlcigpOiBKUXVlcnlQcm9taXNlPFNlcnZlck1vZGVsLkFkZHJlc3M+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLkRlbGV0ZU9uU2VydmVyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBTYXZlVG9TZXJ2ZXIoKTogSlF1ZXJ5UHJvbWlzZTxTZXJ2ZXJNb2RlbC5BZGRyZXNzPiB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5TYXZlVG9TZXJ2ZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIExvYWRGcm9tU2VydmVyRW50aXR5KHNlcnZlckVudGl0eTogU2VydmVyTW9kZWwuQWRkcmVzcyk6IEFkZHJlc3Mge1xyXG4gICAgICAgICAgICBjb25zdCBlbnRpdHkgPSBzdXBlci5Mb2FkRnJvbVNlcnZlckVudGl0eShzZXJ2ZXJFbnRpdHkpIGFzIEFkZHJlc3M7XHJcbiAgICAgICAgICAgIGVudGl0eS5TdHJlZXQoc2VydmVyRW50aXR5LlN0cmVldCk7XHJcbiAgICAgICAgICAgIGVudGl0eS5aaXAoc2VydmVyRW50aXR5LlppcCk7XHJcbiAgICAgICAgICAgIGVudGl0eS5Ub3duKHNlcnZlckVudGl0eS5Ub3duKTtcclxuICAgICAgICAgICAgZW50aXR5LkNvbW1lbnQoc2VydmVyRW50aXR5LkNvbW1lbnQpO1xyXG4gICAgICAgICAgICByZXR1cm4gZW50aXR5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgQ29udmVydFRvU2VydmVyRW50aXR5KGlkT25seTogYm9vbGVhbj1mYWxzZSk6IFNlcnZlck1vZGVsLkFkZHJlc3Mge1xyXG4gICAgICAgICAgICBjb25zdCBlbnRpdHkgPSBzdXBlci5Db252ZXJ0VG9TZXJ2ZXJFbnRpdHkoaWRPbmx5KSBhcyBTZXJ2ZXJNb2RlbC5BZGRyZXNzO1xyXG4gICAgICAgICAgICBpZiAoIWlkT25seSkge1xyXG4gICAgICAgICAgICAgICAgZW50aXR5LlN0cmVldCA9IHRoaXMuU3RyZWV0KCk7XHJcbiAgICAgICAgICAgICAgICBlbnRpdHkuWmlwID0gdGhpcy5aaXAoKTtcclxuICAgICAgICAgICAgICAgIGVudGl0eS5Ub3duID0gdGhpcy5Ub3duKCk7XHJcbiAgICAgICAgICAgICAgICBlbnRpdHkuQ29tbWVudCA9IHRoaXMuQ29tbWVudCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBlbnRpdHk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBDb3B5VG8oZW50aXR5OiBBZGRyZXNzKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHN1cGVyLkNvcHlUbyhlbnRpdHkpO1xyXG4gICAgICAgICAgICBlbnRpdHkuU3RyZWV0KHRoaXMuU3RyZWV0KCkpO1xyXG4gICAgICAgICAgICBlbnRpdHkuWmlwKHRoaXMuWmlwKCkpO1xyXG4gICAgICAgICAgICBlbnRpdHkuVG93bih0aGlzLlRvd24oKSk7XHJcbiAgICAgICAgICAgIGVudGl0eS5Db21tZW50KHRoaXMuQ29tbWVudCgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIENyZWF0ZVNlcnZlckVudGl0eSgpOiBTZXJ2ZXJNb2RlbC5BZGRyZXNzIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTZXJ2ZXJNb2RlbC5BZGRyZXNzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBTZXJ2ZXJBcGk9IFNlcnZlckFwaS5BZGRyZXNzQXBpLkdldERlZmF1bHQoKTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgY2xhc3MgSW1hZ2UgZXh0ZW5kcyBFbnRpdHkgaW1wbGVtZW50cyBJRW50aXR5PEltYWdlLCBTZXJ2ZXJNb2RlbC5JbWFnZT4ge1xyXG4gICAgICAgIEFsYnVtSWQgPSBrby5vYnNlcnZhYmxlPG51bWJlcj4oKTtcclxuICAgICAgICBQYXRoID0ga28ub2JzZXJ2YWJsZTxzdHJpbmc+KCk7XHJcbiAgICAgICAgQ29tbWVudCA9IGtvLm9ic2VydmFibGU8c3RyaW5nPigpO1xyXG5cclxuICAgICAgICBEZWxldGVPblNlcnZlcigpOiBKUXVlcnlQcm9taXNlPFNlcnZlck1vZGVsLkltYWdlPiB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5EZWxldGVPblNlcnZlcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgU2F2ZVRvU2VydmVyKCk6IEpRdWVyeVByb21pc2U8U2VydmVyTW9kZWwuSW1hZ2U+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLlNhdmVUb1NlcnZlcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgTG9hZEZyb21TZXJ2ZXJFbnRpdHkoc2VydmVyRW50aXR5OiBTZXJ2ZXJNb2RlbC5JbWFnZSk6IEltYWdlIHtcclxuICAgICAgICAgICAgY29uc3QgZW50aXR5ID0gc3VwZXIuTG9hZEZyb21TZXJ2ZXJFbnRpdHkoc2VydmVyRW50aXR5KSBhcyBJbWFnZTtcclxuICAgICAgICAgICAgZW50aXR5LkFsYnVtSWQoc2VydmVyRW50aXR5LkFsYnVtSWQpO1xyXG4gICAgICAgICAgICBlbnRpdHkuUGF0aChzZXJ2ZXJFbnRpdHkuUGF0aCk7XHJcbiAgICAgICAgICAgIGVudGl0eS5Db21tZW50KHNlcnZlckVudGl0eS5Db21tZW50KTtcclxuICAgICAgICAgICAgcmV0dXJuIGVudGl0eTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIENvbnZlcnRUb1NlcnZlckVudGl0eShpZE9ubHk6IGJvb2xlYW49ZmFsc2UpOiBTZXJ2ZXJNb2RlbC5JbWFnZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVudGl0eSA9IHN1cGVyLkNvbnZlcnRUb1NlcnZlckVudGl0eShpZE9ubHkpIGFzIFNlcnZlck1vZGVsLkltYWdlO1xyXG4gICAgICAgICAgICBpZiAoIWlkT25seSkge1xyXG4gICAgICAgICAgICAgICAgZW50aXR5LkFsYnVtSWQgPSB0aGlzLkFsYnVtSWQoKTtcclxuICAgICAgICAgICAgICAgIGVudGl0eS5QYXRoID0gdGhpcy5QYXRoKCk7XHJcbiAgICAgICAgICAgICAgICBlbnRpdHkuQ29tbWVudCA9IHRoaXMuQ29tbWVudCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBlbnRpdHk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBDb3B5VG8oZW50aXR5OiBJbWFnZSk6IHZvaWQge1xyXG4gICAgICAgICAgICBzdXBlci5Db3B5VG8oZW50aXR5KTtcclxuICAgICAgICAgICAgZW50aXR5LkFsYnVtSWQodGhpcy5BbGJ1bUlkKCkpO1xyXG4gICAgICAgICAgICBlbnRpdHkuUGF0aCh0aGlzLlBhdGgoKSk7XHJcbiAgICAgICAgICAgIGVudGl0eS5Db21tZW50KHRoaXMuQ29tbWVudCgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIENyZWF0ZVNlcnZlckVudGl0eSgpOiBTZXJ2ZXJNb2RlbC5JbWFnZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2VydmVyTW9kZWwuSW1hZ2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFNlcnZlckFwaT0gU2VydmVyQXBpLkltYWdlQXBpLkdldERlZmF1bHQoKTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgY2xhc3MgQWxidW0gZXh0ZW5kcyBFbnRpdHkgaW1wbGVtZW50cyBJRW50aXR5PEFsYnVtLCBTZXJ2ZXJNb2RlbC5BbGJ1bT4ge1xyXG4gICAgICAgIFN0YW5kQWxvbmUgPSBrby5vYnNlcnZhYmxlPGJvb2xlYW4+KCk7XHJcbiAgICAgICAgQ29tbWVudCA9IGtvLm9ic2VydmFibGU8c3RyaW5nPigpO1xyXG4gICAgICAgIEltYWdlcyA9IGtvLm9ic2VydmFibGVBcnJheTxJbWFnZT4oKTtcclxuXHJcbiAgICAgICAgRGVsZXRlT25TZXJ2ZXIoKTogSlF1ZXJ5UHJvbWlzZTxTZXJ2ZXJNb2RlbC5BbGJ1bT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gc3VwZXIuRGVsZXRlT25TZXJ2ZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFNhdmVUb1NlcnZlcigpOiBKUXVlcnlQcm9taXNlPFNlcnZlck1vZGVsLkFsYnVtPiB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5TYXZlVG9TZXJ2ZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIExvYWRGcm9tU2VydmVyRW50aXR5KHNlcnZlckVudGl0eTogU2VydmVyTW9kZWwuQWxidW0pOiBBbGJ1bSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVudGl0eSA9IHN1cGVyLkxvYWRGcm9tU2VydmVyRW50aXR5KHNlcnZlckVudGl0eSkgYXMgQWxidW07XHJcbiAgICAgICAgICAgIGVudGl0eS5TdGFuZEFsb25lKHNlcnZlckVudGl0eS5TdGFuZEFsb25lKTtcclxuICAgICAgICAgICAgZW50aXR5LkNvbW1lbnQoc2VydmVyRW50aXR5LkNvbW1lbnQpO1xyXG4gICAgICAgICAgICByZXR1cm4gZW50aXR5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgQ29udmVydFRvU2VydmVyRW50aXR5KGlkT25seTogYm9vbGVhbj1mYWxzZSk6IFNlcnZlck1vZGVsLkFsYnVtIHtcclxuICAgICAgICAgICAgY29uc3QgZW50aXR5ID0gc3VwZXIuQ29udmVydFRvU2VydmVyRW50aXR5KGlkT25seSkgYXMgU2VydmVyTW9kZWwuQWxidW07XHJcbiAgICAgICAgICAgIGlmICghaWRPbmx5KSB7XHJcbiAgICAgICAgICAgICAgICBlbnRpdHkuU3RhbmRBbG9uZSA9IHRoaXMuU3RhbmRBbG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgZW50aXR5LkNvbW1lbnQgPSB0aGlzLkNvbW1lbnQoKTtcclxuICAgICAgICAgICAgICAgIGVudGl0eS5JbWFnZXMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGltYWdlIG9mIHRoaXMuSW1hZ2VzKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbnRpdHkuSW1hZ2VzLnB1c2goaW1hZ2UuQ29udmVydFRvU2VydmVyRW50aXR5KCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBlbnRpdHk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBDb3B5VG8oZW50aXR5OiBBbGJ1bSk6IHZvaWQge1xyXG4gICAgICAgICAgICBzdXBlci5Db3B5VG8oZW50aXR5KTtcclxuICAgICAgICAgICAgZW50aXR5LlN0YW5kQWxvbmUodGhpcy5TdGFuZEFsb25lKCkpO1xyXG4gICAgICAgICAgICBlbnRpdHkuQ29tbWVudCh0aGlzLkNvbW1lbnQoKSk7XHJcbiAgICAgICAgICAgIGVudGl0eS5JbWFnZXModGhpcy5JbWFnZXMoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBDcmVhdGVTZXJ2ZXJFbnRpdHkoKTogU2VydmVyTW9kZWwuQWxidW0ge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFNlcnZlck1vZGVsLkFsYnVtKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBTZXJ2ZXJBcGk9IFNlcnZlckFwaS5BbGJ1bUFwaS5HZXREZWZhdWx0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFRhY2sgZXh0ZW5kcyBFbnRpdHkgaW1wbGVtZW50cyBJRW50aXR5PFRhY2ssIFNlcnZlck1vZGVsLlRhY2s+IHtcclxuICAgICAgICBTdGFydCA9IGtvLm9ic2VydmFibGU8RGF0ZT4oKTtcclxuICAgICAgICBFbmQgPSBrby5vYnNlcnZhYmxlPERhdGU+KCk7XHJcbiAgICAgICAgV2F5cG9pbnRzID0ga28ub2JzZXJ2YWJsZUFycmF5PFNlcnZlck1vZGVsLldheXBvaW50VGFjaz4oKTtcclxuICAgICAgICBDcmV3ID0ga28ub2JzZXJ2YWJsZUFycmF5PFBlcnNvbj4oKTtcclxuXHJcbiAgICAgICAgRGVsZXRlT25TZXJ2ZXIoKTogSlF1ZXJ5UHJvbWlzZTxTZXJ2ZXJNb2RlbC5UYWNrPiB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5EZWxldGVPblNlcnZlcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgU2F2ZVRvU2VydmVyKCk6IEpRdWVyeVByb21pc2U8U2VydmVyTW9kZWwuVGFjaz4ge1xyXG4gICAgICAgICAgICByZXR1cm4gc3VwZXIuU2F2ZVRvU2VydmVyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBMb2FkRnJvbVNlcnZlckVudGl0eShzZXJ2ZXJFbnRpdHk6IFNlcnZlck1vZGVsLlRhY2spOiBUYWNrIHtcclxuICAgICAgICAgICAgY29uc3QgZW50aXR5ID0gc3VwZXIuTG9hZEZyb21TZXJ2ZXJFbnRpdHkoc2VydmVyRW50aXR5KSBhcyBUYWNrO1xyXG4gICAgICAgICAgICBlbnRpdHkuU3RhcnQoc2VydmVyRW50aXR5LlN0YXJ0KTtcclxuICAgICAgICAgICAgZW50aXR5LkVuZChzZXJ2ZXJFbnRpdHkuRW5kKTtcclxuICAgICAgICAgICAgcmV0dXJuIGVudGl0eTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIENvbnZlcnRUb1NlcnZlckVudGl0eShpZE9ubHk6IGJvb2xlYW49ZmFsc2UpOiBTZXJ2ZXJNb2RlbC5UYWNrIHtcclxuICAgICAgICAgICAgY29uc3QgZW50aXR5ID0gc3VwZXIuQ29udmVydFRvU2VydmVyRW50aXR5KGlkT25seSkgYXMgU2VydmVyTW9kZWwuVGFjaztcclxuICAgICAgICAgICAgaWYgKCFpZE9ubHkpIHtcclxuICAgICAgICAgICAgICAgIGVudGl0eS5TdGFydCA9IHRoaXMuU3RhcnQoKTtcclxuICAgICAgICAgICAgICAgIGVudGl0eS5FbmQgPSB0aGlzLkVuZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBlbnRpdHk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBDb3B5VG8oZW50aXR5OiBUYWNrKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHN1cGVyLkNvcHlUbyhlbnRpdHkpO1xyXG4gICAgICAgICAgICBlbnRpdHkuU3RhcnQodGhpcy5TdGFydCgpKTtcclxuICAgICAgICAgICAgZW50aXR5LkVuZCh0aGlzLkVuZCgpKTtcclxuICAgICAgICAgICAgZW50aXR5LldheXBvaW50cyh0aGlzLldheXBvaW50cygpKTtcclxuICAgICAgICAgICAgZW50aXR5LkNyZXcodGhpcy5DcmV3KCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgQ3JlYXRlU2VydmVyRW50aXR5KCk6IFNlcnZlck1vZGVsLlRhY2sge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFNlcnZlck1vZGVsLlRhY2soKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFNlcnZlckFwaSA9IFNlcnZlckFwaS5UYWNrQXBpLkdldERlZmF1bHQoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIExvY2F0aW9uIGV4dGVuZHMgRW50aXR5IGltcGxlbWVudHMgSUVudGl0eTxMb2NhdGlvbiwgU2VydmVyTW9kZWwuTG9jYXRpb24+IHtcclxuICAgICAgICBIYXJib3VySWQgPSBrby5vYnNlcnZhYmxlPG51bWJlcj4oKTtcclxuICAgICAgICBXZWJzaXRlID0ga28ub2JzZXJ2YWJsZTxzdHJpbmc+KCk7XHJcbiAgICAgICAgTmFtZSA9IGtvLm9ic2VydmFibGU8c3RyaW5nPigpO1xyXG4gICAgICAgIFJhdGluZyA9IGtvLm9ic2VydmFibGU8bnVtYmVyPigpO1xyXG4gICAgICAgIEFkZHJlc3MgPSBrby5vYnNlcnZhYmxlPEFkZHJlc3M+KCk7XHJcbiAgICAgICAgQWRkcmVzc0lkID0ga28ub2JzZXJ2YWJsZTxudW1iZXI+KCk7XHJcblxyXG4gICAgICAgIERlbGV0ZU9uU2VydmVyKCk6IEpRdWVyeVByb21pc2U8U2VydmVyTW9kZWwuTG9jYXRpb24+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLkRlbGV0ZU9uU2VydmVyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBTYXZlVG9TZXJ2ZXIoKTogSlF1ZXJ5UHJvbWlzZTxTZXJ2ZXJNb2RlbC5Mb2NhdGlvbj4ge1xyXG4gICAgICAgICAgICByZXR1cm4gc3VwZXIuU2F2ZVRvU2VydmVyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBMb2FkRnJvbVNlcnZlckVudGl0eShzZXJ2ZXJFbnRpdHk6IFNlcnZlck1vZGVsLkxvY2F0aW9uKTogTG9jYXRpb24ge1xyXG4gICAgICAgICAgICBjb25zdCBlbnRpdHkgPSBzdXBlci5Mb2FkRnJvbVNlcnZlckVudGl0eShzZXJ2ZXJFbnRpdHkpIGFzIExvY2F0aW9uO1xyXG4gICAgICAgICAgICBlbnRpdHkuSGFyYm91cklkKHNlcnZlckVudGl0eS5IYXJib3VySWQpO1xyXG4gICAgICAgICAgICBlbnRpdHkuV2Vic2l0ZShzZXJ2ZXJFbnRpdHkuV2Vic2l0ZSk7XHJcbiAgICAgICAgICAgIGVudGl0eS5OYW1lKHNlcnZlckVudGl0eS5OYW1lKTtcclxuICAgICAgICAgICAgZW50aXR5LlJhdGluZyhzZXJ2ZXJFbnRpdHkuUmF0aW5nKTtcclxuICAgICAgICAgICAgcmV0dXJuIGVudGl0eTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIENvbnZlcnRUb1NlcnZlckVudGl0eShpZE9ubHk6IGJvb2xlYW49ZmFsc2UpOiBTZXJ2ZXJNb2RlbC5Mb2NhdGlvbiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVudGl0eSA9IHN1cGVyLkNvbnZlcnRUb1NlcnZlckVudGl0eShpZE9ubHkpIGFzIFNlcnZlck1vZGVsLkxvY2F0aW9uO1xyXG4gICAgICAgICAgICBpZiAoIWlkT25seSkge1xyXG4gICAgICAgICAgICAgICAgZW50aXR5LkhhcmJvdXJJZCA9IHRoaXMuSGFyYm91cklkKCk7XHJcbiAgICAgICAgICAgICAgICBlbnRpdHkuV2Vic2l0ZSA9IHRoaXMuV2Vic2l0ZSgpO1xyXG4gICAgICAgICAgICAgICAgZW50aXR5Lk5hbWUgPSB0aGlzLk5hbWUoKTtcclxuICAgICAgICAgICAgICAgIGVudGl0eS5SYXRpbmcgPSB0aGlzLlJhdGluZygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBlbnRpdHk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBDb3B5VG8oZW50aXR5OiBMb2NhdGlvbik6IHZvaWQge1xyXG4gICAgICAgICAgICBzdXBlci5Db3B5VG8oZW50aXR5KTtcclxuICAgICAgICAgICAgZW50aXR5LkhhcmJvdXJJZCh0aGlzLkhhcmJvdXJJZCgpKTtcclxuICAgICAgICAgICAgZW50aXR5LldlYnNpdGUodGhpcy5XZWJzaXRlKCkpO1xyXG4gICAgICAgICAgICBlbnRpdHkuTmFtZSh0aGlzLk5hbWUoKSk7XHJcbiAgICAgICAgICAgIGVudGl0eS5SYXRpbmcodGhpcy5SYXRpbmcoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBDcmVhdGVTZXJ2ZXJFbnRpdHkoKTogU2VydmVyTW9kZWwuTG9jYXRpb24ge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFNlcnZlck1vZGVsLkxvY2F0aW9uKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBTZXJ2ZXJBcGkgPSBTZXJ2ZXJBcGkuTG9jYXRpb25BcGkuR2V0RGVmYXVsdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBSZXN0YXVyYW50IGV4dGVuZHMgTG9jYXRpb24gaW1wbGVtZW50cyBJRW50aXR5PFJlc3RhdXJhbnQsIFNlcnZlck1vZGVsLlJlc3RhdXJhbnQ+IHtcclxuICAgICAgICBEZWxldGVPblNlcnZlcigpOiBKUXVlcnlQcm9taXNlPFNlcnZlck1vZGVsLlJlc3RhdXJhbnQ+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLkRlbGV0ZU9uU2VydmVyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBTYXZlVG9TZXJ2ZXIoKTogSlF1ZXJ5UHJvbWlzZTxTZXJ2ZXJNb2RlbC5SZXN0YXVyYW50PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5TYXZlVG9TZXJ2ZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIExvYWRGcm9tU2VydmVyRW50aXR5KHNlcnZlckVudGl0eTogU2VydmVyTW9kZWwuUmVzdGF1cmFudCk6IFJlc3RhdXJhbnQge1xyXG4gICAgICAgICAgICBjb25zdCBlbnRpdHkgPSBzdXBlci5Mb2FkRnJvbVNlcnZlckVudGl0eShzZXJ2ZXJFbnRpdHkpIGFzIFJlc3RhdXJhbnQ7XHJcbiAgICAgICAgICAgIHJldHVybiBlbnRpdHk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBDb252ZXJ0VG9TZXJ2ZXJFbnRpdHkoaWRPbmx5OiBib29sZWFuPWZhbHNlKTogU2VydmVyTW9kZWwuUmVzdGF1cmFudCB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVudGl0eSA9IHN1cGVyLkNvbnZlcnRUb1NlcnZlckVudGl0eShpZE9ubHkpIGFzIFNlcnZlck1vZGVsLlJlc3RhdXJhbnQ7XHJcbiAgICAgICAgICAgIGlmICghaWRPbmx5KSB7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGVudGl0eTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIENvcHlUbyhlbnRpdHk6IFJlc3RhdXJhbnQpOiB2b2lkIHtcclxuICAgICAgICAgICAgc3VwZXIuQ29weVRvKGVudGl0eSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBDcmVhdGVTZXJ2ZXJFbnRpdHkoKTogU2VydmVyTW9kZWwuUmVzdGF1cmFudCB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2VydmVyTW9kZWwuUmVzdGF1cmFudCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgU2VydmVyQXBpID0gU2VydmVyQXBpLlJlc3RhdXJhbnRBcGkuR2V0RGVmYXVsdCgpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBleHBvcnQgY2xhc3MgU3VwZXJtYXJrZXQgZXh0ZW5kcyBMb2NhdGlvbiBpbXBsZW1lbnRzIElFbnRpdHk8U3VwZXJtYXJrZXQsIFNlcnZlck1vZGVsLlN1cGVybWFya2V0PiB7XHJcbiAgICAgICAgRGVsZXRlT25TZXJ2ZXIoKTogSlF1ZXJ5UHJvbWlzZTxTZXJ2ZXJNb2RlbC5TdXBlcm1hcmtldD4ge1xyXG4gICAgICAgICAgICByZXR1cm4gc3VwZXIuRGVsZXRlT25TZXJ2ZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFNhdmVUb1NlcnZlcigpOiBKUXVlcnlQcm9taXNlPFNlcnZlck1vZGVsLlN1cGVybWFya2V0PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5TYXZlVG9TZXJ2ZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIExvYWRGcm9tU2VydmVyRW50aXR5KHNlcnZlckVudGl0eTogU2VydmVyTW9kZWwuU3VwZXJtYXJrZXQpOiBTdXBlcm1hcmtldCB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVudGl0eSA9IHN1cGVyLkxvYWRGcm9tU2VydmVyRW50aXR5KHNlcnZlckVudGl0eSkgYXMgU3VwZXJtYXJrZXQ7XHJcbiAgICAgICAgICAgIHJldHVybiBlbnRpdHk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBDb252ZXJ0VG9TZXJ2ZXJFbnRpdHkoaWRPbmx5OiBib29sZWFuPWZhbHNlKTogU2VydmVyTW9kZWwuU3VwZXJtYXJrZXQge1xyXG4gICAgICAgICAgICBjb25zdCBlbnRpdHkgPSBzdXBlci5Db252ZXJ0VG9TZXJ2ZXJFbnRpdHkoaWRPbmx5KSBhcyBTZXJ2ZXJNb2RlbC5TdXBlcm1hcmtldDtcclxuICAgICAgICAgICAgaWYgKCFpZE9ubHkpIHtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZW50aXR5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgQ29weVRvKGVudGl0eTogU3VwZXJtYXJrZXQpOiB2b2lkIHtcclxuICAgICAgICAgICAgc3VwZXIuQ29weVRvKGVudGl0eSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBDcmVhdGVTZXJ2ZXJFbnRpdHkoKTogU2VydmVyTW9kZWwuU3VwZXJtYXJrZXQge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFNlcnZlck1vZGVsLlN1cGVybWFya2V0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBTZXJ2ZXJBcGkgPSBTZXJ2ZXJBcGkuU3VwZXJtYXJrZXRBcGkuR2V0RGVmYXVsdCgpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBleHBvcnQgY2xhc3MgV2F5cG9pbnREaXN0YW5jZSB7XHJcbiAgICAgICAgY29uc3RydWN0b3IocHVibGljIFByZWNlc3NvcjogV2F5cG9pbnQsXHJcbiAgICAgICAgICAgIHB1YmxpYyBXYXlwb2ludDogV2F5cG9pbnQsXHJcbiAgICAgICAgICAgIHB1YmxpYyBEaXN0YW5jZTogbnVtYmVyLFxyXG4gICAgICAgICAgICBjYWxjdWxhdGVyZFdheXBvaW50czogV2F5cG9pbnRbXSkge1xyXG4gICAgICAgICAgICB0aGlzLkxhdExuZyA9IFdheXBvaW50LkxhdExuZztcclxuICAgICAgICAgICAgY2FsY3VsYXRlcmRXYXlwb2ludHMucHVzaChXYXlwb2ludCk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHdwIG9mIFdheXBvaW50LkdldENvbm5lY3RlZFdheXBvaW50cygpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsY3VsYXRlcmRXYXlwb2ludHMuaW5kZXhPZih3cCkgPT09IC0xKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuQ29ubmVjdGVkV2F5UG9pbnRzLnB1c2god3ApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBDb25uZWN0ZWRXYXlQb2ludHMgPSBuZXcgQXJyYXk8V2F5cG9pbnQ+KCk7XHJcbiAgICAgICAgQ29ubmVjdGVkRGlzdGFuY2VzID0gbmV3IEFycmF5PFdheXBvaW50RGlzdGFuY2U+KCk7XHJcbiAgICAgICAgTGF0TG5nOiBMLkxhdExuZztcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmVudW0gTWFya2VyVHlwZSB7XHJcbiAgICBIYXJib3VyLFxyXG4gICAgRHVtbXksXHJcbiAgICBXYXlwb2ludCxcclxuICAgIFdlYXRoZXJTdGF0aW9uXHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9\n\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar ServerApi;\n(function (ServerApi) {\n    (function (HttpMethod) {\n        HttpMethod[HttpMethod[\"POST\"] = 0] = \"POST\";\n        HttpMethod[HttpMethod[\"GET\"] = 1] = \"GET\";\n        HttpMethod[HttpMethod[\"PUT\"] = 2] = \"PUT\";\n        HttpMethod[HttpMethod[\"DELETE\"] = 3] = \"DELETE\";\n    })(ServerApi.HttpMethod || (ServerApi.HttpMethod = {}));\n    var HttpMethod = ServerApi.HttpMethod;\n    var Api = (function () {\n        function Api(baseUrl) {\n            this.baseUrl = baseUrl;\n        }\n        Api.prototype.BuildRequestBody = function (url, method, data) {\n            return {\n                contentType: \"application/json; charset=utf-8\",\n                dataType: \"json\",\n                method: HttpMethod[method],\n                url: this.baseUrl + \"/\" + url,\n                data: JSON.stringify(data)\n            };\n        };\n        Api.prototype.Get = function (id) {\n            if (id === undefined)\n                return this.CreateRequest((this.BuildRequestBody(\"\", HttpMethod.GET)));\n            else\n                return this.CreateRequest((this.BuildRequestBody(id.toString(), HttpMethod.GET)));\n        };\n        Api.prototype.Delete = function (id) {\n            return this.CreateRequest((this.BuildRequestBody(id.toString(), HttpMethod.DELETE)));\n        };\n        Api.prototype.Create = function (entity) {\n            return this.CreateRequest((this.BuildRequestBody(\"\", HttpMethod.POST, entity)));\n        };\n        Api.prototype.Update = function (entity) {\n            return this.CreateRequest(this.BuildRequestBody(entity.Id.toString(), HttpMethod.PUT, entity));\n        };\n        Api.prototype.CreateRequest = function (body) {\n            return $.ajax(body).fail(function (d) {\n                alert(d);\n                console.log(d);\n            });\n        };\n        return Api;\n    }());\n    ServerApi.Api = Api;\n    var ConnectionApi = (function () {\n        function ConnectionApi(baseUrl) {\n            this.baseUrl = baseUrl;\n        }\n        ConnectionApi.prototype.Get = function () {\n            return this.CreateRequest(this.BuildRequestBody(\"\", HttpMethod.GET));\n        };\n        ConnectionApi.prototype.Connect = function (id1, id2) {\n            return this.CreateRequest(this.BuildRequestBody(id1 + \"/\" + id2, HttpMethod.POST));\n        };\n        ConnectionApi.prototype.Disconnect = function (id1, id2) {\n            return this.CreateRequest(this.BuildRequestBody(id1 + \"/\" + id2, HttpMethod.DELETE));\n        };\n        ConnectionApi.prototype.CreateRequest = function (body) {\n            return $.ajax(body).fail(function (d) {\n                alert(d);\n                console.log(d);\n            });\n        };\n        ConnectionApi.prototype.BuildRequestBody = function (url, method, data) {\n            return {\n                contentType: \"application/json; charset=utf-8\",\n                dataType: \"json\",\n                method: HttpMethod[method],\n                url: this.baseUrl + \"/\" + url,\n                data: JSON.stringify(data)\n            };\n        };\n        return ConnectionApi;\n    }());\n    ServerApi.ConnectionApi = ConnectionApi;\n    var HarbourApi = (function (_super) {\n        __extends(HarbourApi, _super);\n        function HarbourApi() {\n            _super.apply(this, arguments);\n        }\n        HarbourApi.GetDefault = function () {\n            if (this.default === undefined)\n                this.default = new HarbourApi(\"/api/Harbours\");\n            return this.default;\n        };\n        return HarbourApi;\n    }(Api));\n    ServerApi.HarbourApi = HarbourApi;\n    var WaypointApi = (function (_super) {\n        __extends(WaypointApi, _super);\n        function WaypointApi() {\n            _super.apply(this, arguments);\n        }\n        WaypointApi.GetDefault = function () {\n            if (this.default === undefined)\n                this.default = new WaypointApi(\"/api/Waypoints\");\n            return this.default;\n        };\n        return WaypointApi;\n    }(Api));\n    ServerApi.WaypointApi = WaypointApi;\n    var WaypointConnectionApi = (function () {\n        function WaypointConnectionApi(baseUrl) {\n            this.baseUrl = baseUrl;\n        }\n        WaypointConnectionApi.GetDefault = function () {\n            if (this.default === undefined)\n                this.default = new WaypointConnectionApi(\"/api/WaypointConnections\");\n            return this.default;\n        };\n        WaypointConnectionApi.prototype.Get = function () {\n            return this.CreateRequest(this.BuildRequestBody(\"\", HttpMethod.GET));\n        };\n        WaypointConnectionApi.prototype.Connect = function (id1, id2) {\n            return this.CreateRequest(this.BuildRequestBody(id1 + \"/\" + id2, HttpMethod.POST));\n        };\n        WaypointConnectionApi.prototype.Disconnect = function (id1, id2) {\n            return this.CreateRequest(this.BuildRequestBody(id1 + \"/\" + id2, HttpMethod.DELETE));\n        };\n        WaypointConnectionApi.prototype.CreateRequest = function (body) {\n            return $.ajax(body).fail(function (d) {\n                alert(d);\n                console.log(d);\n            });\n        };\n        WaypointConnectionApi.prototype.BuildRequestBody = function (url, method, data) {\n            return {\n                contentType: \"application/json; charset=utf-8\",\n                dataType: \"json\",\n                method: HttpMethod[method],\n                url: this.baseUrl + \"/\" + url,\n                data: JSON.stringify(data)\n            };\n        };\n        return WaypointConnectionApi;\n    }());\n    ServerApi.WaypointConnectionApi = WaypointConnectionApi;\n    var PersonApi = (function (_super) {\n        __extends(PersonApi, _super);\n        function PersonApi() {\n            _super.apply(this, arguments);\n        }\n        PersonApi.GetDefault = function () {\n            if (this.default === undefined)\n                this.default = new PersonApi(\"/api/People\");\n            return this.default;\n        };\n        return PersonApi;\n    }(Api));\n    ServerApi.PersonApi = PersonApi;\n    var JobApi = (function (_super) {\n        __extends(JobApi, _super);\n        function JobApi() {\n            _super.apply(this, arguments);\n        }\n        JobApi.GetDefault = function () {\n            if (this.default === undefined)\n                this.default = new JobApi(\"/api/Jobs\");\n            return this.default;\n        };\n        return JobApi;\n    }(Api));\n    ServerApi.JobApi = JobApi;\n    var TripApi = (function (_super) {\n        __extends(TripApi, _super);\n        function TripApi() {\n            _super.apply(this, arguments);\n        }\n        TripApi.GetDefault = function () {\n            if (this.default === undefined)\n                this.default = new TripApi(\"/api/Trips\");\n            return this.default;\n        };\n        return TripApi;\n    }(Api));\n    ServerApi.TripApi = TripApi;\n    var TackApi = (function (_super) {\n        __extends(TackApi, _super);\n        function TackApi() {\n            _super.apply(this, arguments);\n        }\n        TackApi.GetDefault = function () {\n            if (this.default === undefined)\n                this.default = new TackApi(\"/api/Tacks\");\n            return this.default;\n        };\n        return TackApi;\n    }(Api));\n    ServerApi.TackApi = TackApi;\n    var AddressApi = (function (_super) {\n        __extends(AddressApi, _super);\n        function AddressApi() {\n            _super.apply(this, arguments);\n        }\n        AddressApi.GetDefault = function () {\n            if (this.default === undefined)\n                this.default = new AddressApi(\"/api/Addresses\");\n            return this.default;\n        };\n        return AddressApi;\n    }(Api));\n    ServerApi.AddressApi = AddressApi;\n    var ImageApi = (function (_super) {\n        __extends(ImageApi, _super);\n        function ImageApi() {\n            _super.apply(this, arguments);\n        }\n        ImageApi.GetDefault = function () {\n            if (this.default === undefined)\n                this.default = new ImageApi(\"/api/Images\");\n            return this.default;\n        };\n        return ImageApi;\n    }(Api));\n    ServerApi.ImageApi = ImageApi;\n    var AlbumApi = (function (_super) {\n        __extends(AlbumApi, _super);\n        function AlbumApi() {\n            _super.apply(this, arguments);\n        }\n        AlbumApi.GetDefault = function () {\n            if (this.default === undefined)\n                this.default = new AlbumApi(\"/api/Albums\");\n            return this.default;\n        };\n        return AlbumApi;\n    }(Api));\n    ServerApi.AlbumApi = AlbumApi;\n    var LocationApi = (function (_super) {\n        __extends(LocationApi, _super);\n        function LocationApi() {\n            _super.apply(this, arguments);\n        }\n        LocationApi.GetDefault = function () {\n            if (this.default === undefined)\n                this.default = new LocationApi(\"/api/Locations\");\n            return this.default;\n        };\n        return LocationApi;\n    }(Api));\n    ServerApi.LocationApi = LocationApi;\n    var SupermarketApi = (function (_super) {\n        __extends(SupermarketApi, _super);\n        function SupermarketApi() {\n            _super.apply(this, arguments);\n        }\n        SupermarketApi.GetDefault = function () {\n            if (this.default === undefined)\n                this.default = new SupermarketApi(\"/api/Supermarkets\");\n            return this.default;\n        };\n        return SupermarketApi;\n    }(Api));\n    ServerApi.SupermarketApi = SupermarketApi;\n    var RestaurantApi = (function (_super) {\n        __extends(RestaurantApi, _super);\n        function RestaurantApi() {\n            _super.apply(this, arguments);\n        }\n        RestaurantApi.GetDefault = function () {\n            if (this.default === undefined)\n                this.default = new RestaurantApi(\"/api/Restaurants\");\n            return this.default;\n        };\n        return RestaurantApi;\n    }(Api));\n    ServerApi.RestaurantApi = RestaurantApi;\n})(ServerApi || (ServerApi = {}));\n\n//# sourceMappingURL=data:application/json;base64,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WUFDekQsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7UUFDeEIsQ0FBQztRQUVMLG9CQUFDO0lBQUQsQ0FWQSxBQVVDLENBVmtDLEdBQUcsR0FVckM7SUFWWSx1QkFBYSxnQkFVekIsQ0FBQTtBQWNMLENBQUMsRUF0VE0sU0FBUyxLQUFULFNBQVMsUUFzVGYiLCJmaWxlIjoiU2VydmVyQXBpLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlIFNlcnZlckFwaSB7XHJcbiAgICBpbXBvcnQgRW50aXR5ID0gU2VydmVyTW9kZWwuRW50aXR5O1xyXG4gICAgaW1wb3J0IEhhcmJvdXIgPSBTZXJ2ZXJNb2RlbC5IYXJib3VyO1xyXG4gICAgaW1wb3J0IFdheXBvaW50ID0gU2VydmVyTW9kZWwuV2F5cG9pbnQ7XHJcbiAgICBpbXBvcnQgUGVyc29uPVNlcnZlck1vZGVsLlBlcnNvbjtcclxuICAgIGltcG9ydCBKb2I9U2VydmVyTW9kZWwuSm9iO1xyXG4gICAgaW1wb3J0IFRyaXA9U2VydmVyTW9kZWwuVHJpcDtcclxuICAgIGltcG9ydCBXYXlwb2ludENvbm5lY3Rpb249U2VydmVyTW9kZWwuV2F5cG9pbnRDb25uZWN0aW9uO1xyXG4gICAgaW1wb3J0IFRhY2sgPVNlcnZlck1vZGVsLlRhY2s7XHJcbiAgICBpbXBvcnQgQWRkcmVzcyA9IFNlcnZlck1vZGVsLkFkZHJlc3M7XHJcbiAgICBpbXBvcnQgSW1hZ2UgPSBTZXJ2ZXJNb2RlbC5JbWFnZTtcclxuICAgIGltcG9ydCBBbGJ1bSA9IFNlcnZlck1vZGVsLkFsYnVtO1xyXG4gICAgaW1wb3J0IFdheXBvaW50VGFjayA9IFNlcnZlck1vZGVsLldheXBvaW50VGFjaztcclxuICAgIGltcG9ydCBMb2NhdGlvbiA9IFNlcnZlck1vZGVsLkxvY2F0aW9uO1xyXG4gICAgaW1wb3J0IFJlc3RhdXJhbnQgPSBTZXJ2ZXJNb2RlbC5SZXN0YXVyYW50O1xyXG4gICAgaW1wb3J0IFN1cGVybWFya2V0ID0gU2VydmVyTW9kZWwuU3VwZXJtYXJrZXQ7XHJcblxyXG4gICAgZXhwb3J0IGVudW0gSHR0cE1ldGhvZCB7XHJcbiAgICAgICAgUE9TVCxcclxuICAgICAgICBHRVQsXHJcbiAgICAgICAgUFVULFxyXG4gICAgICAgIERFTEVURVxyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBcGk8VCBleHRlbmRzIEVudGl0eT4ge1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBiYXNlVXJsOiBzdHJpbmcpIHtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBCdWlsZFJlcXVlc3RCb2R5KHVybDogc3RyaW5nLCBtZXRob2Q6IEh0dHBNZXRob2QsIGRhdGE/OiBhbnkpOiBKUXVlcnlBamF4U2V0dGluZ3Mge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOFwiLFxyXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiLFxyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBIdHRwTWV0aG9kW21ldGhvZF0sXHJcbiAgICAgICAgICAgICAgICB1cmw6IHRoaXMuYmFzZVVybCArIFwiL1wiICsgdXJsLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEdldCgpOiBKUXVlcnlQcm9taXNlPFRbXT47XHJcbiAgICAgICAgR2V0KGlkOiBudW1iZXIpOiBKUXVlcnlQcm9taXNlPFQ+O1xyXG4gICAgICAgIEdldChpZD86IG51bWJlcik6IGFueSB7XHJcbiAgICAgICAgICAgIGlmIChpZCA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuQ3JlYXRlUmVxdWVzdDxUW10+KCh0aGlzLkJ1aWxkUmVxdWVzdEJvZHkoXCJcIiwgSHR0cE1ldGhvZC5HRVQpKSk7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkNyZWF0ZVJlcXVlc3Q8VD4oKHRoaXMuQnVpbGRSZXF1ZXN0Qm9keShpZC50b1N0cmluZygpLCBIdHRwTWV0aG9kLkdFVCkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIERlbGV0ZShpZDogbnVtYmVyKTogSlF1ZXJ5UHJvbWlzZTxUPiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLkNyZWF0ZVJlcXVlc3Q8VD4oKHRoaXMuQnVpbGRSZXF1ZXN0Qm9keShpZC50b1N0cmluZygpLCBIdHRwTWV0aG9kLkRFTEVURSkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIENyZWF0ZShlbnRpdHk6IFQpOiBKUXVlcnlQcm9taXNlPFQ+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuQ3JlYXRlUmVxdWVzdDxUPigodGhpcy5CdWlsZFJlcXVlc3RCb2R5KFwiXCIsIEh0dHBNZXRob2QuUE9TVCwgZW50aXR5KSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgVXBkYXRlKGVudGl0eTogVCk6IEpRdWVyeVByb21pc2U8VD4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5DcmVhdGVSZXF1ZXN0PFQ+KHRoaXMuQnVpbGRSZXF1ZXN0Qm9keShlbnRpdHkuSWQudG9TdHJpbmcoKSwgSHR0cE1ldGhvZC5QVVQsIGVudGl0eSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIENyZWF0ZVJlcXVlc3Q8VD4oYm9keTogSlF1ZXJ5QWpheFNldHRpbmdzKTogSlF1ZXJ5UHJvbWlzZTxUPiB7XHJcbiAgICAgICAgICAgIHJldHVybiAkLmFqYXgoYm9keSkuZmFpbChkID0+IHtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KGQpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgQ29ubmVjdGlvbkFwaTxUPiB7XHJcblxyXG4gICAgICAgIEdldCgpOiBKUXVlcnlQcm9taXNlPFRbXT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5DcmVhdGVSZXF1ZXN0PFRbXT4odGhpcy5CdWlsZFJlcXVlc3RCb2R5KFwiXCIsIEh0dHBNZXRob2QuR0VUKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBDb25uZWN0KGlkMTogbnVtYmVyLCBpZDI6IG51bWJlcik6IEpRdWVyeVByb21pc2U8VD4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5DcmVhdGVSZXF1ZXN0PFQ+KHRoaXMuQnVpbGRSZXF1ZXN0Qm9keShpZDEgKyBcIi9cIiArIGlkMiwgSHR0cE1ldGhvZC5QT1NUKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBEaXNjb25uZWN0KGlkMTogbnVtYmVyLCBpZDI6IG51bWJlcik6IEpRdWVyeVByb21pc2U8VD4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5DcmVhdGVSZXF1ZXN0PFQ+KHRoaXMuQnVpbGRSZXF1ZXN0Qm9keShpZDEgKyBcIi9cIiArIGlkMiwgSHR0cE1ldGhvZC5ERUxFVEUpKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgQ3JlYXRlUmVxdWVzdDxUPihib2R5OiBKUXVlcnlBamF4U2V0dGluZ3MpOiBKUXVlcnlQcm9taXNlPFQ+IHtcclxuICAgICAgICAgICAgcmV0dXJuICQuYWpheChib2R5KS5mYWlsKGQgPT4ge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoZCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IocHVibGljIGJhc2VVcmw6IHN0cmluZykge1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEJ1aWxkUmVxdWVzdEJvZHkodXJsOiBzdHJpbmcsIG1ldGhvZDogSHR0cE1ldGhvZCwgZGF0YT86IGFueSk6IEpRdWVyeUFqYXhTZXR0aW5ncyB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XCIsXHJcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6IEh0dHBNZXRob2RbbWV0aG9kXSxcclxuICAgICAgICAgICAgICAgIHVybDogdGhpcy5iYXNlVXJsICsgXCIvXCIgKyB1cmwsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShkYXRhKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIEhhcmJvdXJBcGkgZXh0ZW5kcyBBcGk8SGFyYm91cj4ge1xyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBkZWZhdWx0OiBIYXJib3VyQXBpO1xyXG5cclxuICAgICAgICBzdGF0aWMgR2V0RGVmYXVsdCgpOiBIYXJib3VyQXBpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGVmYXVsdCA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWZhdWx0ID0gbmV3IEhhcmJvdXJBcGkoXCIvYXBpL0hhcmJvdXJzXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFdheXBvaW50QXBpIGV4dGVuZHMgQXBpPFdheXBvaW50PiB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGRlZmF1bHQ6IFdheXBvaW50QXBpO1xyXG5cclxuICAgICAgICBzdGF0aWMgR2V0RGVmYXVsdCgpOiBXYXlwb2ludEFwaSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRlZmF1bHQgPT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdCA9IG5ldyBXYXlwb2ludEFwaShcIi9hcGkvV2F5cG9pbnRzXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFdheXBvaW50Q29ubmVjdGlvbkFwaSB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGRlZmF1bHQ6IFdheXBvaW50Q29ubmVjdGlvbkFwaTtcclxuXHJcbiAgICAgICAgc3RhdGljIEdldERlZmF1bHQoKTogV2F5cG9pbnRDb25uZWN0aW9uQXBpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGVmYXVsdCA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWZhdWx0ID0gbmV3IFdheXBvaW50Q29ubmVjdGlvbkFwaShcIi9hcGkvV2F5cG9pbnRDb25uZWN0aW9uc1wiKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEdldCgpOiBKUXVlcnlQcm9taXNlPFdheXBvaW50Q29ubmVjdGlvbltdPiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLkNyZWF0ZVJlcXVlc3Q8V2F5cG9pbnRDb25uZWN0aW9uW10+KHRoaXMuQnVpbGRSZXF1ZXN0Qm9keShcIlwiLCBIdHRwTWV0aG9kLkdFVCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgQ29ubmVjdChpZDE6IG51bWJlciwgaWQyOiBudW1iZXIpOiBKUXVlcnlQcm9taXNlPFdheXBvaW50Q29ubmVjdGlvbj4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5DcmVhdGVSZXF1ZXN0PFdheXBvaW50Q29ubmVjdGlvbj4odGhpcy5CdWlsZFJlcXVlc3RCb2R5KGlkMSArIFwiL1wiICsgaWQyLCBIdHRwTWV0aG9kLlBPU1QpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIERpc2Nvbm5lY3QoaWQxOiBudW1iZXIsIGlkMjogbnVtYmVyKTogSlF1ZXJ5UHJvbWlzZTxXYXlwb2ludENvbm5lY3Rpb24+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuQ3JlYXRlUmVxdWVzdDxXYXlwb2ludENvbm5lY3Rpb24+KHRoaXMuQnVpbGRSZXF1ZXN0Qm9keShpZDEgKyBcIi9cIiArIGlkMiwgSHR0cE1ldGhvZC5ERUxFVEUpKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgQ3JlYXRlUmVxdWVzdDxUPihib2R5OiBKUXVlcnlBamF4U2V0dGluZ3MpOiBKUXVlcnlQcm9taXNlPFQ+IHtcclxuICAgICAgICAgICAgcmV0dXJuICQuYWpheChib2R5KS5mYWlsKGQgPT4ge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoZCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IocHVibGljIGJhc2VVcmw6IHN0cmluZykge1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEJ1aWxkUmVxdWVzdEJvZHkodXJsOiBzdHJpbmcsIG1ldGhvZDogSHR0cE1ldGhvZCwgZGF0YT86IGFueSk6IEpRdWVyeUFqYXhTZXR0aW5ncyB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XCIsXHJcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6IEh0dHBNZXRob2RbbWV0aG9kXSxcclxuICAgICAgICAgICAgICAgIHVybDogdGhpcy5iYXNlVXJsICsgXCIvXCIgKyB1cmwsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShkYXRhKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFBlcnNvbkFwaSBleHRlbmRzIEFwaTxQZXJzb24+IHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZGVmYXVsdDogUGVyc29uQXBpO1xyXG5cclxuICAgICAgICBzdGF0aWMgR2V0RGVmYXVsdCgpOiBQZXJzb25BcGkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kZWZhdWx0ID09PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHQgPSBuZXcgUGVyc29uQXBpKFwiL2FwaS9QZW9wbGVcIik7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgY2xhc3MgSm9iQXBpIGV4dGVuZHMgQXBpPEpvYj4ge1xyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBkZWZhdWx0OiBKb2JBcGk7XHJcblxyXG4gICAgICAgIHN0YXRpYyBHZXREZWZhdWx0KCk6IEpvYkFwaSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRlZmF1bHQgPT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdCA9IG5ldyBKb2JBcGkoXCIvYXBpL0pvYnNcIik7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgY2xhc3MgVHJpcEFwaSBleHRlbmRzIEFwaTxUcmlwPiB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGRlZmF1bHQ6IFRyaXBBcGk7XHJcblxyXG4gICAgICAgIHN0YXRpYyBHZXREZWZhdWx0KCk6IFRyaXBBcGkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kZWZhdWx0ID09PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHQgPSBuZXcgVHJpcEFwaShcIi9hcGkvVHJpcHNcIik7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgY2xhc3MgVGFja0FwaSBleHRlbmRzIEFwaTxUYWNrPiB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGRlZmF1bHQ6IFRhY2tBcGk7XHJcblxyXG4gICAgICAgIHN0YXRpYyBHZXREZWZhdWx0KCk6IFRhY2tBcGkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kZWZhdWx0ID09PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHQgPSBuZXcgVGFja0FwaShcIi9hcGkvVGFja3NcIik7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgY2xhc3MgQWRkcmVzc0FwaSBleHRlbmRzIEFwaTxBZGRyZXNzPiB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGRlZmF1bHQ6IEFkZHJlc3NBcGk7XHJcblxyXG4gICAgICAgIHN0YXRpYyBHZXREZWZhdWx0KCk6IEFkZHJlc3NBcGkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kZWZhdWx0ID09PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHQgPSBuZXcgQWRkcmVzc0FwaShcIi9hcGkvQWRkcmVzc2VzXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIEltYWdlQXBpIGV4dGVuZHMgQXBpPEltYWdlPiB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGRlZmF1bHQ6IEltYWdlQXBpO1xyXG5cclxuICAgICAgICBzdGF0aWMgR2V0RGVmYXVsdCgpOiBJbWFnZUFwaSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRlZmF1bHQgPT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdCA9IG5ldyBJbWFnZUFwaShcIi9hcGkvSW1hZ2VzXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIEFsYnVtQXBpIGV4dGVuZHMgQXBpPEFsYnVtPiB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGRlZmF1bHQ6IEFsYnVtQXBpO1xyXG5cclxuICAgICAgICBzdGF0aWMgR2V0RGVmYXVsdCgpOiBBbGJ1bUFwaSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRlZmF1bHQgPT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdCA9IG5ldyBBbGJ1bUFwaShcIi9hcGkvQWxidW1zXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIExvY2F0aW9uQXBpIGV4dGVuZHMgQXBpPExvY2F0aW9uPiB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGRlZmF1bHQ6IExvY2F0aW9uQXBpO1xyXG5cclxuICAgICAgICBzdGF0aWMgR2V0RGVmYXVsdCgpOiBMb2NhdGlvbkFwaSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRlZmF1bHQgPT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdCA9IG5ldyBMb2NhdGlvbkFwaShcIi9hcGkvTG9jYXRpb25zXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFN1cGVybWFya2V0QXBpIGV4dGVuZHMgQXBpPFN1cGVybWFya2V0PiB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGRlZmF1bHQ6IFN1cGVybWFya2V0QXBpO1xyXG5cclxuICAgICAgICBzdGF0aWMgR2V0RGVmYXVsdCgpOiBTdXBlcm1hcmtldEFwaSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRlZmF1bHQgPT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdCA9IG5ldyBTdXBlcm1hcmtldEFwaShcIi9hcGkvU3VwZXJtYXJrZXRzXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFJlc3RhdXJhbnRBcGkgZXh0ZW5kcyBBcGk8UmVzdGF1cmFudD4ge1xyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBkZWZhdWx0OiBSZXN0YXVyYW50QXBpO1xyXG5cclxuICAgICAgICBzdGF0aWMgR2V0RGVmYXVsdCgpOiBSZXN0YXVyYW50QXBpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGVmYXVsdCA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWZhdWx0ID0gbmV3IFJlc3RhdXJhbnRBcGkoXCIvYXBpL1Jlc3RhdXJhbnRzXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgLy9leHBvcnQgY2xhc3MgV2F5cG9pbnRUYWNrQXBpIGV4dGVuZHMgQXBpPFdheXBvaW50VGFjaz4ge1xyXG5cclxuICAgIC8vICAgIHByaXZhdGUgc3RhdGljIGRlZmF1bHQ6IFdheXBvaW50VGFja0FwaTtcclxuXHJcbiAgICAvLyAgICBzdGF0aWMgR2V0RGVmYXVsdCgpOiBXYXlwb2ludFRhY2tBcGkge1xyXG4gICAgLy8gICAgICAgIGlmICh0aGlzLmRlZmF1bHQgPT09IHVuZGVmaW5lZClcclxuICAgIC8vICAgICAgICAgICAgdGhpcy5kZWZhdWx0ID0gbmV3IFdheXBvaW50VGFja0FwaShcIi9hcGkvV2F5cG9pbnRUYWNrc1wiKTtcclxuICAgIC8vICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0O1xyXG4gICAgLy8gICAgfVxyXG5cclxuICAgIC8vfVxyXG4gICAgXHJcbn0iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=\n\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar ServerModel;\n(function (ServerModel) {\n    var Entity = (function () {\n        function Entity() {\n        }\n        return Entity;\n    }());\n    ServerModel.Entity = Entity;\n    var Waypoint = (function (_super) {\n        __extends(Waypoint, _super);\n        function Waypoint() {\n            _super.apply(this, arguments);\n        }\n        Waypoint.GetType = function () {\n            return \"Waypoint\";\n        };\n        return Waypoint;\n    }(Entity));\n    ServerModel.Waypoint = Waypoint;\n    var WaypointConnection = (function () {\n        function WaypointConnection() {\n        }\n        return WaypointConnection;\n    }());\n    ServerModel.WaypointConnection = WaypointConnection;\n    var Harbour = (function (_super) {\n        __extends(Harbour, _super);\n        function Harbour() {\n            _super.apply(this, arguments);\n        }\n        Harbour.GetType = function () {\n            return \"Harbour\";\n        };\n        return Harbour;\n    }(Waypoint));\n    ServerModel.Harbour = Harbour;\n    var Person = (function (_super) {\n        __extends(Person, _super);\n        function Person() {\n            _super.apply(this, arguments);\n        }\n        return Person;\n    }(Entity));\n    ServerModel.Person = Person;\n    var Job = (function (_super) {\n        __extends(Job, _super);\n        function Job() {\n            _super.apply(this, arguments);\n        }\n        return Job;\n    }(Entity));\n    ServerModel.Job = Job;\n    var Trip = (function (_super) {\n        __extends(Trip, _super);\n        function Trip() {\n            _super.apply(this, arguments);\n        }\n        return Trip;\n    }(Entity));\n    ServerModel.Trip = Trip;\n    var Address = (function (_super) {\n        __extends(Address, _super);\n        function Address() {\n            _super.apply(this, arguments);\n        }\n        return Address;\n    }(Entity));\n    ServerModel.Address = Address;\n    var Image = (function (_super) {\n        __extends(Image, _super);\n        function Image() {\n            _super.apply(this, arguments);\n        }\n        return Image;\n    }(Entity));\n    ServerModel.Image = Image;\n    var Album = (function (_super) {\n        __extends(Album, _super);\n        function Album() {\n            _super.apply(this, arguments);\n        }\n        return Album;\n    }(Entity));\n    ServerModel.Album = Album;\n    var WaypointTack = (function () {\n        function WaypointTack() {\n        }\n        return WaypointTack;\n    }());\n    ServerModel.WaypointTack = WaypointTack;\n    var Tack = (function (_super) {\n        __extends(Tack, _super);\n        function Tack() {\n            _super.apply(this, arguments);\n        }\n        return Tack;\n    }(Entity));\n    ServerModel.Tack = Tack;\n    var Location = (function (_super) {\n        __extends(Location, _super);\n        function Location() {\n            _super.apply(this, arguments);\n        }\n        Location.GetType = function () {\n            return \"Location\";\n        };\n        return Location;\n    }(Entity));\n    ServerModel.Location = Location;\n    var Restaurant = (function (_super) {\n        __extends(Restaurant, _super);\n        function Restaurant() {\n            _super.apply(this, arguments);\n        }\n        Restaurant.GetType = function () {\n            return \"Restaurant\";\n        };\n        return Restaurant;\n    }(Location));\n    ServerModel.Restaurant = Restaurant;\n    var Supermarket = (function (_super) {\n        __extends(Supermarket, _super);\n        function Supermarket() {\n            _super.apply(this, arguments);\n        }\n        Supermarket.GetType = function () {\n            return \"Supermarket\";\n        };\n        return Supermarket;\n    }(Location));\n    ServerModel.Supermarket = Supermarket;\n})(ServerModel || (ServerModel = {}));\n\n//# sourceMappingURL=data:application/json;base64,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QztRQUZLLG1CQUFPLEdBQWQ7WUFDSyxNQUFNLENBQUMsYUFBYSxDQUFDO1FBQzFCLENBQUM7UUFBQSxrQkFBQztJQUFELENBSkwsQUFJTSxDQUoyQixRQUFRLEdBSW5DO0lBSk8sdUJBQVcsY0FJbEIsQ0FBQTtBQUNWLENBQUMsRUExSE0sV0FBVyxLQUFYLFdBQVcsUUEwSGpCIiwiZmlsZSI6IlNlcnZlck1vZGVsLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlIFNlcnZlck1vZGVsIHtcclxuICAgIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBFbnRpdHkge1xyXG5cclxuICAgICAgICBJZDogbnVtYmVyO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgY2xhc3MgV2F5cG9pbnQgZXh0ZW5kcyBFbnRpdHkge1xyXG4gICAgICAgIFdheXBvaW50TnVtYmVyOiBudW1iZXI7XHJcbiAgICAgICAgTmFtZTogc3RyaW5nO1xyXG4gICAgICAgIERlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgICAgICAgTGF0aXR1ZGU6IG51bWJlcjtcclxuICAgICAgICBMb25naXR1ZGU6IG51bWJlcjtcclxuICAgICAgICBUeXBlOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIHN0YXRpYyBHZXRUeXBlKCk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIldheXBvaW50XCI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBXYXlwb2ludENvbm5lY3Rpb24ge1xyXG4gICAgICAgIFdheXBvaW50MUlkOm51bWJlcjtcclxuICAgICAgICBXYXlwb2ludDJJZDpudW1iZXI7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIEhhcmJvdXIgZXh0ZW5kcyBXYXlwb2ludCB7XHJcbiAgICAgICAgTG9jYXRpb25zOiBBcnJheTxMb2NhdGlvbj47XHJcbiAgICAgICAgQWxidW06IEFsYnVtO1xyXG4gICAgICAgIEFsYnVtSWQ6IG51bWJlcjtcclxuICAgICAgICBSYXRpbmc6IG51bWJlcjtcclxuICAgICAgICBDb250ZW50OnN0cmluZztcclxuXHJcbiAgICAgICAgc3RhdGljIEdldFR5cGUoKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiSGFyYm91clwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgY2xhc3MgUGVyc29uIGV4dGVuZHMgRW50aXR5IHtcclxuXHJcbiAgICAgICAgTGFzdE5hbWU6IHN0cmluZztcclxuICAgICAgICBGaXJzdE5hbWU6IHN0cmluZztcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgY2xhc3MgSm9iIGV4dGVuZHMgRW50aXR5IHtcclxuICAgICAgICBEdWVUbzogRGF0ZTtcclxuICAgICAgICBBc3NpZ25lZFRvOiBQZXJzb247XHJcbiAgICAgICAgQXNzaWduZWRUb0lkOm51bWJlcjtcclxuICAgICAgICBUaXRsZTogU3RyaW5nO1xyXG4gICAgICAgIENvbnRlbnQ6IFN0cmluZztcclxuICAgICAgICBEb25lOiBib29sZWFuO1xyXG4gICAgICAgIFN1cGVySm9iOiBKb2I7XHJcbiAgICAgICAgU3VwZXJKb2JJZDpudW1iZXI7XHJcbiAgICAgICAgVHJpcDpUcmlwO1xyXG4gICAgICAgIFRyaXBJZDpudW1iZXI7XHJcbiAgICAgICAgU3ViSm9iczpKb2JbXTtcclxuICAgIH1cclxuICAgIFxyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBUcmlwIGV4dGVuZHMgRW50aXR5IHtcclxuICAgICAgICBOYW1lOiBzdHJpbmc7XHJcbiAgICAgICAgU3RhcnQ6IERhdGU7XHJcbiAgICAgICAgRW5kOiBEYXRlO1xyXG4gICAgICAgIENvbnRlbnQ6IHN0cmluZztcclxuICAgICAgICBUYWNrczogQXJyYXk8VGFjaz47XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIEFkZHJlc3MgZXh0ZW5kcyBFbnRpdHkge1xyXG4gICAgICAgIFN0cmVldDogc3RyaW5nO1xyXG4gICAgICAgIFppcDogc3RyaW5nO1xyXG4gICAgICAgIFRvd246IHN0cmluZztcclxuICAgICAgICBDb21tZW50OiBzdHJpbmc7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIEltYWdlIGV4dGVuZHMgRW50aXR5IHtcclxuICAgICAgICBBbGJ1bUlkOiBudW1iZXI7XHJcbiAgICAgICAgUGF0aDogc3RyaW5nO1xyXG4gICAgICAgIENvbW1lbnQ6IHN0cmluZztcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIEFsYnVtIGV4dGVuZHMgRW50aXR5IHtcclxuICAgICAgICBTdGFuZEFsb25lOiBib29sZWFuO1xyXG4gICAgICAgIENvbW1lbnQ6IHN0cmluZztcclxuICAgICAgICBJbWFnZXM6IEFycmF5PEltYWdlPjtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgY2xhc3MgV2F5cG9pbnRUYWNrIHtcclxuICAgICAgICBXYXlwb2ludElkOiBudW1iZXI7XHJcbiAgICAgICAgSW5kZXg6IG51bWJlcjtcclxuICAgICAgICBUYWNrSWQ6IG51bWJlcjtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgY2xhc3MgVGFjayBleHRlbmRzIEVudGl0eSB7XHJcbiAgICAgICAgU3RhcnQ6IERhdGU7XHJcbiAgICAgICAgRW5kOiBEYXRlO1xyXG4gICAgICAgIFdheXBvaW50czogQXJyYXk8V2F5cG9pbnRUYWNrPjtcclxuICAgICAgICBDcmV3OiBBcnJheTxQZXJzb24+O1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBMb2NhdGlvbiBleHRlbmRzIEVudGl0eSB7XHJcbiAgICAgICAgIEhhcmJvdXJJZDpudW1iZXI7XHJcbiAgICAgICAgV2Vic2l0ZTpzdHJpbmc7XHJcbiAgICAgICAgTmFtZTpzdHJpbmc7XHJcbiAgICAgICAgUmF0aW5nOm51bWJlcjtcclxuICAgICAgICBUeXBlOiBzdHJpbmc7XHJcbiAgICAgICAgQWRkcmVzc0lkOm51bWJlcjtcclxuXHJcbiAgICAgICAgc3RhdGljIEdldFR5cGUoKSB7XHJcbiAgICAgICAgICAgICByZXR1cm4gXCJMb2NhdGlvblwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgY2xhc3MgUmVzdGF1cmFudCBleHRlbmRzIExvY2F0aW9ueyBcclxuXHJcbiAgICAgICAgc3RhdGljIEdldFR5cGUoKSB7XHJcbiAgICAgICAgICAgICByZXR1cm4gXCJSZXN0YXVyYW50XCI7XHJcbiAgICAgICAgfX1cclxuICAgIGV4cG9ydCBjbGFzcyBTdXBlcm1hcmtldCBleHRlbmRzIExvY2F0aW9uIHtcclxuXHJcbiAgICAgICAgc3RhdGljIEdldFR5cGUoKSB7XHJcbiAgICAgICAgICAgICByZXR1cm4gXCJTdXBlcm1hcmtldFwiO1xyXG4gICAgICAgIH19XHJcbn0iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=\n\nvar Waypoint = ClientModel.Waypoint;\nvar Harbour = ClientModel.Harbour;\nvar WaypointDistance = ClientModel.WaypointDistance;\nfunction getMiddle(pol) {\n    var start = pol.getLatLngs()[0];\n    var end = pol.getLatLngs()[1];\n    return new L.LatLng(start.lat + ((end.lat - start.lat) / 2), start.lng + ((end.lng - start.lng) / 2));\n}\nfunction splitPolyline(polyline) {\n    if (polyline.Waypoints.length === 2 && polyline.DummyHandle instanceof Waypoint) {\n        var w1 = polyline.Waypoints[0];\n        var w2 = polyline.DummyHandle;\n        var w3 = polyline.Waypoints[1];\n        w2.RemoveFromPolyline(polyline);\n        polyline.DummyHandle = undefined;\n        w2.AddToPolyline(polyline);\n        w3.RemoveFromPolyline(polyline);\n        addDummyHandle(polyline);\n        addDummyHandle(model.AddPolyline([w2, w3]));\n        return;\n    }\n    throw new Error(\"Cannot split polyline. Polyline has no dummy handle or less or more than 2 waypoints\");\n}\nfunction removePolyline(polyline) {\n    for (var _i = 0, _a = polyline.Waypoints; _i < _a.length; _i++) {\n        var waypoint = _a[_i];\n        waypoint.RemoveFromPolyline(polyline);\n    }\n    if (polyline.DummyHandle !== undefined) {\n        polyline.DummyHandle.RemoveFromPolyline(polyline);\n        polyline.DummyHandle.RemoveFromMap();\n    }\n    model.Map.removeLayer(polyline);\n}\nfunction addDummyHandle(polyline) {\n    if (polyline.DummyHandle === undefined) {\n        polyline.DummyHandle = model.CreateWaypoint(getMiddle(polyline), MarkerType.Dummy);\n        polyline.DummyHandle.AddToPolyline(polyline);\n    }\n}\nfunction redrawPolyline(polyline) {\n    var middleLatLng = getMiddle(polyline);\n    if (polyline.DummyHandle === undefined)\n        addDummyHandle(polyline);\n    if (polyline.DummyHandle.Longitude() !== middleLatLng.lng || polyline.DummyHandle.Latitude() !== middleLatLng.lat)\n        polyline.DummyHandle.SetLatLng(middleLatLng);\n    else\n        polyline.redraw();\n}\nfunction removeFromPolyline(polyline, latLng) {\n    removeFromArray(polyline.getLatLngs(), latLng);\n    polyline.redraw();\n}\nfunction removeFromArray(arr, obj) {\n    var tmpArr = new Array();\n    for (var _i = 0, arr_1 = arr; _i < arr_1.length; _i++) {\n        var item = arr_1[_i];\n        if (item !== obj)\n            tmpArr.push(item);\n    }\n    if (tmpArr.length === arr.length)\n        return false;\n    while (arr.pop()) {\n    }\n    while (tmpArr.length > 0) {\n        arr.push(tmpArr.shift());\n    }\n    return true;\n}\nvar MapMode;\n(function (MapMode) {\n    MapMode[MapMode[\"AdminView\"] = 0] = \"AdminView\";\n    MapMode[MapMode[\"TripPlanning\"] = 1] = \"TripPlanning\";\n    MapMode[MapMode[\"RouteDrawing\"] = 2] = \"RouteDrawing\";\n})(MapMode || (MapMode = {}));\nvar SailingMapViewModel = (function () {\n    function SailingMapViewModel() {\n        var _this = this;\n        this.Harbours = ko.observableArray();\n        this.Waypoints = ko.observableArray();\n        this.WaypointConnections = ko.observableArray();\n        this.SelectedHarbour = ko.observable();\n        this.SelectedWaypoint = ko.observable();\n        this.EditingHarbour = ko.observable();\n        this.EditingWaypoint = ko.observable();\n        this.WaypointMarkers = new Array();\n        this.RemoveHarbour = function () {\n            _this.SelectedWaypoint().RemoveFromMap();\n            _this.Waypoints.remove(_this.SelectedWaypoint());\n        };\n        this.RemoveWaypoint = function () {\n            _this.SelectedHarbour().RemoveFromMap();\n            _this.Harbours.remove(_this.SelectedHarbour());\n            _this.Harbours.remove(_this.SelectedHarbour());\n        };\n        this.CenterWaypoint = function (harbour) {\n            harbour.CenterOnMap();\n        };\n        this.SelectWaypoint = function (waypoint) {\n            _this.SelectedWaypoint(waypoint);\n        };\n        this.SelectHarbour = function (harbour) {\n            _this.SelectedHarbour(harbour);\n        };\n        this.SaveHarbour = function () {\n            _this.CopyHarbour(_this.EditingHarbour(), _this.SelectedHarbour());\n        };\n        this.SaveWaypoint = function () {\n            _this.CopyWaypoint(_this.EditingWaypoint(), _this.SelectedWaypoint());\n        };\n        this.RemovePolyline = function (polyline) {\n            _this.Map.removeLayer(polyline);\n            _this.DrawingPolyline = undefined;\n        };\n        L.mapbox\n            .accessToken =\n            \"pk.eyJ1IjoiZGFuaWVsLWt1b24iLCJhIjoiY2lldnVtY29iMDBiOHQxbTBvZzBqZWl6cCJ9.UEc2YqH59pB1YTpv22vg8A\";\n        this.Map = L.mapbox.map(\"map\", \"mapbox.streets\")\n            .setView([51, 10], 9);\n        this.Map.addEventListener(\"mousemove\", function (e) {\n            if (_this.GetMapMode() === MapMode.RouteDrawing) {\n                _this.DrawingLatLng.lat = e.latlng.lat;\n                _this.DrawingLatLng.lng = e.latlng.lng;\n                _this.DrawingPolyline.redraw();\n            }\n            for (var _i = 0, _a = _this.WaypointMarkers; _i < _a.length; _i++) {\n                var marker = _a[_i];\n                if (marker.Point.distanceTo(e.containerPoint) < 150)\n                    marker.setOpacity(marker.Waypoint.IsDummy() ? 0.5 : 1);\n                else\n                    marker.setOpacity(marker.Waypoint.IsDummy() ? 0.0 : 0.8);\n            }\n        });\n        this.Map.addEventListener(\"click\", function (e) {\n            if (_this.GetMapMode() === MapMode.RouteDrawing) {\n                var waypoint = model.CreateWaypoint(e.latlng, MarkerType.Waypoint);\n                var startId_1 = _this.DrawingPolyline.Waypoints[0].Id();\n                waypoint.SaveToServer()\n                    .done(function (w) {\n                    ServerApi.WaypointConnectionApi.GetDefault()\n                        .Connect(w.Id, startId_1);\n                });\n                waypoint.AddToPolyline(_this.DrawingPolyline);\n                addDummyHandle(_this.DrawingPolyline);\n                removeFromPolyline(_this.DrawingPolyline, _this.DrawingLatLng);\n                _this.DrawingPolyline = _this.AddPolyline(waypoint);\n                _this.DrawingLatLng = new L.LatLng(e.latlng.lat, e.latlng.lng);\n                _this.DrawingPolyline.addLatLng(_this.DrawingLatLng);\n            }\n        });\n        this.Map.addEventListener(\"dblclick\", function (e) {\n            if (_this.GetMapMode() === MapMode.RouteDrawing) {\n                e.originalEvent.cancelBubble = true;\n                e.originalEvent.preventDefault();\n                e.originalEvent.stopPropagation();\n                _this.DrawingPolyline.addLatLng(e.latlng);\n                _this.DrawingLatLng = e.latlng;\n            }\n        });\n        $(document)\n            .keyup(function (e) {\n            if (_this.GetMapMode() === MapMode.RouteDrawing) {\n                if (e.keyCode === 27) {\n                    _this.RemovePolyline(_this.DrawingPolyline);\n                }\n            }\n        });\n        this.Map.addEventListener(\"move\", function (e) {\n            for (var _i = 0, _a = _this.WaypointMarkers; _i < _a.length; _i++) {\n                var marker = _a[_i];\n                marker.Point = _this.Map.latLngToContainerPoint(marker.getLatLng());\n            }\n        });\n        this.Map.addEventListener(\"zoom\", function (e) {\n            for (var _i = 0, _a = _this.WaypointMarkers; _i < _a.length; _i++) {\n                var marker = _a[_i];\n                marker.Point = _this.Map.latLngToContainerPoint(marker.getLatLng());\n            }\n        });\n    }\n    SailingMapViewModel.prototype.AddHarbour = function () {\n        var harbour = this.CreateHarbour(\"Hafen \" + this.Harbours.length, this.Map.getCenter());\n        this.Harbours.push(harbour);\n        harbour.SaveToServer();\n    };\n    SailingMapViewModel.prototype.CopyHarbour = function (h1, h2) {\n        this.CopyWaypoint(h1, h2);\n    };\n    SailingMapViewModel.prototype.CopyWaypoint = function (w1, w2) {\n        w2.WaypointNumber(w1.WaypointNumber());\n        w2.Latitude(w1.Latitude());\n        w2.Longitude(w1.Longitude());\n        w2.Name(w1.Name());\n        w2.Description(w1.Description());\n    };\n    SailingMapViewModel.prototype.AddPolyline = function (arg) {\n        var polyline = new L.Polyline([]);\n        polyline.addTo(this.Map);\n        polyline.Waypoints = new Array();\n        if (arg !== undefined)\n            if (arg instanceof Waypoint)\n                arg.AddToPolyline(polyline);\n            else\n                for (var _i = 0, _a = arg; _i < _a.length; _i++) {\n                    var waypoint = _a[_i];\n                    waypoint.AddToPolyline(polyline);\n                }\n        return polyline;\n    };\n    SailingMapViewModel.prototype.GetMapMode = function () {\n        if (this.DrawingPolyline !== undefined && this.DrawingLatLng !== undefined)\n            return MapMode.RouteDrawing;\n        return MapMode.AdminView;\n    };\n    SailingMapViewModel.prototype.GetWayPointById = function (id) {\n        for (var _i = 0, _a = this.Waypoints(); _i < _a.length; _i++) {\n            var waypoint = _a[_i];\n            if (waypoint.Id() === id)\n                return waypoint;\n        }\n        for (var _b = 0, _c = this.Harbours(); _b < _c.length; _b++) {\n            var waypoint = _c[_b];\n            if (waypoint.Id() === id)\n                return waypoint;\n        }\n        throw \"No Waypoint with id \" + id + \" in model\";\n    };\n    SailingMapViewModel.prototype.CalculateDistances = function (start) {\n        var waypoints = [start];\n        var calculating = new Array();\n        var calculated = new Array();\n        calculating.push(new WaypointDistance(null, start, 0, waypoints));\n        //for (let waypoint of model.Waypoints()) {\n        //    waypoints.push(new WaypointDistance(null, waypoint, Number.POSITIVE_INFINITY));\n        //}\n        //for (let harbour of model.Harbours()) {\n        //    if (harbour !== start) {\n        //        waypoints.push(new WaypointDistance(null, harbour, Number.POSITIVE_INFINITY));\n        //    }\n        //}\n        while (calculating.length > 0) {\n            var minimalDist = Number.POSITIVE_INFINITY;\n            var minimalWP = void 0;\n            for (var _i = 0, calculating_1 = calculating; _i < calculating_1.length; _i++) {\n                var wp = calculating_1[_i];\n                if (wp.ConnectedWayPoints.length === 0) {\n                    removeFromArray(calculating, wp);\n                    calculated.push(wp);\n                }\n                else {\n                    var dist = wp.Distance + wp.ConnectedWayPoints[0].LatLng.distanceTo(wp.LatLng);\n                    if (dist < minimalDist) {\n                        minimalDist = dist;\n                        minimalWP = wp;\n                    }\n                }\n            }\n            if (minimalWP !== undefined)\n                calculating.push(new WaypointDistance(minimalWP.Waypoint, minimalWP.ConnectedWayPoints.shift(), minimalDist, waypoints));\n        }\n        for (var _a = 0, calculated_1 = calculated; _a < calculated_1.length; _a++) {\n            var wp = calculated_1[_a];\n            wp.Waypoint.Distance(wp.Distance);\n        }\n        for (var _b = 0, _c = model.Harbours(); _b < _c.length; _b++) {\n            var h = _c[_b];\n            h.Popup(Math.round(h.Distance()).toString());\n        }\n    };\n    SailingMapViewModel.prototype.CreateWaypoint = function (latLng, markerType) {\n        var wp = new Waypoint(latLng, markerType, model.Map);\n        this.InitializeWaypoint(wp, markerType);\n        return wp;\n    };\n    SailingMapViewModel.prototype.InitializeWaypoint = function (wp, markerType) {\n        if (markerType === MarkerType.Waypoint || markerType === MarkerType.Dummy) {\n            this.WaypointMarkers.push(wp.marker);\n            wp.marker.Point = model.Map.latLngToContainerPoint(wp.LatLng);\n        }\n        wp.marker.addEventListener(\"click\", function (e) {\n            if (markerType === MarkerType.Dummy) {\n                model.Waypoints.push(wp);\n                wp.convertFromDummyHandle();\n            }\n            if (model.GetMapMode() === MapMode.RouteDrawing) {\n                if (!wp.IsInPolyline(model.DrawingPolyline)) {\n                    ServerApi.WaypointConnectionApi.GetDefault()\n                        .Connect(wp.Id(), model.DrawingPolyline.Waypoints[0].Id());\n                    wp.AddToPolyline(model.DrawingPolyline);\n                    removeFromPolyline(model.DrawingPolyline, model.DrawingLatLng);\n                    addDummyHandle(model.DrawingPolyline);\n                    model.DrawingPolyline = undefined;\n                    model.DrawingLatLng = undefined;\n                }\n                else {\n                    removePolyline(model.DrawingPolyline);\n                    model.DrawingPolyline = undefined;\n                    model.DrawingLatLng = undefined;\n                }\n            }\n        });\n        wp.marker.addEventListener(\"dblclick\", function (e) {\n            model.DrawingPolyline = model.AddPolyline(wp);\n            model.DrawingLatLng = new L.LatLng(e.latlng.lat, e.latlng.lng);\n            model.DrawingPolyline.addLatLng(model.DrawingLatLng);\n        });\n        if (markerType === MarkerType.Dummy)\n            wp.marker.addOneTimeEventListener(\"drag\", function (e) {\n                wp.convertFromDummyHandle();\n                model.Waypoints.push(wp);\n            });\n        else if (markerType === MarkerType.Waypoint) {\n            wp.Name(\"Wegpunkt \" + (model.Waypoints().length + 1));\n        }\n        wp.marker.addEventListener(\"dragend\", function (e) {\n            wp.SaveToServer();\n        });\n    };\n    SailingMapViewModel.prototype.CreateHarbour = function (name, latLng) {\n        var h = new Harbour(name, latLng, this.Map);\n        this.InitializeWaypoint(h, MarkerType.Harbour);\n        return h;\n    };\n    return SailingMapViewModel;\n}());\nvar harboursLoaded = false;\nvar waypointsLoaded = false;\nvar personsLoaded = false;\nvar model;\nvar harbourApi = new ServerApi.HarbourApi(\"/api/Harbours\");\nvar waypointApi = new ServerApi.WaypointApi(\"/api/Waypoints\");\nvar personApi = new ServerApi.PersonApi(\"/api/People\");\nvar waypointConnectionApi = new ServerApi.WaypointConnectionApi(\"/api/WaypointConnections\");\nmodel = new SailingMapViewModel();\nko.applyBindings(model);\n$(\"#harbourData\")\n    .on(\"mouseenter\", \"tr\", function () {\n    model.CalculateDistances(ko.contextFor(this).$data);\n});\n$(\"#navPoints\")\n    .on(\"mouseenter\", \"tr\", function () {\n    ko.contextFor(this).$data.Show(true);\n});\n$(\"#navPoints\")\n    .on(\"mouseleave\", \"tr\", function () {\n    ko.contextFor(this).$data.Hide();\n});\nvar waypointsInitialized = false;\nvar waypointConnectionsInitialized = false;\nwaypointApi.Get()\n    .done(function (data) {\n    for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {\n        var waypoint = data_1[_i];\n        if (waypoint.Type === ServerModel.Waypoint.GetType())\n            model.Waypoints.push(model.CreateWaypoint(L.latLng(waypoint.Latitude, waypoint.Longitude), MarkerType.Waypoint)\n                .LoadFromServerEntity(waypoint));\n        else if (waypoint.Type === ServerModel.Harbour.GetType())\n            model.Harbours.push(model.CreateHarbour(waypoint.Name, L.latLng(waypoint.Latitude, waypoint.Longitude))\n                .LoadFromServerEntity(waypoint));\n    }\n    waypointsInitialized = true;\n    LoadWaypointConnections();\n});\nwaypointConnectionApi.Get()\n    .done(function (data) {\n    for (var _i = 0, data_2 = data; _i < data_2.length; _i++) {\n        var connection = data_2[_i];\n        model.WaypointConnections.push(connection);\n    }\n    waypointConnectionsInitialized = true;\n    LoadWaypointConnections();\n});\nfunction LoadWaypointConnections() {\n    if (waypointsInitialized && waypointConnectionsInitialized) {\n        for (var _i = 0, _a = model.WaypointConnections(); _i < _a.length; _i++) {\n            var connection = _a[_i];\n            addDummyHandle(model.AddPolyline([\n                model.GetWayPointById(connection.Waypoint1Id), model.GetWayPointById(connection.Waypoint2Id)\n            ]));\n        }\n    }\n}\nvar MapHelper = (function () {\n    function MapHelper() {\n    }\n    return MapHelper;\n}());\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlZpZXdNb2RlbHMvQWRtaW4vTWFwLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQU8sUUFBUSxHQUFHLFdBQVcsQ0FBQyxRQUFRLENBQUM7QUFDdkMsSUFBTyxPQUFPLEdBQUcsV0FBVyxDQUFDLE9BQU8sQ0FBQztBQUNyQyxJQUFPLGdCQUFnQixHQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQztBQUVyRCxtQkFBbUIsR0FBZTtJQUM5QixJQUFNLEtBQUssR0FBRyxHQUFHLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDbEMsSUFBTSxHQUFHLEdBQUcsR0FBRyxDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2hDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMxRyxDQUFDO0FBRUQsdUJBQXVCLFFBQW9CO0lBQ3ZDLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsTUFBTSxLQUFLLENBQUMsSUFBSSxRQUFRLENBQUMsV0FBVyxZQUFZLFFBQVEsQ0FBQyxDQUFDLENBQUM7UUFDOUUsSUFBTSxFQUFFLEdBQUcsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqQyxJQUFNLEVBQUUsR0FBRyxRQUFRLENBQUMsV0FBVyxDQUFDO1FBQ2hDLElBQU0sRUFBRSxHQUFHLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDakMsRUFBRSxDQUFDLGtCQUFrQixDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ2hDLFFB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QkFBbUIsRUFBRSxFQUEzQixjQUEyQixFQUEzQixJQUEyQixDQUFDO1lBQTlDLElBQUksVUFBVSxTQUFBO1lBQ2YsY0FBYyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUM7Z0JBQzdCLEtBQUssQ0FBQyxlQUFlLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxFQUFFLEtBQUssQ0FBQyxlQUFlLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQzthQUMvRixDQUFDLENBQUMsQ0FBQztTQUNQO0lBQ0wsQ0FBQztBQUNMLENBQUM7QUFFRDtJQUFBO0lBRUEsQ0FBQztJQUFELGdCQUFDO0FBQUQsQ0FGQSxBQUVDLElBQUEiLCJmaWxlIjoiVmlld01vZGVscy9BZG1pbi9NYXAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgV2F5cG9pbnQgPSBDbGllbnRNb2RlbC5XYXlwb2ludDtcclxuaW1wb3J0IEhhcmJvdXIgPSBDbGllbnRNb2RlbC5IYXJib3VyO1xyXG5pbXBvcnQgV2F5cG9pbnREaXN0YW5jZT1DbGllbnRNb2RlbC5XYXlwb2ludERpc3RhbmNlO1xyXG5cclxuZnVuY3Rpb24gZ2V0TWlkZGxlKHBvbDogTC5Qb2x5bGluZSk6IEwuTGF0TG5nIHtcclxuICAgIGNvbnN0IHN0YXJ0ID0gcG9sLmdldExhdExuZ3MoKVswXTtcclxuICAgIGNvbnN0IGVuZCA9IHBvbC5nZXRMYXRMbmdzKClbMV07XHJcbiAgICByZXR1cm4gbmV3IEwuTGF0TG5nKHN0YXJ0LmxhdCArICgoZW5kLmxhdCAtIHN0YXJ0LmxhdCkgLyAyKSwgc3RhcnQubG5nICsgKChlbmQubG5nIC0gc3RhcnQubG5nKSAvIDIpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc3BsaXRQb2x5bGluZShwb2x5bGluZTogTC5Qb2x5bGluZSkge1xyXG4gICAgaWYgKHBvbHlsaW5lLldheXBvaW50cy5sZW5ndGggPT09IDIgJiYgcG9seWxpbmUuRHVtbXlIYW5kbGUgaW5zdGFuY2VvZiBXYXlwb2ludCkge1xyXG4gICAgICAgIGNvbnN0IHcxID0gcG9seWxpbmUuV2F5cG9pbnRzWzBdO1xyXG4gICAgICAgIGNvbnN0IHcyID0gcG9seWxpbmUuRHVtbXlIYW5kbGU7XHJcbiAgICAgICAgY29uc3QgdzMgPSBwb2x5bGluZS5XYXlwb2ludHNbMV07XHJcbiAgICAgICAgdzIuUmVtb3ZlRnJvbVBvbHlsaW5lKHBvbHlsaW5lKTtcclxuICAgICAgICBwb2x5bGluZS5EdW1teUhhbmRsZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICB3Mi5BZGRUb1BvbHlsaW5lKHBvbHlsaW5lKTtcclxuICAgICAgICB3My5SZW1vdmVGcm9tUG9seWxpbmUocG9seWxpbmUpO1xyXG4gICAgICAgIGFkZER1bW15SGFuZGxlKHBvbHlsaW5lKTtcclxuICAgICAgICBhZGREdW1teUhhbmRsZShtb2RlbC5BZGRQb2x5bGluZShbdzIsIHczXSkpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBzcGxpdCBwb2x5bGluZS4gUG9seWxpbmUgaGFzIG5vIGR1bW15IGhhbmRsZSBvciBsZXNzIG9yIG1vcmUgdGhhbiAyIHdheXBvaW50c1wiKTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZVBvbHlsaW5lKHBvbHlsaW5lOiBMLlBvbHlsaW5lKSB7XHJcbiAgICBmb3IgKGxldCB3YXlwb2ludCBvZiBwb2x5bGluZS5XYXlwb2ludHMpIHtcclxuICAgICAgICB3YXlwb2ludC5SZW1vdmVGcm9tUG9seWxpbmUocG9seWxpbmUpO1xyXG4gICAgfVxyXG4gICAgaWYgKHBvbHlsaW5lLkR1bW15SGFuZGxlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBwb2x5bGluZS5EdW1teUhhbmRsZS5SZW1vdmVGcm9tUG9seWxpbmUocG9seWxpbmUpO1xyXG4gICAgICAgIHBvbHlsaW5lLkR1bW15SGFuZGxlLlJlbW92ZUZyb21NYXAoKTtcclxuICAgIH1cclxuICAgIG1vZGVsLk1hcC5yZW1vdmVMYXllcihwb2x5bGluZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZER1bW15SGFuZGxlKHBvbHlsaW5lOiBMLlBvbHlsaW5lKSB7XHJcbiAgICBpZiAocG9seWxpbmUuRHVtbXlIYW5kbGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHBvbHlsaW5lLkR1bW15SGFuZGxlID0gbW9kZWwuQ3JlYXRlV2F5cG9pbnQoZ2V0TWlkZGxlKHBvbHlsaW5lKSwgTWFya2VyVHlwZS5EdW1teSk7XHJcbiAgICAgICAgcG9seWxpbmUuRHVtbXlIYW5kbGUuQWRkVG9Qb2x5bGluZShwb2x5bGluZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlZHJhd1BvbHlsaW5lKHBvbHlsaW5lOiBMLlBvbHlsaW5lKSB7XHJcbiAgICBjb25zdCBtaWRkbGVMYXRMbmcgPSBnZXRNaWRkbGUocG9seWxpbmUpO1xyXG4gICAgaWYgKHBvbHlsaW5lLkR1bW15SGFuZGxlID09PSB1bmRlZmluZWQpXHJcbiAgICAgICAgYWRkRHVtbXlIYW5kbGUocG9seWxpbmUpO1xyXG4gICAgaWYgKHBvbHlsaW5lLkR1bW15SGFuZGxlLkxvbmdpdHVkZSgpICE9PSBtaWRkbGVMYXRMbmcubG5nIHx8IHBvbHlsaW5lLkR1bW15SGFuZGxlLkxhdGl0dWRlKCkgIT09IG1pZGRsZUxhdExuZy5sYXQpXHJcbiAgICAgICAgcG9seWxpbmUuRHVtbXlIYW5kbGUuU2V0TGF0TG5nKG1pZGRsZUxhdExuZyk7XHJcbiAgICBlbHNlXHJcbiAgICAgICAgcG9seWxpbmUucmVkcmF3KCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZUZyb21Qb2x5bGluZShwb2x5bGluZTogTC5Qb2x5bGluZSwgbGF0TG5nOiBMLkxhdExuZykge1xyXG4gICAgcmVtb3ZlRnJvbUFycmF5KHBvbHlsaW5lLmdldExhdExuZ3MoKSwgbGF0TG5nKTtcclxuICAgIHBvbHlsaW5lLnJlZHJhdygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmVGcm9tQXJyYXk8VD4oYXJyOiBUW10sIG9iajogVCk6IGJvb2xlYW4ge1xyXG4gICAgY29uc3QgdG1wQXJyID0gbmV3IEFycmF5PFQ+KCk7XHJcbiAgICBmb3IgKGxldCBpdGVtIG9mIGFycikge1xyXG4gICAgICAgIGlmIChpdGVtICE9PSBvYmopXHJcbiAgICAgICAgICAgIHRtcEFyci5wdXNoKGl0ZW0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHRtcEFyci5sZW5ndGggPT09IGFyci5sZW5ndGgpXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgd2hpbGUgKGFyci5wb3AoKSkge1xyXG4gICAgfVxyXG4gICAgd2hpbGUgKHRtcEFyci5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgYXJyLnB1c2godG1wQXJyLnNoaWZ0KCkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbmVudW0gTWFwTW9kZSB7XHJcbiAgICBBZG1pblZpZXcsXHJcbiAgICBUcmlwUGxhbm5pbmcsXHJcbiAgICBSb3V0ZURyYXdpbmdcclxufVxyXG5cclxuZGVjbGFyZSBuYW1lc3BhY2UgTCB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIFBvbHlsaW5lIGV4dGVuZHMgUGF0aCB7XHJcblxyXG4gICAgICAgIFdheXBvaW50czogQXJyYXk8V2F5cG9pbnQ+O1xyXG4gICAgICAgIER1bW15SGFuZGxlOiBXYXlwb2ludDtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIExhdExuZyB7XHJcbiAgICAgICAgUG9seWxpbmVzOiBQb2x5bGluZVtdO1xyXG4gICAgICAgIFdheXBvaW50OiBXYXlwb2ludDtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIE1hcmtlciB7XHJcbiAgICAgICAgV2F5cG9pbnQ6IFdheXBvaW50O1xyXG4gICAgICAgIFBvaW50OiBMLlBvaW50O1xyXG4gICAgICAgIF9pY29uO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgQ2lyY2xlTWFya2VyIHtcclxuICAgICAgICBXYXlwb2ludDogV2F5cG9pbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBQYXRoT3B0aW9ucyB7XHJcbiAgICAgICAgRHJhZ2dhYmxlOiBib29sZWFuO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBTYWlsaW5nTWFwVmlld01vZGVsIHtcclxuICAgIERyYXdpbmdQb2x5bGluZTogTC5Qb2x5bGluZTtcclxuICAgIE1hcDogTC5NYXA7XHJcblxyXG4gICAgSGFyYm91cnMgPSBrby5vYnNlcnZhYmxlQXJyYXk8SGFyYm91cj4oKTtcclxuICAgIFdheXBvaW50cyA9IGtvLm9ic2VydmFibGVBcnJheTxXYXlwb2ludD4oKTtcclxuICAgIFdheXBvaW50Q29ubmVjdGlvbnM9a28ub2JzZXJ2YWJsZUFycmF5PFNlcnZlck1vZGVsLldheXBvaW50Q29ubmVjdGlvbj4oKTtcclxuICAgIFNlbGVjdGVkSGFyYm91ciA9IGtvLm9ic2VydmFibGU8SGFyYm91cj4oKTtcclxuICAgIFNlbGVjdGVkV2F5cG9pbnQgPSBrby5vYnNlcnZhYmxlPFdheXBvaW50PigpO1xyXG5cclxuICAgIEVkaXRpbmdIYXJib3VyID0ga28ub2JzZXJ2YWJsZTxIYXJib3VyPigpO1xyXG4gICAgRWRpdGluZ1dheXBvaW50ID0ga28ub2JzZXJ2YWJsZTxXYXlwb2ludD4oKTtcclxuICAgIFdheXBvaW50TWFya2VycyA9IG5ldyBBcnJheSgpO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIEwubWFwYm94XHJcbiAgICAgICAgICAgIC5hY2Nlc3NUb2tlbiA9XHJcbiAgICAgICAgICAgIFwicGsuZXlKMUlqb2laR0Z1YVdWc0xXdDFiMjRpTENKaElqb2lZMmxsZG5WdFkyOWlNREJpT0hReGJUQnZaekJxWldsNmNDSjkuVUVjMllxSDU5cEIxWVRwdjIydmc4QVwiO1xyXG4gICAgICAgIHRoaXMuTWFwID0gTC5tYXBib3gubWFwKFwibWFwXCIsIFwibWFwYm94LnN0cmVldHNcIilcclxuICAgICAgICAgICAgLnNldFZpZXcoWzUxLCAxMF0sIDkpO1xyXG4gICAgICAgIHRoaXMuTWFwLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIixcclxuICAgICAgICAoZTogTC5MZWFmbGV0TW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5HZXRNYXBNb2RlKCkgPT09IE1hcE1vZGUuUm91dGVEcmF3aW5nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRyYXdpbmdMYXRMbmcubGF0ID0gZS5sYXRsbmcubGF0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5EcmF3aW5nTGF0TG5nLmxuZyA9IGUubGF0bG5nLmxuZztcclxuICAgICAgICAgICAgICAgIHRoaXMuRHJhd2luZ1BvbHlsaW5lLnJlZHJhdygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAobGV0IG1hcmtlciBvZiB0aGlzLldheXBvaW50TWFya2Vycykge1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hcmtlci5Qb2ludC5kaXN0YW5jZVRvKGUuY29udGFpbmVyUG9pbnQpIDwgMTUwKVxyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlci5zZXRPcGFjaXR5KG1hcmtlci5XYXlwb2ludC5Jc0R1bW15KCkgPyAwLjUgOiAxKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXIuc2V0T3BhY2l0eShtYXJrZXIuV2F5cG9pbnQuSXNEdW1teSgpID8gMC4wIDogMC44KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuTWFwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLFxyXG4gICAgICAgIChlOiBMLkxlYWZsZXRNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLkdldE1hcE1vZGUoKSA9PT0gTWFwTW9kZS5Sb3V0ZURyYXdpbmcpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHdheXBvaW50ID0gbW9kZWwuQ3JlYXRlV2F5cG9pbnQoZS5sYXRsbmcsIE1hcmtlclR5cGUuV2F5cG9pbnQpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRJZCA9IHRoaXMuRHJhd2luZ1BvbHlsaW5lLldheXBvaW50c1swXS5JZCgpO1xyXG4gICAgICAgICAgICAgICAgd2F5cG9pbnQuU2F2ZVRvU2VydmVyKClcclxuICAgICAgICAgICAgICAgICAgICAuZG9uZSh3ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU2VydmVyQXBpLldheXBvaW50Q29ubmVjdGlvbkFwaS5HZXREZWZhdWx0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5Db25uZWN0KHcuSWQsIHN0YXJ0SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgd2F5cG9pbnQuQWRkVG9Qb2x5bGluZSh0aGlzLkRyYXdpbmdQb2x5bGluZSk7XHJcbiAgICAgICAgICAgICAgICBhZGREdW1teUhhbmRsZSh0aGlzLkRyYXdpbmdQb2x5bGluZSk7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVGcm9tUG9seWxpbmUodGhpcy5EcmF3aW5nUG9seWxpbmUsIHRoaXMuRHJhd2luZ0xhdExuZyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRyYXdpbmdQb2x5bGluZSA9IHRoaXMuQWRkUG9seWxpbmUod2F5cG9pbnQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5EcmF3aW5nTGF0TG5nID0gbmV3IEwuTGF0TG5nKGUubGF0bG5nLmxhdCwgZS5sYXRsbmcubG5nKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuRHJhd2luZ1BvbHlsaW5lLmFkZExhdExuZyh0aGlzLkRyYXdpbmdMYXRMbmcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuTWFwLmFkZEV2ZW50TGlzdGVuZXIoXCJkYmxjbGlja1wiLFxyXG4gICAgICAgIChlOiBMLkxlYWZsZXRNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLkdldE1hcE1vZGUoKSA9PT0gTWFwTW9kZS5Sb3V0ZURyYXdpbmcpIHtcclxuICAgICAgICAgICAgICAgIGUub3JpZ2luYWxFdmVudC5jYW5jZWxCdWJibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZS5vcmlnaW5hbEV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBlLm9yaWdpbmFsRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRyYXdpbmdQb2x5bGluZS5hZGRMYXRMbmcoZS5sYXRsbmcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5EcmF3aW5nTGF0TG5nID0gZS5sYXRsbmc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKGRvY3VtZW50KVxyXG4gICAgICAgICAgICAua2V5dXAoKGU6IEpRdWVyeUtleUV2ZW50T2JqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5HZXRNYXBNb2RlKCkgPT09IE1hcE1vZGUuUm91dGVEcmF3aW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMjcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5SZW1vdmVQb2x5bGluZSh0aGlzLkRyYXdpbmdQb2x5bGluZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLk1hcC5hZGRFdmVudExpc3RlbmVyKFwibW92ZVwiLFxyXG4gICAgICAgIChlOiBMLkxlYWZsZXRNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IG1hcmtlciBvZiB0aGlzLldheXBvaW50TWFya2Vycykge1xyXG4gICAgICAgICAgICAgICAgbWFya2VyLlBvaW50ID0gdGhpcy5NYXAubGF0TG5nVG9Db250YWluZXJQb2ludChtYXJrZXIuZ2V0TGF0TG5nKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5NYXAuYWRkRXZlbnRMaXN0ZW5lcihcInpvb21cIixcclxuICAgICAgICAoZTogTC5MZWFmbGV0TW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBtYXJrZXIgb2YgdGhpcy5XYXlwb2ludE1hcmtlcnMpIHtcclxuICAgICAgICAgICAgICAgIG1hcmtlci5Qb2ludCA9IHRoaXMuTWFwLmxhdExuZ1RvQ29udGFpbmVyUG9pbnQobWFya2VyLmdldExhdExuZygpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBBZGRIYXJib3VyKCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGhhcmJvdXIgPSB0aGlzLkNyZWF0ZUhhcmJvdXIoYEhhZmVuICR7dGhpcy5IYXJib3Vycy5sZW5ndGh9YCwgdGhpcy5NYXAuZ2V0Q2VudGVyKCkpO1xyXG4gICAgICAgIHRoaXMuSGFyYm91cnMucHVzaChoYXJib3VyKTtcclxuICAgICAgICBoYXJib3VyLlNhdmVUb1NlcnZlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIFJlbW92ZUhhcmJvdXIgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5TZWxlY3RlZFdheXBvaW50KCkuUmVtb3ZlRnJvbU1hcCgpO1xyXG4gICAgICAgIHRoaXMuV2F5cG9pbnRzLnJlbW92ZSh0aGlzLlNlbGVjdGVkV2F5cG9pbnQoKSk7XHJcbiAgICB9O1xyXG4gICAgUmVtb3ZlV2F5cG9pbnQgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5TZWxlY3RlZEhhcmJvdXIoKS5SZW1vdmVGcm9tTWFwKCk7XHJcbiAgICAgICAgdGhpcy5IYXJib3Vycy5yZW1vdmUodGhpcy5TZWxlY3RlZEhhcmJvdXIoKSk7XHJcbiAgICAgICAgdGhpcy5IYXJib3Vycy5yZW1vdmUodGhpcy5TZWxlY3RlZEhhcmJvdXIoKSk7XHJcbiAgICB9O1xyXG4gICAgQ2VudGVyV2F5cG9pbnQgPSAoaGFyYm91cjogSGFyYm91cikgPT4ge1xyXG4gICAgICAgIGhhcmJvdXIuQ2VudGVyT25NYXAoKTtcclxuICAgIH07XHJcbiAgICBTZWxlY3RXYXlwb2ludCA9ICh3YXlwb2ludDogV2F5cG9pbnQpID0+IHtcclxuICAgICAgICB0aGlzLlNlbGVjdGVkV2F5cG9pbnQod2F5cG9pbnQpO1xyXG4gICAgfTtcclxuICAgIFNlbGVjdEhhcmJvdXIgPSAoaGFyYm91cjogSGFyYm91cikgPT4ge1xyXG4gICAgICAgIHRoaXMuU2VsZWN0ZWRIYXJib3VyKGhhcmJvdXIpO1xyXG4gICAgfTtcclxuXHJcbiAgICBTYXZlSGFyYm91ciA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLkNvcHlIYXJib3VyKHRoaXMuRWRpdGluZ0hhcmJvdXIoKSwgdGhpcy5TZWxlY3RlZEhhcmJvdXIoKSk7XHJcbiAgICB9O1xyXG4gICAgU2F2ZVdheXBvaW50ID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuQ29weVdheXBvaW50KHRoaXMuRWRpdGluZ1dheXBvaW50KCksIHRoaXMuU2VsZWN0ZWRXYXlwb2ludCgpKTtcclxuICAgIH07XHJcblxyXG4gICAgQ29weUhhcmJvdXIoaDE6IEhhcmJvdXIsIGgyOiBIYXJib3VyKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5Db3B5V2F5cG9pbnQoaDEsIGgyKTtcclxuICAgIH1cclxuXHJcbiAgICBDb3B5V2F5cG9pbnQodzE6IFdheXBvaW50LCB3MjogV2F5cG9pbnQpIHtcclxuICAgICAgICB3Mi5XYXlwb2ludE51bWJlcih3MS5XYXlwb2ludE51bWJlcigpKTtcclxuICAgICAgICB3Mi5MYXRpdHVkZSh3MS5MYXRpdHVkZSgpKTtcclxuICAgICAgICB3Mi5Mb25naXR1ZGUodzEuTG9uZ2l0dWRlKCkpO1xyXG4gICAgICAgIHcyLk5hbWUodzEuTmFtZSgpKTtcclxuICAgICAgICB3Mi5EZXNjcmlwdGlvbih3MS5EZXNjcmlwdGlvbigpKTtcclxuICAgIH1cclxuXHJcbiAgICBBZGRQb2x5bGluZSh3YXlwb2ludD86IFdheXBvaW50KTogTC5Qb2x5bGluZTtcclxuICAgIEFkZFBvbHlsaW5lKHdheXBvaW50cz86IFdheXBvaW50W10pOiBMLlBvbHlsaW5lO1xyXG4gICAgQWRkUG9seWxpbmUoYXJnPyk6IEwuUG9seWxpbmUge1xyXG4gICAgICAgIGNvbnN0IHBvbHlsaW5lID0gbmV3IEwuUG9seWxpbmUoW10pO1xyXG4gICAgICAgIHBvbHlsaW5lLmFkZFRvKHRoaXMuTWFwKTtcclxuICAgICAgICBwb2x5bGluZS5XYXlwb2ludHMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICBpZiAoYXJnICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIGlmIChhcmcgaW5zdGFuY2VvZiBXYXlwb2ludClcclxuICAgICAgICAgICAgKGFyZyBhcyBXYXlwb2ludCkuQWRkVG9Qb2x5bGluZShwb2x5bGluZSk7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHdheXBvaW50IG9mIGFyZyBhcyBXYXlwb2ludFtdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2F5cG9pbnQuQWRkVG9Qb2x5bGluZShwb2x5bGluZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHBvbHlsaW5lO1xyXG4gICAgfVxyXG5cclxuICAgIERyYXdpbmdMYXRMbmc6IEwuTGF0TG5nO1xyXG4gICAgRHJhd2luZ1NvdXJjZVdheXBvaW50OiBXYXlwb2ludDtcclxuICAgIERyYXdpbmdUYXJnZXRXYXlwb2ludDogV2F5cG9pbnQ7XHJcbiAgICBSZW1vdmVQb2x5bGluZSA9IChwb2x5bGluZTogTC5Qb2x5bGluZSkgPT4ge1xyXG4gICAgICAgIHRoaXMuTWFwLnJlbW92ZUxheWVyKHBvbHlsaW5lKTtcclxuICAgICAgICB0aGlzLkRyYXdpbmdQb2x5bGluZSA9IHVuZGVmaW5lZDtcclxuICAgIH07XHJcblxyXG4gICAgR2V0TWFwTW9kZSgpOiBNYXBNb2RlIHtcclxuICAgICAgICBpZiAodGhpcy5EcmF3aW5nUG9seWxpbmUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLkRyYXdpbmdMYXRMbmcgIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgcmV0dXJuIE1hcE1vZGUuUm91dGVEcmF3aW5nO1xyXG4gICAgICAgIHJldHVybiBNYXBNb2RlLkFkbWluVmlldztcclxuICAgIH1cclxuXHJcbiAgICBHZXRXYXlQb2ludEJ5SWQoaWQ6IG51bWJlcik6IFdheXBvaW50IHtcclxuICAgICAgICBmb3IgKGxldCB3YXlwb2ludCBvZiB0aGlzLldheXBvaW50cygpKSB7XHJcbiAgICAgICAgICAgIGlmICh3YXlwb2ludC5JZCgpID09PSBpZClcclxuICAgICAgICAgICAgICAgIHJldHVybiB3YXlwb2ludDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChsZXQgd2F5cG9pbnQgb2YgdGhpcy5IYXJib3VycygpKSB7XHJcbiAgICAgICAgICAgIGlmICh3YXlwb2ludC5JZCgpID09PSBpZClcclxuICAgICAgICAgICAgICAgIHJldHVybiB3YXlwb2ludDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgXCJObyBXYXlwb2ludCB3aXRoIGlkIFwiICsgaWQgKyBcIiBpbiBtb2RlbFwiO1xyXG4gICAgfVxyXG5cclxuICAgIENhbGN1bGF0ZURpc3RhbmNlcyhzdGFydDogSGFyYm91cikge1xyXG4gICAgICAgIGNvbnN0IHdheXBvaW50czogQXJyYXk8V2F5cG9pbnQ+ID0gW3N0YXJ0XTtcclxuICAgICAgICBjb25zdCBjYWxjdWxhdGluZyA9IG5ldyBBcnJheTxXYXlwb2ludERpc3RhbmNlPigpO1xyXG4gICAgICAgIGNvbnN0IGNhbGN1bGF0ZWQgPSBuZXcgQXJyYXk8V2F5cG9pbnREaXN0YW5jZT4oKTtcclxuICAgICAgICBjYWxjdWxhdGluZy5wdXNoKG5ldyBXYXlwb2ludERpc3RhbmNlKG51bGwsIHN0YXJ0LCAwLCB3YXlwb2ludHMpKTtcclxuICAgICAgICAvL2ZvciAobGV0IHdheXBvaW50IG9mIG1vZGVsLldheXBvaW50cygpKSB7XHJcbiAgICAgICAgLy8gICAgd2F5cG9pbnRzLnB1c2gobmV3IFdheXBvaW50RGlzdGFuY2UobnVsbCwgd2F5cG9pbnQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSkpO1xyXG4gICAgICAgIC8vfVxyXG4gICAgICAgIC8vZm9yIChsZXQgaGFyYm91ciBvZiBtb2RlbC5IYXJib3VycygpKSB7XHJcbiAgICAgICAgLy8gICAgaWYgKGhhcmJvdXIgIT09IHN0YXJ0KSB7XHJcbiAgICAgICAgLy8gICAgICAgIHdheXBvaW50cy5wdXNoKG5ldyBXYXlwb2ludERpc3RhbmNlKG51bGwsIGhhcmJvdXIsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSkpO1xyXG4gICAgICAgIC8vICAgIH1cclxuICAgICAgICAvL31cclxuICAgICAgICB3aGlsZSAoY2FsY3VsYXRpbmcubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBsZXQgbWluaW1hbERpc3QgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XHJcbiAgICAgICAgICAgIGxldCBtaW5pbWFsV1A6IFdheXBvaW50RGlzdGFuY2U7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHdwIG9mIGNhbGN1bGF0aW5nKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAod3AuQ29ubmVjdGVkV2F5UG9pbnRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUZyb21BcnJheShjYWxjdWxhdGluZywgd3ApO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGN1bGF0ZWQucHVzaCh3cCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc3QgPSB3cC5EaXN0YW5jZSArIHdwLkNvbm5lY3RlZFdheVBvaW50c1swXS5MYXRMbmcuZGlzdGFuY2VUbyh3cC5MYXRMbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkaXN0IDwgbWluaW1hbERpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWluaW1hbERpc3QgPSBkaXN0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbWFsV1AgPSB3cDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG1pbmltYWxXUCAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgY2FsY3VsYXRpbmcucHVzaChuZXcgV2F5cG9pbnREaXN0YW5jZShtaW5pbWFsV1AuV2F5cG9pbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgbWluaW1hbFdQLkNvbm5lY3RlZFdheVBvaW50cy5zaGlmdCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1pbmltYWxEaXN0LFxyXG4gICAgICAgICAgICAgICAgICAgIHdheXBvaW50cykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCB3cCBvZiBjYWxjdWxhdGVkKSB7XHJcbiAgICAgICAgICAgIHdwLldheXBvaW50LkRpc3RhbmNlKHdwLkRpc3RhbmNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChsZXQgaCBvZiBtb2RlbC5IYXJib3VycygpKVxyXG4gICAgICAgICAgICBoLlBvcHVwKE1hdGgucm91bmQoaC5EaXN0YW5jZSgpKS50b1N0cmluZygpKTtcclxuICAgIH1cclxuXHJcbiAgICBDcmVhdGVXYXlwb2ludChsYXRMbmc6IEwuTGF0TG5nLCBtYXJrZXJUeXBlOiBNYXJrZXJUeXBlKTogV2F5cG9pbnQge1xyXG4gICAgICAgIGNvbnN0IHdwID0gbmV3IFdheXBvaW50KGxhdExuZywgbWFya2VyVHlwZSwgbW9kZWwuTWFwIGFzIEwubWFwYm94Lk1hcCk7XHJcbiAgICAgICAgdGhpcy5Jbml0aWFsaXplV2F5cG9pbnQod3AsIG1hcmtlclR5cGUpO1xyXG4gICAgICAgIHJldHVybiB3cDtcclxuICAgIH1cclxuXHJcbiAgICBJbml0aWFsaXplV2F5cG9pbnQod3A6IFdheXBvaW50LCBtYXJrZXJUeXBlOiBNYXJrZXJUeXBlKSB7XHJcbiAgICAgICAgaWYgKG1hcmtlclR5cGUgPT09IE1hcmtlclR5cGUuV2F5cG9pbnQgfHwgbWFya2VyVHlwZSA9PT0gTWFya2VyVHlwZS5EdW1teSkge1xyXG4gICAgICAgICAgICB0aGlzLldheXBvaW50TWFya2Vycy5wdXNoKHdwLm1hcmtlcik7XHJcbiAgICAgICAgICAgIHdwLm1hcmtlci5Qb2ludCA9IG1vZGVsLk1hcC5sYXRMbmdUb0NvbnRhaW5lclBvaW50KHdwLkxhdExuZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdwLm1hcmtlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixcclxuICAgICAgICAoZTogTC5MZWFmbGV0TW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAobWFya2VyVHlwZSA9PT0gTWFya2VyVHlwZS5EdW1teSkge1xyXG4gICAgICAgICAgICAgICAgbW9kZWwuV2F5cG9pbnRzLnB1c2god3ApO1xyXG4gICAgICAgICAgICAgICAgd3AuY29udmVydEZyb21EdW1teUhhbmRsZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChtb2RlbC5HZXRNYXBNb2RlKCkgPT09IE1hcE1vZGUuUm91dGVEcmF3aW5nKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXdwLklzSW5Qb2x5bGluZShtb2RlbC5EcmF3aW5nUG9seWxpbmUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgU2VydmVyQXBpLldheXBvaW50Q29ubmVjdGlvbkFwaS5HZXREZWZhdWx0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLkNvbm5lY3Qod3AuSWQoKSwgbW9kZWwuRHJhd2luZ1BvbHlsaW5lLldheXBvaW50c1swXS5JZCgpKTtcclxuICAgICAgICAgICAgICAgICAgICB3cC5BZGRUb1BvbHlsaW5lKG1vZGVsLkRyYXdpbmdQb2x5bGluZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlRnJvbVBvbHlsaW5lKG1vZGVsLkRyYXdpbmdQb2x5bGluZSwgbW9kZWwuRHJhd2luZ0xhdExuZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkRHVtbXlIYW5kbGUobW9kZWwuRHJhd2luZ1BvbHlsaW5lKTtcclxuICAgICAgICAgICAgICAgICAgICBtb2RlbC5EcmF3aW5nUG9seWxpbmUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kZWwuRHJhd2luZ0xhdExuZyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlUG9seWxpbmUobW9kZWwuRHJhd2luZ1BvbHlsaW5lKTtcclxuICAgICAgICAgICAgICAgICAgICBtb2RlbC5EcmF3aW5nUG9seWxpbmUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kZWwuRHJhd2luZ0xhdExuZyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHdwLm1hcmtlci5hZGRFdmVudExpc3RlbmVyKFwiZGJsY2xpY2tcIixcclxuICAgICAgICAoZTogTC5MZWFmbGV0TW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBtb2RlbC5EcmF3aW5nUG9seWxpbmUgPSBtb2RlbC5BZGRQb2x5bGluZSh3cCk7XHJcbiAgICAgICAgICAgIG1vZGVsLkRyYXdpbmdMYXRMbmcgPSBuZXcgTC5MYXRMbmcoZS5sYXRsbmcubGF0LCBlLmxhdGxuZy5sbmcpO1xyXG4gICAgICAgICAgICBtb2RlbC5EcmF3aW5nUG9seWxpbmUuYWRkTGF0TG5nKG1vZGVsLkRyYXdpbmdMYXRMbmcpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChtYXJrZXJUeXBlID09PSBNYXJrZXJUeXBlLkR1bW15KVxyXG4gICAgICAgICAgICB3cC5tYXJrZXIuYWRkT25lVGltZUV2ZW50TGlzdGVuZXIoXCJkcmFnXCIsXHJcbiAgICAgICAgICAgIChlOiBMLkxlYWZsZXRNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB3cC5jb252ZXJ0RnJvbUR1bW15SGFuZGxlKCk7XHJcbiAgICAgICAgICAgICAgICBtb2RlbC5XYXlwb2ludHMucHVzaCh3cCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIGVsc2UgaWYgKG1hcmtlclR5cGUgPT09IE1hcmtlclR5cGUuV2F5cG9pbnQpIHtcclxuICAgICAgICAgICAgd3AuTmFtZShgV2VncHVua3QgJHttb2RlbC5XYXlwb2ludHMoKS5sZW5ndGggKyAxfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB3cC5tYXJrZXIuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdlbmRcIixcclxuICAgICAgICAoZTogTC5MZWFmbGV0TW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICB3cC5TYXZlVG9TZXJ2ZXIoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBDcmVhdGVIYXJib3VyKG5hbWU6IHN0cmluZywgbGF0TG5nOiBMLkxhdExuZykge1xyXG4gICAgICAgIGNvbnN0IGggPSBuZXcgSGFyYm91cihuYW1lLCBsYXRMbmcsIHRoaXMuTWFwIGFzIEwubWFwYm94Lk1hcCk7XHJcbiAgICAgICAgdGhpcy5Jbml0aWFsaXplV2F5cG9pbnQoaCwgTWFya2VyVHlwZS5IYXJib3VyKTtcclxuICAgICAgICByZXR1cm4gaDtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbnZhciBoYXJib3Vyc0xvYWRlZCA9IGZhbHNlO1xyXG52YXIgd2F5cG9pbnRzTG9hZGVkID0gZmFsc2U7XHJcbnZhciBwZXJzb25zTG9hZGVkID0gZmFsc2U7XHJcblxyXG5cclxudmFyIG1vZGVsOiBTYWlsaW5nTWFwVmlld01vZGVsO1xyXG5cclxudmFyIGhhcmJvdXJBcGkgPSBuZXcgU2VydmVyQXBpLkhhcmJvdXJBcGkoXCIvYXBpL0hhcmJvdXJzXCIpO1xyXG52YXIgd2F5cG9pbnRBcGkgPSBuZXcgU2VydmVyQXBpLldheXBvaW50QXBpKFwiL2FwaS9XYXlwb2ludHNcIik7XHJcbnZhciBwZXJzb25BcGkgPSBuZXcgU2VydmVyQXBpLlBlcnNvbkFwaShcIi9hcGkvUGVvcGxlXCIpO1xyXG52YXIgd2F5cG9pbnRDb25uZWN0aW9uQXBpID0gbmV3IFNlcnZlckFwaS5XYXlwb2ludENvbm5lY3Rpb25BcGkoXCIvYXBpL1dheXBvaW50Q29ubmVjdGlvbnNcIik7XHJcblxyXG5tb2RlbCA9IG5ldyBTYWlsaW5nTWFwVmlld01vZGVsKCk7XHJcbmtvLmFwcGx5QmluZGluZ3MobW9kZWwpO1xyXG5cclxuJChcIiNoYXJib3VyRGF0YVwiKVxyXG4gICAgLm9uKFwibW91c2VlbnRlclwiLFxyXG4gICAgICAgIFwidHJcIixcclxuICAgICAgICBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgbW9kZWwuQ2FsY3VsYXRlRGlzdGFuY2VzKGtvLmNvbnRleHRGb3IodGhpcykuJGRhdGEpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuJChcIiNuYXZQb2ludHNcIilcclxuICAgIC5vbihcIm1vdXNlZW50ZXJcIixcclxuICAgICAgICBcInRyXCIsXHJcbiAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGtvLmNvbnRleHRGb3IodGhpcykuJGRhdGEuU2hvdyh0cnVlKTtcclxuICAgICAgICB9KTtcclxuJChcIiNuYXZQb2ludHNcIilcclxuICAgIC5vbihcIm1vdXNlbGVhdmVcIixcclxuICAgICAgICBcInRyXCIsXHJcbiAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGtvLmNvbnRleHRGb3IodGhpcykuJGRhdGEuSGlkZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxudmFyIHdheXBvaW50c0luaXRpYWxpemVkID0gZmFsc2U7XHJcbnZhciB3YXlwb2ludENvbm5lY3Rpb25zSW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuXHJcbndheXBvaW50QXBpLkdldCgpXHJcbiAgICAuZG9uZShkYXRhID0+IHtcclxuICAgICAgICBmb3IgKGxldCB3YXlwb2ludCBvZiBkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmICh3YXlwb2ludC5UeXBlID09PSBTZXJ2ZXJNb2RlbC5XYXlwb2ludC5HZXRUeXBlKCkpXHJcbiAgICAgICAgICAgICAgICBtb2RlbC5XYXlwb2ludHMucHVzaChtb2RlbC5DcmVhdGVXYXlwb2ludChMLmxhdExuZyh3YXlwb2ludC5MYXRpdHVkZSwgd2F5cG9pbnQuTG9uZ2l0dWRlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgTWFya2VyVHlwZS5XYXlwb2ludClcclxuICAgICAgICAgICAgICAgICAgICAuTG9hZEZyb21TZXJ2ZXJFbnRpdHkod2F5cG9pbnQpKTtcclxuICAgICAgICAgICAgZWxzZSBpZiAod2F5cG9pbnQuVHlwZSA9PT0gU2VydmVyTW9kZWwuSGFyYm91ci5HZXRUeXBlKCkpXHJcbiAgICAgICAgICAgICAgICBtb2RlbC5IYXJib3Vycy5wdXNoKG1vZGVsLkNyZWF0ZUhhcmJvdXIod2F5cG9pbnQuTmFtZSwgTC5sYXRMbmcod2F5cG9pbnQuTGF0aXR1ZGUsIHdheXBvaW50LkxvbmdpdHVkZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLkxvYWRGcm9tU2VydmVyRW50aXR5KHdheXBvaW50IGFzIFNlcnZlck1vZGVsLkhhcmJvdXIpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgd2F5cG9pbnRzSW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgIExvYWRXYXlwb2ludENvbm5lY3Rpb25zKCk7XHJcbiAgICB9KTtcclxuXHJcbndheXBvaW50Q29ubmVjdGlvbkFwaS5HZXQoKVxyXG4gICAgLmRvbmUoZGF0YSA9PiB7XHJcbiAgICAgICAgZm9yIChsZXQgY29ubmVjdGlvbiBvZiBkYXRhKSB7XHJcbiAgICAgICAgICAgIG1vZGVsLldheXBvaW50Q29ubmVjdGlvbnMucHVzaChjb25uZWN0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgd2F5cG9pbnRDb25uZWN0aW9uc0luaXRpYWxpemVkID0gdHJ1ZTtcclxuICAgICAgICBMb2FkV2F5cG9pbnRDb25uZWN0aW9ucygpO1xyXG4gICAgfSk7XHJcblxyXG5mdW5jdGlvbiBMb2FkV2F5cG9pbnRDb25uZWN0aW9ucygpIHtcclxuICAgIGlmICh3YXlwb2ludHNJbml0aWFsaXplZCAmJiB3YXlwb2ludENvbm5lY3Rpb25zSW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICBmb3IgKGxldCBjb25uZWN0aW9uIG9mIG1vZGVsLldheXBvaW50Q29ubmVjdGlvbnMoKSkge1xyXG4gICAgICAgICAgICBhZGREdW1teUhhbmRsZShtb2RlbC5BZGRQb2x5bGluZShbXHJcbiAgICAgICAgICAgICAgICBtb2RlbC5HZXRXYXlQb2ludEJ5SWQoY29ubmVjdGlvbi5XYXlwb2ludDFJZCksIG1vZGVsLkdldFdheVBvaW50QnlJZChjb25uZWN0aW9uLldheXBvaW50MklkKVxyXG4gICAgICAgICAgICBdKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBNYXBIZWxwZXIge1xyXG4gICAgc3RhdGljXHJcbn0iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=\n\nvar personDeails = $(\"#personDetails\");\nvar Person = ClientModel.Person;\nvar deletePerson = $(\"#deletePerson\");\nvar adminPersonViewModel;\nvar AdminPersonViewModel;\n(function (AdminPersonViewModel) {\n    var Model = (function () {\n        function Model() {\n            var _this = this;\n            this.Model = this;\n            this.People = ko.observableArray();\n            this.PersonApi = ServerApi.PersonApi.GetDefault();\n            this.CurrentPerson = ko.observable(new Person());\n            this.NewPerson = ko.computed(function () { return _this.CurrentPerson().Id() === undefined; });\n            this.PersonApi.Get()\n                .done(function (data) {\n                for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {\n                    var person = data_1[_i];\n                    _this.People.push(new Person().LoadFromServerEntity(person));\n                }\n            });\n        }\n        Model.prototype.SavePerson = function () {\n            adminPersonViewModel.CurrentPerson().SaveToServer().done(function () {\n                personDeails.modal(\"hide\");\n                adminPersonViewModel.CurrentPerson(new Person());\n            });\n        };\n        Model.prototype.CancelEditPerson = function () {\n            adminPersonViewModel.CurrentPerson().RevertState(true);\n            adminPersonViewModel.CurrentPerson(new Person());\n            personDeails.modal(\"hide\");\n        };\n        Model.prototype.DeletePerson = function () {\n            adminPersonViewModel.CurrentPerson()\n                .DeleteOnServer()\n                .done(function () {\n                adminPersonViewModel.People.remove(adminPersonViewModel.CurrentPerson());\n                deletePerson.modal(\"hide\");\n                adminPersonViewModel.CurrentPerson(undefined);\n            });\n        };\n        Model.prototype.AddPerson = function () {\n            adminPersonViewModel.CurrentPerson(new Person());\n            adminPersonViewModel.People.push(adminPersonViewModel.CurrentPerson());\n            adminPersonViewModel.SavePerson();\n        };\n        Model.prototype.SelectPerson = function (person) {\n            adminPersonViewModel.CurrentPerson(person);\n            person.SaveState();\n        };\n        return Model;\n    }());\n    AdminPersonViewModel.Model = Model;\n})(AdminPersonViewModel || (AdminPersonViewModel = {}));\nadminPersonViewModel = new AdminPersonViewModel.Model();\nko.applyBindings(adminPersonViewModel);\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlZpZXdNb2RlbHMvQWRtaW4vUGVyc29ucy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDSSxJQUFJLFlBQVksR0FBRyxDQUFDLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztBQUN2QyxJQUFPLE1BQU0sR0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDO0FBR2pDLElBQUksWUFBWSxHQUFHLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQztBQUN0QyxJQUFJLG9CQUFnRCxDQUFDO0FBR3pELElBQU8sb0JBQW9CLENBeUQxQjtBQXpERCxXQUFPLG9CQUFvQixFQUFDLENBQUM7SUFDekI7UUFDSTtZQURKLGlCQXVEQztZQXpDRyxVQUFLLEdBQUMsSUFBSSxDQUFDO1lBWFAsSUFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUMsZUFBZSxFQUFVLENBQUM7WUFDM0MsSUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUMsU0FBUyxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQ2xELElBQUksQ0FBQyxhQUFhLEdBQUcsRUFBRSxDQUFDLFVBQVUsQ0FBUyxJQUFJLE1BQU0sRUFBRSxDQUFDLENBQUM7WUFDekQsSUFBSSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUMsUUFBUSxDQUFVLGNBQU0sT0FBQSxLQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsRUFBRSxFQUFFLEtBQUssU0FBUyxFQUF2QyxDQUF1QyxDQUFDLENBQUM7WUFDckYsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUU7aUJBQ2YsSUFBSSxDQUFDLFVBQUEsSUFBSTtnQkFDTixHQUFHLENBQUMsQ0FBZSxVQUFJLEVBQUosYUFBSSxFQUFKLGtCQUFJLEVBQUosSUFBSSxDQUFDO29CQUFuQixJQUFJLE1BQU0sYUFBQTtvQkFDWCxLQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLE1BQU0sRUFBRSxDQUFDLG9CQUFvQixDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7aUJBQy9EO1lBQ0wsQ0FBQyxDQUFDLENBQUM7UUFDWCxDQUFDO1FBTUQsMEJBQVUsR0FBVjtZQUNJLG9CQUFvQixDQUFDLGFBQWEsRUFBRSxDQUFDLFlBQVksRUFBRSxDQUFDLElBQUksQ0FBQztnQkFDckQsWUFBWSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFDM0Isb0JBQW9CLENBQUMsYUFBYSxDQUFDLElBQUksTUFBTSxFQUFFLENBQUMsQ0FBQztZQUNyRCxDQUFDLENBQUMsQ0FBQztRQUVQLENBQUM7UUFFRCxnQ0FBZ0IsR0FBaEI7WUFDSSxvQkFBb0IsQ0FBQyxhQUFhLEVBQUUsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDdkQsb0JBQW9CLENBQUMsYUFBYSxDQUFDLElBQUksTUFBTSxFQUFFLENBQUMsQ0FBQztZQUM3QyxZQUFZLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ25DLENBQUM7UUFFRCw0QkFBWSxHQUFaO1lBQ0ksb0JBQW9CLENBQUMsYUFBYSxFQUFFO2lCQUMvQixjQUFjLEVBQUU7aUJBQ2hCLElBQUksQ0FBQztnQkFDRixvQkFBb0IsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLG9CQUFvQixDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUM7Z0JBQ3pFLFlBQVksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBQzNCLG9CQUFvQixDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUNsRCxDQUFDLENBQUMsQ0FBQztRQUNYLENBQUM7UUFFRCx5QkFBUyxHQUFUO1lBQ0ksb0JBQW9CLENBQUMsYUFBYSxDQUFDLElBQUksTUFBTSxFQUFFLENBQUMsQ0FBQztZQUNqRCxvQkFBb0IsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUM7WUFDdkUsb0JBQW9CLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDdEMsQ0FBQztRQUVELDRCQUFZLEdBQVosVUFBYSxNQUFjO1lBQ3ZCLG9CQUFvQixDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUMzQyxNQUFNLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDdkIsQ0FBQztRQUdMLFlBQUM7SUFBRCxDQXZEQSxBQXVEQyxJQUFBO0lBdkRZLDBCQUFLLFFBdURqQixDQUFBO0FBQ0wsQ0FBQyxFQXpETSxvQkFBb0IsS0FBcEIsb0JBQW9CLFFBeUQxQjtBQUVHLG9CQUFvQixHQUFHLElBQUksb0JBQW9CLENBQUMsS0FBSyxFQUFFLENBQUM7QUFDeEQsRUFBRSxDQUFDLGFBQWEsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDIiwiZmlsZSI6IlZpZXdNb2RlbHMvQWRtaW4vUGVyc29ucy5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG4gICAgdmFyIHBlcnNvbkRlYWlscyA9ICQoXCIjcGVyc29uRGV0YWlsc1wiKTtcclxuICAgIGltcG9ydCBQZXJzb249Q2xpZW50TW9kZWwuUGVyc29uO1xyXG5cclxuXHJcbiAgICB2YXIgZGVsZXRlUGVyc29uID0gJChcIiNkZWxldGVQZXJzb25cIik7XHJcbiAgICB2YXIgYWRtaW5QZXJzb25WaWV3TW9kZWw6IEFkbWluUGVyc29uVmlld01vZGVsLk1vZGVsO1xyXG5cclxuXHJcbm1vZHVsZSBBZG1pblBlcnNvblZpZXdNb2RlbCB7XHJcbiAgICBleHBvcnQgY2xhc3MgTW9kZWwge1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5QZW9wbGUgPSBrby5vYnNlcnZhYmxlQXJyYXk8UGVyc29uPigpO1xyXG4gICAgICAgICAgICB0aGlzLlBlcnNvbkFwaSA9IFNlcnZlckFwaS5QZXJzb25BcGkuR2V0RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLkN1cnJlbnRQZXJzb24gPSBrby5vYnNlcnZhYmxlPFBlcnNvbj4obmV3IFBlcnNvbigpKTtcclxuICAgICAgICAgICAgdGhpcy5OZXdQZXJzb24gPSBrby5jb21wdXRlZDxib29sZWFuPigoKSA9PiB0aGlzLkN1cnJlbnRQZXJzb24oKS5JZCgpID09PSB1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICB0aGlzLlBlcnNvbkFwaS5HZXQoKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoZGF0YSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcGVyc29uIG9mIGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5QZW9wbGUucHVzaChuZXcgUGVyc29uKCkuTG9hZEZyb21TZXJ2ZXJFbnRpdHkocGVyc29uKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIE1vZGVsPXRoaXM7XHJcbiAgICAgICAgUGVvcGxlOiBLbm9ja291dE9ic2VydmFibGVBcnJheTxQZXJzb24+O1xyXG4gICAgICAgIEN1cnJlbnRQZXJzb246IEtub2Nrb3V0T2JzZXJ2YWJsZTxQZXJzb24+O1xyXG4gICAgICAgIFBlcnNvbkFwaTogU2VydmVyQXBpLlBlcnNvbkFwaTtcclxuXHJcbiAgICAgICAgU2F2ZVBlcnNvbigpIHtcclxuICAgICAgICAgICAgYWRtaW5QZXJzb25WaWV3TW9kZWwuQ3VycmVudFBlcnNvbigpLlNhdmVUb1NlcnZlcigpLmRvbmUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcGVyc29uRGVhaWxzLm1vZGFsKFwiaGlkZVwiKTtcclxuICAgICAgICAgICAgICAgIGFkbWluUGVyc29uVmlld01vZGVsLkN1cnJlbnRQZXJzb24obmV3IFBlcnNvbigpKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgQ2FuY2VsRWRpdFBlcnNvbigpIHtcclxuICAgICAgICAgICAgYWRtaW5QZXJzb25WaWV3TW9kZWwuQ3VycmVudFBlcnNvbigpLlJldmVydFN0YXRlKHRydWUpO1xyXG4gICAgICAgICAgICBhZG1pblBlcnNvblZpZXdNb2RlbC5DdXJyZW50UGVyc29uKG5ldyBQZXJzb24oKSk7XHJcbiAgICAgICAgICAgICAgICBwZXJzb25EZWFpbHMubW9kYWwoXCJoaWRlXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgRGVsZXRlUGVyc29uKCkge1xyXG4gICAgICAgICAgICBhZG1pblBlcnNvblZpZXdNb2RlbC5DdXJyZW50UGVyc29uKClcclxuICAgICAgICAgICAgICAgIC5EZWxldGVPblNlcnZlcigpXHJcbiAgICAgICAgICAgICAgICAuZG9uZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRtaW5QZXJzb25WaWV3TW9kZWwuUGVvcGxlLnJlbW92ZShhZG1pblBlcnNvblZpZXdNb2RlbC5DdXJyZW50UGVyc29uKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZVBlcnNvbi5tb2RhbChcImhpZGVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRtaW5QZXJzb25WaWV3TW9kZWwuQ3VycmVudFBlcnNvbih1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBBZGRQZXJzb24oKSB7XHJcbiAgICAgICAgICAgIGFkbWluUGVyc29uVmlld01vZGVsLkN1cnJlbnRQZXJzb24obmV3IFBlcnNvbigpKTtcclxuICAgICAgICAgICAgYWRtaW5QZXJzb25WaWV3TW9kZWwuUGVvcGxlLnB1c2goYWRtaW5QZXJzb25WaWV3TW9kZWwuQ3VycmVudFBlcnNvbigpKTtcclxuICAgICAgICAgICAgYWRtaW5QZXJzb25WaWV3TW9kZWwuU2F2ZVBlcnNvbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgU2VsZWN0UGVyc29uKHBlcnNvbjogUGVyc29uKSB7XHJcbiAgICAgICAgICAgIGFkbWluUGVyc29uVmlld01vZGVsLkN1cnJlbnRQZXJzb24ocGVyc29uKTtcclxuICAgICAgICAgICAgcGVyc29uLlNhdmVTdGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgTmV3UGVyc29uOiBLbm9ja291dENvbXB1dGVkPGJvb2xlYW4+O1xyXG4gICAgfVxyXG59XHJcblxyXG4gICAgYWRtaW5QZXJzb25WaWV3TW9kZWwgPSBuZXcgQWRtaW5QZXJzb25WaWV3TW9kZWwuTW9kZWwoKTtcclxuICAgIGtvLmFwcGx5QmluZGluZ3MoYWRtaW5QZXJzb25WaWV3TW9kZWwpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==\n\nvar m = \"\";\nvar HomeJobsViewModel;\n(function (HomeJobsViewModel) {\n    var model;\n    var Job = ClientModel.Job;\n    var Model = (function () {\n        function Model() {\n            var _this = this;\n            this.JobLists = ko.observableArray();\n            this.Persons = ko.observableArray();\n            this.Trip = ko.observableArray();\n            ServerApi.PersonApi.GetDefault()\n                .Get()\n                .done(function (d) {\n                for (var _i = 0, d_1 = d; _i < d_1.length; _i++) {\n                    var sPerson = d_1[_i];\n                    _this.Persons.push(new Person().LoadFromServerEntity(sPerson));\n                }\n            });\n            ServerApi.JobApi.GetDefault()\n                .Get()\n                .done(function (d) {\n                for (var _i = 0, d_2 = d; _i < d_2.length; _i++) {\n                    var sJobList = d_2[_i];\n                    _this.JobLists.push(new Job().LoadFromServerEntity(sJobList));\n                }\n            });\n            this.Seed();\n        }\n        Model.prototype.Seed = function () {\n            var p = new Person();\n            p.LastName(\"Kuon\");\n            p.FirstName(\"Daniel\");\n            this.Persons.push(p);\n            var l = new Job();\n            l.Title(\"L1\");\n            l.Content(\"<b>L1</b>\");\n            l.Done(true);\n            l.AssignedTo(p);\n            l.DueTo(new Date());\n            var j = new Job();\n            j.Title(\"L1\");\n            j.Content(\"<b>L1</b>\");\n            j.Done(false);\n            j.AssignedTo(p);\n            j.DueTo(new Date());\n            l.SubJobs.push(j);\n            this.JobLists.push(l);\n            var l2 = new Job();\n            l2.Title(\"L1\");\n            l2.Content(\"<b>L1</b>\");\n            l2.Done(true);\n            l2.AssignedTo(p);\n            l2.DueTo(new Date());\n            l2.SubJobs.push(j);\n            l2.SubJobs.push(j);\n            l.SubJobs.push(l2);\n        };\n        return Model;\n    }());\n    model = new Model();\n    m = model;\n    ko.applyBindings(model);\n    var ApplyChangeToViewModel = function (e) {\n        var context = ko.contextFor(e.target.bodyElement);\n        console.log(context);\n    };\n    tinymce.init({\n        selector: \"h2.editable\",\n        inline: true,\n        toolbar: \"undo redo\",\n        menubar: false\n    });\n    tinymce.init({\n        selector: \"div.editable\",\n        inline: true,\n        plugins: [\n            \"advlist autolink lists link image charmap print preview anchor\",\n            \"searchreplace visualblocks code fullscreen\",\n            \"insertdatetime media table contextmenu paste\"\n        ],\n        toolbar: \"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image\",\n        setup: function (editor) {\n            editor.on(\"blur\", ApplyChangeToViewModel);\n        }\n    });\n})(HomeJobsViewModel || (HomeJobsViewModel = {}));\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlZpZXdNb2RlbHMvSG9tZS9Kb2JzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUksQ0FBQyxHQUFLLEVBQUUsQ0FBQztBQUViLElBQU8saUJBQWlCLENBeUZ2QjtBQXpGRCxXQUFPLGlCQUFpQixFQUFDLENBQUM7SUFDdEIsSUFBSSxLQUFZLENBQUM7SUFFakIsSUFBTyxHQUFHLEdBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQztJQUUzQjtRQUVJO1lBRkosaUJBc0RDO1lBbENHLGFBQVEsR0FBRyxFQUFFLENBQUMsZUFBZSxFQUFPLENBQUM7WUFDckMsWUFBTyxHQUFHLEVBQUUsQ0FBQyxlQUFlLEVBQVUsQ0FBQztZQUN2QyxTQUFJLEdBQUMsRUFBRSxDQUFDLGVBQWUsRUFBUSxDQUFDO1lBbkI1QixTQUFTLENBQUMsU0FBUyxDQUFDLFVBQVUsRUFBRTtpQkFDM0IsR0FBRyxFQUFFO2lCQUNMLElBQUksQ0FBQyxVQUFBLENBQUM7Z0JBQ0gsR0FBRyxDQUFDLENBQWdCLFVBQUMsRUFBRCxPQUFDLEVBQUQsZUFBQyxFQUFELElBQUMsQ0FBQztvQkFBakIsSUFBSSxPQUFPLFVBQUE7b0JBQ1osS0FBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxNQUFNLEVBQUUsQ0FBQyxvQkFBb0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO2lCQUNqRTtZQUNMLENBQUMsQ0FBQyxDQUFDO1lBQ1AsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUU7aUJBQ3hCLEdBQUcsRUFBRTtpQkFDTCxJQUFJLENBQUMsVUFBQSxDQUFDO2dCQUNILEdBQUcsQ0FBQyxDQUFpQixVQUFDLEVBQUQsT0FBQyxFQUFELGVBQUMsRUFBRCxJQUFDLENBQUM7b0JBQWxCLElBQUksUUFBUSxVQUFBO29CQUNiLEtBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUMsb0JBQW9CLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztpQkFDaEU7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Q0FBNEM7WUFDNUMsOENBQThDO1NBQ2pEO1FBQ0QsT0FBTyxFQUNILGdKQUFnSjtRQUNwSixLQUFLLEVBQUUsVUFBQSxNQUFNO1lBQ1QsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsc0JBQXNCLENBQUMsQ0FBQztRQUM5QyxDQUFDO0tBQ0osQ0FBQyxDQUFDO0FBQ1gsQ0FBQyxFQXpGTSxpQkFBaUIsS0FBakIsaUJBQWlCLFFBeUZ2QiIsImZpbGUiOiJWaWV3TW9kZWxzL0hvbWUvSm9icy5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBtOmFueT1cIlwiO1xyXG5cclxubW9kdWxlIEhvbWVKb2JzVmlld01vZGVsIHtcclxuICAgIHZhciBtb2RlbDogTW9kZWw7XHJcblxyXG4gICAgaW1wb3J0IEpvYj1DbGllbnRNb2RlbC5Kb2I7XHJcbiAgICBpbXBvcnQgVHJpcD1DbGllbnRNb2RlbC5UcmlwO1xyXG4gICAgY2xhc3MgTW9kZWxcclxuICAgIHtcclxuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAgICAgU2VydmVyQXBpLlBlcnNvbkFwaS5HZXREZWZhdWx0KClcclxuICAgICAgICAgICAgICAgIC5HZXQoKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoZCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgc1BlcnNvbiBvZiBkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuUGVyc29ucy5wdXNoKG5ldyBQZXJzb24oKS5Mb2FkRnJvbVNlcnZlckVudGl0eShzUGVyc29uKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFNlcnZlckFwaS5Kb2JBcGkuR2V0RGVmYXVsdCgpXHJcbiAgICAgICAgICAgICAgICAuR2V0KClcclxuICAgICAgICAgICAgICAgIC5kb25lKGQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHNKb2JMaXN0IG9mIGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5Kb2JMaXN0cy5wdXNoKG5ldyBKb2IoKS5Mb2FkRnJvbVNlcnZlckVudGl0eShzSm9iTGlzdCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLlNlZWQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEpvYkxpc3RzID0ga28ub2JzZXJ2YWJsZUFycmF5PEpvYj4oKTtcclxuICAgICAgICBQZXJzb25zID0ga28ub2JzZXJ2YWJsZUFycmF5PFBlcnNvbj4oKTtcclxuICAgICAgICBUcmlwPWtvLm9ic2VydmFibGVBcnJheTxUcmlwPigpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIFNlZWQoKSB7XHJcbiAgICAgICAgICAgIHZhciBwID0gbmV3IFBlcnNvbigpO1xyXG4gICAgICAgICAgICBwLkxhc3ROYW1lKFwiS3VvblwiKTtcclxuICAgICAgICAgICAgcC5GaXJzdE5hbWUoXCJEYW5pZWxcIik7XHJcbiAgICAgICAgICAgIHRoaXMuUGVyc29ucy5wdXNoKHApO1xyXG4gICAgICAgICAgICB2YXIgbCA9IG5ldyBKb2IoKTtcclxuICAgICAgICAgICAgbC5UaXRsZShcIkwxXCIpO1xyXG4gICAgICAgICAgICBsLkNvbnRlbnQoXCI8Yj5MMTwvYj5cIik7XHJcbiAgICAgICAgICAgIGwuRG9uZSh0cnVlKTtcclxuICAgICAgICAgICAgbC5Bc3NpZ25lZFRvKHApO1xyXG4gICAgICAgICAgICBsLkR1ZVRvKG5ldyBEYXRlKCkpO1xyXG4gICAgICAgICAgICB2YXIgaiA9IG5ldyBKb2IoKTtcclxuICAgICAgICAgICAgai5UaXRsZShcIkwxXCIpO1xyXG4gICAgICAgICAgICBqLkNvbnRlbnQoXCI8Yj5MMTwvYj5cIik7XHJcbiAgICAgICAgICAgIGouRG9uZShmYWxzZSk7XHJcbiAgICAgICAgICAgIGouQXNzaWduZWRUbyhwKTtcclxuICAgICAgICAgICAgai5EdWVUbyhuZXcgRGF0ZSgpKTtcclxuICAgICAgICAgICAgbC5TdWJKb2JzLnB1c2goaik7XHJcbiAgICAgICAgICAgIHRoaXMuSm9iTGlzdHMucHVzaChsKTtcclxuICAgICAgICAgICAgdmFyIGwyID0gbmV3IEpvYigpO1xyXG4gICAgICAgICAgICBsMi5UaXRsZShcIkwxXCIpO1xyXG4gICAgICAgICAgICBsMi5Db250ZW50KFwiPGI+TDE8L2I+XCIpO1xyXG4gICAgICAgICAgICBsMi5Eb25lKHRydWUpO1xyXG4gICAgICAgICAgICBsMi5Bc3NpZ25lZFRvKHApO1xyXG4gICAgICAgICAgICBsMi5EdWVUbyhuZXcgRGF0ZSgpKTtcclxuICAgICAgICAgICAgbDIuU3ViSm9icy5wdXNoKGopO1xyXG4gICAgICAgICAgICBsMi5TdWJKb2JzLnB1c2goaik7XHJcbiAgICAgICAgICAgIGwuU3ViSm9icy5wdXNoKGwyKTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG1vZGVsID0gbmV3IE1vZGVsKCk7XHJcbiAgICBtID0gbW9kZWw7XHJcbiAgICBrby5hcHBseUJpbmRpbmdzKG1vZGVsKTtcclxuXHJcbiAgICB2YXIgQXBwbHlDaGFuZ2VUb1ZpZXdNb2RlbCA9IGUgPT4ge1xyXG4gICAgICAgICAgICBsZXQgY29udGV4dCA9IGtvLmNvbnRleHRGb3IoZS50YXJnZXQuYm9keUVsZW1lbnQpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjb250ZXh0KTtcclxuICAgICAgICB9XHJcbiAgICB0aW55bWNlLmluaXQoe1xyXG4gICAgICAgICAgICBzZWxlY3RvcjogXCJoMi5lZGl0YWJsZVwiLFxyXG4gICAgICAgICAgICBpbmxpbmU6IHRydWUsXHJcbiAgICAgICAgICAgIHRvb2xiYXI6IFwidW5kbyByZWRvXCIsXHJcbiAgICAgICAgICAgIG1lbnViYXI6IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcbiAgICB0aW55bWNlLmluaXQoe1xyXG4gICAgICAgICAgICBzZWxlY3RvcjogXCJkaXYuZWRpdGFibGVcIixcclxuICAgICAgICAgICAgaW5saW5lOiB0cnVlLFxyXG4gICAgICAgICAgICBwbHVnaW5zOiBbXHJcbiAgICAgICAgICAgICAgICBcImFkdmxpc3QgYXV0b2xpbmsgbGlzdHMgbGluayBpbWFnZSBjaGFybWFwIHByaW50IHByZXZpZXcgYW5jaG9yXCIsXHJcbiAgICAgICAgICAgICAgICBcInNlYXJjaHJlcGxhY2UgdmlzdWFsYmxvY2tzIGNvZGUgZnVsbHNjcmVlblwiLFxyXG4gICAgICAgICAgICAgICAgXCJpbnNlcnRkYXRldGltZSBtZWRpYSB0YWJsZSBjb250ZXh0bWVudSBwYXN0ZVwiXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIHRvb2xiYXI6XHJcbiAgICAgICAgICAgICAgICBcImluc2VydGZpbGUgdW5kbyByZWRvIHwgc3R5bGVzZWxlY3QgfCBib2xkIGl0YWxpYyB8IGFsaWdubGVmdCBhbGlnbmNlbnRlciBhbGlnbnJpZ2h0IGFsaWduanVzdGlmeSB8IGJ1bGxpc3QgbnVtbGlzdCBvdXRkZW50IGluZGVudCB8IGxpbmsgaW1hZ2VcIixcclxuICAgICAgICAgICAgc2V0dXA6IGVkaXRvciA9PiB7XHJcbiAgICAgICAgICAgICAgICBlZGl0b3Iub24oXCJibHVyXCIsIEFwcGx5Q2hhbmdlVG9WaWV3TW9kZWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=\n\nvar SHarbour = ServerModel.Harbour;\nvar MapViewModel = (function () {\n    function MapViewModel() {\n        var _this = this;\n        this.WaypointsLoaded = false;\n        this.WaypointConnectionsLoaded = false;\n        this.PersonsLoaded = false;\n        this.JobsLoaded = false;\n        this.TripsLoaded = false;\n        this.AddressesLoaded = false;\n        this.ImagesLoaded = false;\n        this.AlbumsLoaded = false;\n        this.WaypointTacksLoaded = false;\n        this.TacksLoaded = false;\n        this.LocationsLoaded = false;\n        this.Waypoints = ko.observableArray();\n        this.WaypointConnections = ko.observableArray();\n        this.Harbours = ko.observableArray();\n        this.Persons = ko.observableArray();\n        this.Jobs = ko.observableArray();\n        this.Trips = ko.observableArray();\n        this.Addresses = ko.observableArray();\n        this.Images = ko.observableArray();\n        this.Albums = ko.observableArray();\n        this.Tacks = ko.observableArray();\n        this.Locations = ko.observableArray();\n        this.Supermarkets = ko.observableArray();\n        this.Restaurants = ko.observableArray();\n        this.SelectedWaypoint = ko.observable();\n        this.SelectedHarbour = ko.observable();\n        this.SelectedPerson = ko.observable();\n        this.SelectedJob = ko.observable();\n        this.SelectedTrip = ko.observable();\n        this.SelectedAddress = ko.observable();\n        this.SelectedImage = ko.observable();\n        this.SelectedAlbum = ko.observable();\n        this.SelectedTack = ko.observable();\n        this.SelectedLocation = ko.observable();\n        this.SelectedSupermarket = ko.observable();\n        this.SelectedRestaurant = ko.observable();\n        L.mapbox\n            .accessToken =\n            \"pk.eyJ1IjoiZGFuaWVsLWt1b24iLCJhIjoiY2lldnVtY29iMDBiOHQxbTBvZzBqZWl6cCJ9.UEc2YqH59pB1YTpv22vg8A\";\n        this.Map = L.mapbox.map(\"map\", \"mapbox.streets\")\n            .setView([51, 10], 9);\n        this.SelectedHarbour.subscribe(function () {\n        });\n        ServerApi.WaypointApi.GetDefault()\n            .Get()\n            .done(function (d) {\n            var _loop_1 = function(sEntity) {\n                if (sEntity.Type === ServerModel.Waypoint.GetType())\n                    _this.Waypoints.push(new ClientModel\n                        .Waypoint(L.latLng(sEntity.Latitude, sEntity.Longitude), MarkerType.Waypoint, _this.Map)\n                        .LoadFromServerEntity(sEntity));\n                else if (sEntity.Type === ServerModel.Harbour.GetType()) {\n                    var harbour_1 = new ClientModel\n                        .Harbour(sEntity.Name, L.latLng(sEntity.Latitude, sEntity.Longitude), _this.Map)\n                        .LoadFromServerEntity(sEntity);\n                    harbour_1.marker.addEventListener(\"click\", function () {\n                        _this.SelectedHarbour(harbour_1);\n                    });\n                    _this.Harbours.push(harbour_1);\n                }\n            };\n            for (var _i = 0, d_1 = d; _i < d_1.length; _i++) {\n                var sEntity = d_1[_i];\n                _loop_1(sEntity);\n            }\n            _this.WaypointsLoaded = true;\n            _this.InitializeModel();\n        });\n        ServerApi.WaypointConnectionApi.GetDefault()\n            .Get()\n            .done(function (d) {\n            for (var _i = 0, d_2 = d; _i < d_2.length; _i++) {\n                var sEntity = d_2[_i];\n                _this.WaypointConnections.push(sEntity);\n            }\n            _this.WaypointConnectionsLoaded = true;\n            _this.InitializeModel();\n        });\n        ServerApi.PersonApi.GetDefault()\n            .Get()\n            .done(function (d) {\n            for (var _i = 0, d_3 = d; _i < d_3.length; _i++) {\n                var sEntity = d_3[_i];\n                _this.Persons.push(new ClientModel.Person().LoadFromServerEntity(sEntity));\n            }\n            _this.PersonsLoaded = true;\n            _this.InitializeModel();\n        });\n        ServerApi.JobApi.GetDefault()\n            .Get()\n            .done(function (d) {\n            for (var _i = 0, d_4 = d; _i < d_4.length; _i++) {\n                var sEntity = d_4[_i];\n                _this.Jobs.push(new ClientModel.Job().LoadFromServerEntity(sEntity));\n            }\n            _this.JobsLoaded = true;\n            _this.InitializeModel();\n        });\n        ServerApi.TripApi.GetDefault()\n            .Get()\n            .done(function (d) {\n            for (var _i = 0, d_5 = d; _i < d_5.length; _i++) {\n                var sEntity = d_5[_i];\n                _this.Trips.push(new ClientModel.Trip().LoadFromServerEntity(sEntity));\n            }\n            _this.TripsLoaded = true;\n            _this.InitializeModel();\n        });\n        ServerApi.AddressApi.GetDefault()\n            .Get()\n            .done(function (d) {\n            for (var _i = 0, d_6 = d; _i < d_6.length; _i++) {\n                var sEntity = d_6[_i];\n                _this.Addresses.push(new ClientModel.Address().LoadFromServerEntity(sEntity));\n            }\n            _this.AddressesLoaded = true;\n            _this.InitializeModel();\n        });\n        ServerApi.ImageApi.GetDefault()\n            .Get()\n            .done(function (d) {\n            for (var _i = 0, d_7 = d; _i < d_7.length; _i++) {\n                var sEntity = d_7[_i];\n                _this.Images.push(new ClientModel.Image().LoadFromServerEntity(sEntity));\n            }\n            _this.ImagesLoaded = true;\n            _this.InitializeModel();\n        });\n        ServerApi.AlbumApi.GetDefault()\n            .Get()\n            .done(function (d) {\n            for (var _i = 0, d_8 = d; _i < d_8.length; _i++) {\n                var sEntity = d_8[_i];\n                _this.Albums.push(new ClientModel.Album().LoadFromServerEntity(sEntity));\n            }\n            _this.AlbumsLoaded = true;\n            _this.InitializeModel();\n        });\n        //ServerApi.WaypointTackApi.GetDefault().Get().done(d => {\n        //    for (let sEntity of d) { this.WaypointTacks.push(new ClientModel.WaypointTack().LoadFromServerEntity(sEntity)); }\n        //    this.WaypointTacksLoaded = true;\n        //    this.InitialozeModel();\n        //});\n        ServerApi.TackApi.GetDefault()\n            .Get()\n            .done(function (d) {\n            for (var _i = 0, d_9 = d; _i < d_9.length; _i++) {\n                var sEntity = d_9[_i];\n                _this.Tacks.push(new ClientModel.Tack().LoadFromServerEntity(sEntity));\n            }\n            _this.TacksLoaded = true;\n            _this.InitializeModel();\n        });\n        ServerApi.LocationApi.GetDefault()\n            .Get()\n            .done(function (d) {\n            for (var _i = 0, d_10 = d; _i < d_10.length; _i++) {\n                var sEntity = d_10[_i];\n                if (sEntity.Type === ServerModel.Location.GetType())\n                    _this.Locations.push(new ClientModel.Location().LoadFromServerEntity(sEntity));\n                else if (sEntity.Type === ServerModel.Restaurant.GetType())\n                    _this.Restaurants.push(new ClientModel.Restaurant().LoadFromServerEntity(sEntity));\n                else if (sEntity.Type === ServerModel.Supermarket.GetType())\n                    _this.Supermarkets.push(new ClientModel.Supermarket().LoadFromServerEntity(sEntity));\n            }\n            _this.LocationsLoaded = true;\n            _this.InitializeModel();\n        });\n    }\n    MapViewModel.prototype.InitializeModel = function () {\n        if (this.WaypointsLoaded &&\n            this.WaypointConnectionsLoaded &&\n            this.PersonsLoaded &&\n            this.JobsLoaded &&\n            this.TripsLoaded &&\n            this.AddressesLoaded &&\n            this.ImagesLoaded &&\n            this.AlbumsLoaded &&\n            //this.WaypointTacksLoaded &&\n            this.TacksLoaded &&\n            this.LocationsLoaded) {\n            for (var _i = 0, _a = this.Harbours(); _i < _a.length; _i++) {\n                var entity = _a[_i];\n                entity.Album(this.GetAlbumById(entity.AlbumId()));\n            }\n            for (var _b = 0, _c = this.Jobs(); _b < _c.length; _b++) {\n                var entity = _c[_b];\n                if (entity.AssignedToId() !== undefined)\n                    entity.AssignedTo(this.GetPersonById(entity.AssignedToId()));\n                if (entity.TripId() !== undefined)\n                    entity.Trip(this.GetTripById(entity.TripId()));\n                if (entity.SuperJobId() !== undefined) {\n                    entity.SuperJob(this.GetJobById(entity.SuperJobId()));\n                    entity.SuperJob().SubJobs.push(entity);\n                }\n            }\n            for (var _d = 0, _e = this.Locations(); _d < _e.length; _d++) {\n                var entity = _e[_d];\n                entity.Address(this.GetAddressById(entity.AddressId()));\n                this.GetHarbourById(entity.HarbourId()).Locations.push(entity);\n            }\n            for (var _f = 0, _g = this.Images(); _f < _g.length; _f++) {\n                var entity = _g[_f];\n                this.GetAlbumById(entity.AlbumId()).Images.push(entity);\n            }\n            //for (let entity of this.Tacks()) {\n            //    entity.(this.GetAlbumById(entity.AlbumId()));\n            //}\n            //for (let entity of this.Harbours()) {\n            //    entity.Album(this.GetAlbumById(entity.AlbumId()));\n            //}\n            //for (let entity of this.Harbours()) {\n            //    entity.Album(this.GetAlbumById(entity.AlbumId()));\n            //}\n            $(\"#loadingOverlay\").remove();\n        }\n    };\n    MapViewModel.prototype.GetWaypointById = function (id) {\n        for (var _i = 0, _a = this.Waypoints(); _i < _a.length; _i++) {\n            var entity = _a[_i];\n            if (entity.Id() === id)\n                return entity;\n        }\n        for (var _b = 0, _c = this.Harbours(); _b < _c.length; _b++) {\n            var entity = _c[_b];\n            if (entity.Id() === id)\n                return entity;\n        }\n        //throw \"No Waypoint with id \" + id + \" found\";\n    };\n    MapViewModel.prototype.GetHarbourById = function (id) {\n        for (var _i = 0, _a = this.Harbours(); _i < _a.length; _i++) {\n            var entity = _a[_i];\n            if (entity.Id() === id)\n                return entity;\n        }\n        //throw \"No Harbour with id \" + id + \" found\";\n    };\n    MapViewModel.prototype.GetPersonById = function (id) {\n        for (var _i = 0, _a = this.Persons(); _i < _a.length; _i++) {\n            var entity = _a[_i];\n            if (entity.Id() === id)\n                return entity;\n        }\n        //throw \"No Person with id \" + id + \" found\";\n    };\n    MapViewModel.prototype.GetJobById = function (id) {\n        for (var _i = 0, _a = this.Jobs(); _i < _a.length; _i++) {\n            var entity = _a[_i];\n            if (entity.Id() === id)\n                return entity;\n        }\n        //throw \"No Job with id \" + id + \" found\";\n    };\n    MapViewModel.prototype.GetTripById = function (id) {\n        for (var _i = 0, _a = this.Trips(); _i < _a.length; _i++) {\n            var entity = _a[_i];\n            if (entity.Id() === id)\n                return entity;\n        }\n        //throw \"No Trip with id \" + id + \" found\";\n    };\n    MapViewModel.prototype.GetAddressById = function (id) {\n        for (var _i = 0, _a = this.Addresses(); _i < _a.length; _i++) {\n            var entity = _a[_i];\n            if (entity.Id() === id)\n                return entity;\n        }\n        //throw \"No Address with id \" + id + \" found\";\n    };\n    MapViewModel.prototype.GetImageById = function (id) {\n        for (var _i = 0, _a = this.Images(); _i < _a.length; _i++) {\n            var entity = _a[_i];\n            if (entity.Id() === id)\n                return entity;\n        }\n        //throw \"No Image with id \" + id + \" found\";\n    };\n    MapViewModel.prototype.GetAlbumById = function (id) {\n        for (var _i = 0, _a = this.Albums(); _i < _a.length; _i++) {\n            var entity = _a[_i];\n            if (entity.Id() === id)\n                return entity;\n        }\n        //throw \"No Album with id \" + id + \" found\";\n    };\n    MapViewModel.prototype.GetTackById = function (id) {\n        for (var _i = 0, _a = this.Tacks(); _i < _a.length; _i++) {\n            var entity = _a[_i];\n            if (entity.Id() === id)\n                return entity;\n        }\n        //throw \"No Tack with id \" + id + \" found\";\n    };\n    MapViewModel.prototype.GetLocationById = function (id) {\n        for (var _i = 0, _a = this.Locations(); _i < _a.length; _i++) {\n            var entity = _a[_i];\n            if (entity.Id() === id)\n                return entity;\n        }\n        for (var _b = 0, _c = this.Restaurants(); _b < _c.length; _b++) {\n            var entity = _c[_b];\n            if (entity.Id() === id)\n                return entity;\n        }\n        for (var _d = 0, _e = this.Restaurants(); _d < _e.length; _d++) {\n            var entity = _e[_d];\n            if (entity.Id() === id)\n                return entity;\n        }\n        //throw \"No Location with id \" + id + \" found\";\n    };\n    return MapViewModel;\n}());\nvar mapViewModel = new MapViewModel();\nko.applyBindings(mapViewModel);\nvar dropzoneModalOpenedByDrag = false;\nvar dropzoneModal = $(\"#dropzoneModal\");\nvar dropzone;\nDropzone.options.dropzone =\n    {\n        acceptedFiles: \"image/jpeg,image/png\",\n        dictInvalidFileType: \"Dieser Dateityp wird nicht untersttzt\",\n        dictDefaultMessage: \"Dateien hier ablegen\",\n        init: function () {\n            dropzone = this;\n            dropzone.on(\"success\", function (e, data) {\n                var image = new ClientModel.Image().LoadFromServerEntity(data);\n                mapViewModel.Images.push(image);\n                mapViewModel.GetAlbumById(image.AlbumId()).Images.push(image);\n            });\n            dropzone.on(\"queuecomplete\", function () {\n                if (dropzoneModalOpenedByDrag)\n                    dropzoneModal.modal(\"hide\");\n                dropzoneModalOpenedByDrag = false;\n            });\n        }\n    };\ndocument.ondragenter =\n    function (e) {\n        if (dropzoneModal.is(\":not(.in)\") && e.dataTransfer.types[0] === \"Files\" && mapViewModel.SelectedHarbour() !== undefined) {\n            dropzoneModal.modal(\"show\");\n            dropzoneModalOpenedByDrag = true;\n        }\n        e.preventDefault();\n        e.stopPropagation();\n    };\ndropzoneModal.on(\"hide.bs.modal\", function (e) {\n    if (dropzone.getQueuedFiles().length > 0 || dropzone.getUploadingFiles().length > 0) {\n        e.preventDefault();\n        e.stopImmediatePropagation();\n        alert(\"Das Fenster kann nicht geschlossen werden, whrend Dateien hochgeladen werden.\");\n        return false;\n    }\n    else {\n        dropzone.removeAllFiles();\n    }\n});\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlZpZXdNb2RlbHMvSG9tZS9NYXAudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBTyxRQUFRLEdBQUcsV0FBVyxDQUFDLE9BQU8sQ0FBQztBQUV0QztJQUNJO1FBREosaUJBb1NDO1FBdkNHLG9CQUFlLEdBQUcsS0FBSyxDQUFDO1FBQ3hCLDhCQUF5QixHQUFHLEtBQUssQ0FBQztRQUNsQyxrQkFBYSxHQUFHLEtBQUssQ0FBQztRQUN0QixlQUFVLEdBQUcsS0FBSyxDQUFDO1FBQ25CLGdCQUFXLEdBQUcsS0FBSyxDQUFDO1FBQ3BCLG9CQUFlLEdBQUcsS0FBSyxDQUFDO1FBQ3hCLGlCQUFZLEdBQUcsS0FBSyxDQUFDO1FBQ3JCLGlCQUFZLEdBQUcsS0FBSyxDQUFDO1FBQ3JCLHdCQUFtQixHQUFHLEtBQUssQ0FBQztRQUM1QixnQkFBVyxHQUFHLEtBQUssQ0FBQztRQUNwQixvQkFBZSxHQUFHLEtBQUssQ0FBQztRQUV4QixjQUFTLEdBQUcsRUFBRSxDQUFDLGVBQWUsRUFBd0IsQ0FBQztRQUN2RCx3QkFBbUIsR0FBRyxFQUFFLENBQUMsZUFBZSxFQUFrQyxDQUFDO1FBQzNFLGFBQVEsR0FBRyxFQUFFLENBQUMsZUFBZSxFQUF1QixDQUFDO1FBQ3JELFlBQU8sR0FBRyxFQUFFLENBQUMsZUFBZSxFQUFzQixDQUFDO1FBQ25ELFNBQUksR0FBRyxFQUFFLENBQUMsZUFBZSxFQUFtQixDQUFDO1FBQzdDLFVBQUssR0FBRyxFQUFFLENBQUMsZUFBZSxFQUFvQixDQUFDO1FBQy9DLGNBQVMsR0FBRyxFQUFFLENBQUMsZUFBZSxFQUF1QixDQUFDO1FBQ3RELFdBQU0sR0FBRyxFQUFFLENBQUMsZUFBZSxFQUFxQixDQUFDO1FBQ2pELFdBQU0sR0FBRyxFQUFFLENBQUMsZUFBZSxFQUFxQixDQUFDO1FBQ2pELFVBQUssR0FBRyxFQUFFLENBQUMsZUFBZSxFQUFvQixDQUFDO1FBQy9DLGNBQVMsR0FBRyxFQUFFLENBQUMsZUFBZSxFQUF3QixDQUFDO1FB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SUFBSSxDQUFDLENBQUM7UUFDSixRQUFRLENBQUMsY0FBYyxFQUFFLENBQUM7SUFDOUIsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwiZmlsZSI6IlZpZXdNb2RlbHMvSG9tZS9NYXAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgU0hhcmJvdXIgPSBTZXJ2ZXJNb2RlbC5IYXJib3VyO1xyXG5cclxuY2xhc3MgTWFwVmlld01vZGVsIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIEwubWFwYm94XHJcbiAgICAgICAgICAgIC5hY2Nlc3NUb2tlbiA9XHJcbiAgICAgICAgICAgIFwicGsuZXlKMUlqb2laR0Z1YVdWc0xXdDFiMjRpTENKaElqb2lZMmxsZG5WdFkyOWlNREJpT0hReGJUQnZaekJxWldsNmNDSjkuVUVjMllxSDU5cEIxWVRwdjIydmc4QVwiO1xyXG4gICAgICAgIHRoaXMuTWFwID0gTC5tYXBib3gubWFwKFwibWFwXCIsIFwibWFwYm94LnN0cmVldHNcIilcclxuICAgICAgICAgICAgLnNldFZpZXcoWzUxLCAxMF0sIDkpIGFzIGFueTtcclxuXHJcbiAgICAgICAgdGhpcy5TZWxlY3RlZEhhcmJvdXIuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIFNlcnZlckFwaS5XYXlwb2ludEFwaS5HZXREZWZhdWx0KClcclxuICAgICAgICAgICAgLkdldCgpXHJcbiAgICAgICAgICAgIC5kb25lKGQgPT4ge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgc0VudGl0eSBvZiBkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNFbnRpdHkuVHlwZSA9PT0gU2VydmVyTW9kZWwuV2F5cG9pbnQuR2V0VHlwZSgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLldheXBvaW50cy5wdXNoKG5ldyBDbGllbnRNb2RlbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLldheXBvaW50KEwubGF0TG5nKHNFbnRpdHkuTGF0aXR1ZGUsIHNFbnRpdHkuTG9uZ2l0dWRlKSwgTWFya2VyVHlwZS5XYXlwb2ludCwgdGhpcy5NYXApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuTG9hZEZyb21TZXJ2ZXJFbnRpdHkoc0VudGl0eSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNFbnRpdHkuVHlwZSA9PT0gU2VydmVyTW9kZWwuSGFyYm91ci5HZXRUeXBlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFyYm91ciA9IG5ldyBDbGllbnRNb2RlbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLkhhcmJvdXIoc0VudGl0eS5OYW1lLCBMLmxhdExuZyhzRW50aXR5LkxhdGl0dWRlLCBzRW50aXR5LkxvbmdpdHVkZSksIHRoaXMuTWFwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLkxvYWRGcm9tU2VydmVyRW50aXR5KHNFbnRpdHkgYXMgU0hhcmJvdXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXJib3VyLm1hcmtlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLlNlbGVjdGVkSGFyYm91cihoYXJib3VyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLkhhcmJvdXJzLnB1c2goaGFyYm91cik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5XYXlwb2ludHNMb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5Jbml0aWFsaXplTW9kZWwoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgU2VydmVyQXBpLldheXBvaW50Q29ubmVjdGlvbkFwaS5HZXREZWZhdWx0KClcclxuICAgICAgICAgICAgLkdldCgpXHJcbiAgICAgICAgICAgIC5kb25lKGQgPT4ge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgc0VudGl0eSBvZiBkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5XYXlwb2ludENvbm5lY3Rpb25zLnB1c2goc0VudGl0eSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLldheXBvaW50Q29ubmVjdGlvbnNMb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5Jbml0aWFsaXplTW9kZWwoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgU2VydmVyQXBpLlBlcnNvbkFwaS5HZXREZWZhdWx0KClcclxuICAgICAgICAgICAgLkdldCgpXHJcbiAgICAgICAgICAgIC5kb25lKGQgPT4ge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgc0VudGl0eSBvZiBkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5QZXJzb25zLnB1c2gobmV3IENsaWVudE1vZGVsLlBlcnNvbigpLkxvYWRGcm9tU2VydmVyRW50aXR5KHNFbnRpdHkpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuUGVyc29uc0xvYWRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkluaXRpYWxpemVNb2RlbCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICBTZXJ2ZXJBcGkuSm9iQXBpLkdldERlZmF1bHQoKVxyXG4gICAgICAgICAgICAuR2V0KClcclxuICAgICAgICAgICAgLmRvbmUoZCA9PiB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBzRW50aXR5IG9mIGQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkpvYnMucHVzaChuZXcgQ2xpZW50TW9kZWwuSm9iKCkuTG9hZEZyb21TZXJ2ZXJFbnRpdHkoc0VudGl0eSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5Kb2JzTG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuSW5pdGlhbGl6ZU1vZGVsKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIFNlcnZlckFwaS5UcmlwQXBpLkdldERlZmF1bHQoKVxyXG4gICAgICAgICAgICAuR2V0KClcclxuICAgICAgICAgICAgLmRvbmUoZCA9PiB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBzRW50aXR5IG9mIGQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLlRyaXBzLnB1c2gobmV3IENsaWVudE1vZGVsLlRyaXAoKS5Mb2FkRnJvbVNlcnZlckVudGl0eShzRW50aXR5KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLlRyaXBzTG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuSW5pdGlhbGl6ZU1vZGVsKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIFNlcnZlckFwaS5BZGRyZXNzQXBpLkdldERlZmF1bHQoKVxyXG4gICAgICAgICAgICAuR2V0KClcclxuICAgICAgICAgICAgLmRvbmUoZCA9PiB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBzRW50aXR5IG9mIGQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkFkZHJlc3Nlcy5wdXNoKG5ldyBDbGllbnRNb2RlbC5BZGRyZXNzKCkuTG9hZEZyb21TZXJ2ZXJFbnRpdHkoc0VudGl0eSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5BZGRyZXNzZXNMb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5Jbml0aWFsaXplTW9kZWwoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgU2VydmVyQXBpLkltYWdlQXBpLkdldERlZmF1bHQoKVxyXG4gICAgICAgICAgICAuR2V0KClcclxuICAgICAgICAgICAgLmRvbmUoZCA9PiB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBzRW50aXR5IG9mIGQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkltYWdlcy5wdXNoKG5ldyBDbGllbnRNb2RlbC5JbWFnZSgpLkxvYWRGcm9tU2VydmVyRW50aXR5KHNFbnRpdHkpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuSW1hZ2VzTG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuSW5pdGlhbGl6ZU1vZGVsKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIFNlcnZlckFwaS5BbGJ1bUFwaS5HZXREZWZhdWx0KClcclxuICAgICAgICAgICAgLkdldCgpXHJcbiAgICAgICAgICAgIC5kb25lKGQgPT4ge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgc0VudGl0eSBvZiBkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5BbGJ1bXMucHVzaChuZXcgQ2xpZW50TW9kZWwuQWxidW0oKS5Mb2FkRnJvbVNlcnZlckVudGl0eShzRW50aXR5KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLkFsYnVtc0xvYWRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkluaXRpYWxpemVNb2RlbCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAvL1NlcnZlckFwaS5XYXlwb2ludFRhY2tBcGkuR2V0RGVmYXVsdCgpLkdldCgpLmRvbmUoZCA9PiB7XHJcbiAgICAgICAgLy8gICAgZm9yIChsZXQgc0VudGl0eSBvZiBkKSB7IHRoaXMuV2F5cG9pbnRUYWNrcy5wdXNoKG5ldyBDbGllbnRNb2RlbC5XYXlwb2ludFRhY2soKS5Mb2FkRnJvbVNlcnZlckVudGl0eShzRW50aXR5KSk7IH1cclxuICAgICAgICAvLyAgICB0aGlzLldheXBvaW50VGFja3NMb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgIC8vICAgIHRoaXMuSW5pdGlhbG96ZU1vZGVsKCk7XHJcbiAgICAgICAgLy99KTtcclxuICAgICAgICBTZXJ2ZXJBcGkuVGFja0FwaS5HZXREZWZhdWx0KClcclxuICAgICAgICAgICAgLkdldCgpXHJcbiAgICAgICAgICAgIC5kb25lKGQgPT4ge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgc0VudGl0eSBvZiBkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5UYWNrcy5wdXNoKG5ldyBDbGllbnRNb2RlbC5UYWNrKCkuTG9hZEZyb21TZXJ2ZXJFbnRpdHkoc0VudGl0eSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5UYWNrc0xvYWRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkluaXRpYWxpemVNb2RlbCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICBTZXJ2ZXJBcGkuTG9jYXRpb25BcGkuR2V0RGVmYXVsdCgpXHJcbiAgICAgICAgICAgIC5HZXQoKVxyXG4gICAgICAgICAgICAuZG9uZShkID0+IHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHNFbnRpdHkgb2YgZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzRW50aXR5LlR5cGUgPT09IFNlcnZlck1vZGVsLkxvY2F0aW9uLkdldFR5cGUoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5Mb2NhdGlvbnMucHVzaChuZXcgQ2xpZW50TW9kZWwuTG9jYXRpb24oKS5Mb2FkRnJvbVNlcnZlckVudGl0eShzRW50aXR5KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc0VudGl0eS5UeXBlID09PSBTZXJ2ZXJNb2RlbC5SZXN0YXVyYW50LkdldFR5cGUoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5SZXN0YXVyYW50cy5wdXNoKG5ldyBDbGllbnRNb2RlbC5SZXN0YXVyYW50KCkuTG9hZEZyb21TZXJ2ZXJFbnRpdHkoc0VudGl0eSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNFbnRpdHkuVHlwZSA9PT0gU2VydmVyTW9kZWwuU3VwZXJtYXJrZXQuR2V0VHlwZSgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLlN1cGVybWFya2V0cy5wdXNoKG5ldyBDbGllbnRNb2RlbC5TdXBlcm1hcmtldCgpLkxvYWRGcm9tU2VydmVyRW50aXR5KHNFbnRpdHkpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuTG9jYXRpb25zTG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuSW5pdGlhbGl6ZU1vZGVsKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIEluaXRpYWxpemVNb2RlbCgpIHtcclxuICAgICAgICBpZiAodGhpcy5XYXlwb2ludHNMb2FkZWQgJiZcclxuICAgICAgICAgICAgdGhpcy5XYXlwb2ludENvbm5lY3Rpb25zTG9hZGVkICYmXHJcbiAgICAgICAgICAgIHRoaXMuUGVyc29uc0xvYWRlZCAmJlxyXG4gICAgICAgICAgICB0aGlzLkpvYnNMb2FkZWQgJiZcclxuICAgICAgICAgICAgdGhpcy5Ucmlwc0xvYWRlZCAmJlxyXG4gICAgICAgICAgICB0aGlzLkFkZHJlc3Nlc0xvYWRlZCAmJlxyXG4gICAgICAgICAgICB0aGlzLkltYWdlc0xvYWRlZCAmJlxyXG4gICAgICAgICAgICB0aGlzLkFsYnVtc0xvYWRlZCAmJlxyXG4gICAgICAgICAgICAvL3RoaXMuV2F5cG9pbnRUYWNrc0xvYWRlZCAmJlxyXG4gICAgICAgICAgICB0aGlzLlRhY2tzTG9hZGVkICYmXHJcbiAgICAgICAgICAgIHRoaXMuTG9jYXRpb25zTG9hZGVkKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGVudGl0eSBvZiB0aGlzLkhhcmJvdXJzKCkpIHtcclxuICAgICAgICAgICAgICAgIGVudGl0eS5BbGJ1bSh0aGlzLkdldEFsYnVtQnlJZChlbnRpdHkuQWxidW1JZCgpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yIChsZXQgZW50aXR5IG9mIHRoaXMuSm9icygpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZW50aXR5LkFzc2lnbmVkVG9JZCgpICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LkFzc2lnbmVkVG8odGhpcy5HZXRQZXJzb25CeUlkKGVudGl0eS5Bc3NpZ25lZFRvSWQoKSkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVudGl0eS5UcmlwSWQoKSAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS5UcmlwKHRoaXMuR2V0VHJpcEJ5SWQoZW50aXR5LlRyaXBJZCgpKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZW50aXR5LlN1cGVySm9iSWQoKSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LlN1cGVySm9iKHRoaXMuR2V0Sm9iQnlJZChlbnRpdHkuU3VwZXJKb2JJZCgpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5LlN1cGVySm9iKCkuU3ViSm9icy5wdXNoKGVudGl0eSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yIChsZXQgZW50aXR5IG9mIHRoaXMuTG9jYXRpb25zKCkpIHtcclxuICAgICAgICAgICAgICAgIGVudGl0eS5BZGRyZXNzKHRoaXMuR2V0QWRkcmVzc0J5SWQoZW50aXR5LkFkZHJlc3NJZCgpKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkdldEhhcmJvdXJCeUlkKGVudGl0eS5IYXJib3VySWQoKSkuTG9jYXRpb25zLnB1c2goZW50aXR5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKGxldCBlbnRpdHkgb2YgdGhpcy5JbWFnZXMoKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5HZXRBbGJ1bUJ5SWQoZW50aXR5LkFsYnVtSWQoKSkuSW1hZ2VzLnB1c2goZW50aXR5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL2ZvciAobGV0IGVudGl0eSBvZiB0aGlzLlRhY2tzKCkpIHtcclxuICAgICAgICAgICAgLy8gICAgZW50aXR5Lih0aGlzLkdldEFsYnVtQnlJZChlbnRpdHkuQWxidW1JZCgpKSk7XHJcbiAgICAgICAgICAgIC8vfVxyXG4gICAgICAgICAgICAvL2ZvciAobGV0IGVudGl0eSBvZiB0aGlzLkhhcmJvdXJzKCkpIHtcclxuICAgICAgICAgICAgLy8gICAgZW50aXR5LkFsYnVtKHRoaXMuR2V0QWxidW1CeUlkKGVudGl0eS5BbGJ1bUlkKCkpKTtcclxuICAgICAgICAgICAgLy99XHJcbiAgICAgICAgICAgIC8vZm9yIChsZXQgZW50aXR5IG9mIHRoaXMuSGFyYm91cnMoKSkge1xyXG4gICAgICAgICAgICAvLyAgICBlbnRpdHkuQWxidW0odGhpcy5HZXRBbGJ1bUJ5SWQoZW50aXR5LkFsYnVtSWQoKSkpO1xyXG4gICAgICAgICAgICAvL31cclxuICAgICAgICAgICAgJChcIiNsb2FkaW5nT3ZlcmxheVwiKS5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgTWFwOiBMLm1hcGJveC5NYXA7XHJcblxyXG4gICAgR2V0V2F5cG9pbnRCeUlkKGlkOiBudW1iZXIpOiBDbGllbnRNb2RlbC5XYXlwb2ludCB7XHJcbiAgICAgICAgZm9yIChsZXQgZW50aXR5IG9mIHRoaXMuV2F5cG9pbnRzKCkpIHtcclxuICAgICAgICAgICAgaWYgKGVudGl0eS5JZCgpID09PSBpZCkgcmV0dXJuIGVudGl0eTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChsZXQgZW50aXR5IG9mIHRoaXMuSGFyYm91cnMoKSkge1xyXG4gICAgICAgICAgICBpZiAoZW50aXR5LklkKCkgPT09IGlkKSByZXR1cm4gZW50aXR5O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL3Rocm93IFwiTm8gV2F5cG9pbnQgd2l0aCBpZCBcIiArIGlkICsgXCIgZm91bmRcIjtcclxuICAgIH1cclxuXHJcbiAgICBHZXRIYXJib3VyQnlJZChpZDogbnVtYmVyKTogQ2xpZW50TW9kZWwuSGFyYm91ciB7XHJcbiAgICAgICAgZm9yIChsZXQgZW50aXR5IG9mIHRoaXMuSGFyYm91cnMoKSkge1xyXG4gICAgICAgICAgICBpZiAoZW50aXR5LklkKCkgPT09IGlkKSByZXR1cm4gZW50aXR5O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL3Rocm93IFwiTm8gSGFyYm91ciB3aXRoIGlkIFwiICsgaWQgKyBcIiBmb3VuZFwiO1xyXG4gICAgfVxyXG5cclxuICAgIEdldFBlcnNvbkJ5SWQoaWQ6IG51bWJlcik6IENsaWVudE1vZGVsLlBlcnNvbiB7XHJcbiAgICAgICAgZm9yIChsZXQgZW50aXR5IG9mIHRoaXMuUGVyc29ucygpKSB7XHJcbiAgICAgICAgICAgIGlmIChlbnRpdHkuSWQoKSA9PT0gaWQpIHJldHVybiBlbnRpdHk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vdGhyb3cgXCJObyBQZXJzb24gd2l0aCBpZCBcIiArIGlkICsgXCIgZm91bmRcIjtcclxuICAgIH1cclxuXHJcbiAgICBHZXRKb2JCeUlkKGlkOiBudW1iZXIpOiBDbGllbnRNb2RlbC5Kb2Ige1xyXG4gICAgICAgIGZvciAobGV0IGVudGl0eSBvZiB0aGlzLkpvYnMoKSkge1xyXG4gICAgICAgICAgICBpZiAoZW50aXR5LklkKCkgPT09IGlkKSByZXR1cm4gZW50aXR5O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL3Rocm93IFwiTm8gSm9iIHdpdGggaWQgXCIgKyBpZCArIFwiIGZvdW5kXCI7XHJcbiAgICB9XHJcblxyXG4gICAgR2V0VHJpcEJ5SWQoaWQ6IG51bWJlcik6IENsaWVudE1vZGVsLlRyaXAge1xyXG4gICAgICAgIGZvciAobGV0IGVudGl0eSBvZiB0aGlzLlRyaXBzKCkpIHtcclxuICAgICAgICAgICAgaWYgKGVudGl0eS5JZCgpID09PSBpZCkgcmV0dXJuIGVudGl0eTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy90aHJvdyBcIk5vIFRyaXAgd2l0aCBpZCBcIiArIGlkICsgXCIgZm91bmRcIjtcclxuICAgIH1cclxuXHJcbiAgICBHZXRBZGRyZXNzQnlJZChpZDogbnVtYmVyKTogQ2xpZW50TW9kZWwuQWRkcmVzcyB7XHJcbiAgICAgICAgZm9yIChsZXQgZW50aXR5IG9mIHRoaXMuQWRkcmVzc2VzKCkpIHtcclxuICAgICAgICAgICAgaWYgKGVudGl0eS5JZCgpID09PSBpZCkgcmV0dXJuIGVudGl0eTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy90aHJvdyBcIk5vIEFkZHJlc3Mgd2l0aCBpZCBcIiArIGlkICsgXCIgZm91bmRcIjtcclxuICAgIH1cclxuXHJcbiAgICBHZXRJbWFnZUJ5SWQoaWQ6IG51bWJlcik6IENsaWVudE1vZGVsLkltYWdlIHtcclxuICAgICAgICBmb3IgKGxldCBlbnRpdHkgb2YgdGhpcy5JbWFnZXMoKSkge1xyXG4gICAgICAgICAgICBpZiAoZW50aXR5LklkKCkgPT09IGlkKSByZXR1cm4gZW50aXR5O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL3Rocm93IFwiTm8gSW1hZ2Ugd2l0aCBpZCBcIiArIGlkICsgXCIgZm91bmRcIjtcclxuICAgIH1cclxuXHJcbiAgICBHZXRBbGJ1bUJ5SWQoaWQ6IG51bWJlcik6IENsaWVudE1vZGVsLkFsYnVtIHtcclxuICAgICAgICBmb3IgKGxldCBlbnRpdHkgb2YgdGhpcy5BbGJ1bXMoKSkge1xyXG4gICAgICAgICAgICBpZiAoZW50aXR5LklkKCkgPT09IGlkKSByZXR1cm4gZW50aXR5O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL3Rocm93IFwiTm8gQWxidW0gd2l0aCBpZCBcIiArIGlkICsgXCIgZm91bmRcIjtcclxuICAgIH1cclxuXHJcbiAgICBHZXRUYWNrQnlJZChpZDogbnVtYmVyKTogQ2xpZW50TW9kZWwuVGFjayB7XHJcbiAgICAgICAgZm9yIChsZXQgZW50aXR5IG9mIHRoaXMuVGFja3MoKSkge1xyXG4gICAgICAgICAgICBpZiAoZW50aXR5LklkKCkgPT09IGlkKSByZXR1cm4gZW50aXR5O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL3Rocm93IFwiTm8gVGFjayB3aXRoIGlkIFwiICsgaWQgKyBcIiBmb3VuZFwiO1xyXG4gICAgfVxyXG5cclxuICAgIEdldExvY2F0aW9uQnlJZChpZDogbnVtYmVyKTogQ2xpZW50TW9kZWwuTG9jYXRpb24ge1xyXG4gICAgICAgIGZvciAobGV0IGVudGl0eSBvZiB0aGlzLkxvY2F0aW9ucygpKSB7XHJcbiAgICAgICAgICAgIGlmIChlbnRpdHkuSWQoKSA9PT0gaWQpIHJldHVybiBlbnRpdHk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAobGV0IGVudGl0eSBvZiB0aGlzLlJlc3RhdXJhbnRzKCkpIHtcclxuICAgICAgICAgICAgaWYgKGVudGl0eS5JZCgpID09PSBpZCkgcmV0dXJuIGVudGl0eTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChsZXQgZW50aXR5IG9mIHRoaXMuUmVzdGF1cmFudHMoKSkge1xyXG4gICAgICAgICAgICBpZiAoZW50aXR5LklkKCkgPT09IGlkKSByZXR1cm4gZW50aXR5O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL3Rocm93IFwiTm8gTG9jYXRpb24gd2l0aCBpZCBcIiArIGlkICsgXCIgZm91bmRcIjtcclxuICAgIH1cclxuXHJcbiAgICBXYXlwb2ludHNMb2FkZWQgPSBmYWxzZTtcclxuICAgIFdheXBvaW50Q29ubmVjdGlvbnNMb2FkZWQgPSBmYWxzZTtcclxuICAgIFBlcnNvbnNMb2FkZWQgPSBmYWxzZTtcclxuICAgIEpvYnNMb2FkZWQgPSBmYWxzZTtcclxuICAgIFRyaXBzTG9hZGVkID0gZmFsc2U7XHJcbiAgICBBZGRyZXNzZXNMb2FkZWQgPSBmYWxzZTtcclxuICAgIEltYWdlc0xvYWRlZCA9IGZhbHNlO1xyXG4gICAgQWxidW1zTG9hZGVkID0gZmFsc2U7XHJcbiAgICBXYXlwb2ludFRhY2tzTG9hZGVkID0gZmFsc2U7XHJcbiAgICBUYWNrc0xvYWRlZCA9IGZhbHNlO1xyXG4gICAgTG9jYXRpb25zTG9hZGVkID0gZmFsc2U7XHJcblxyXG4gICAgV2F5cG9pbnRzID0ga28ub2JzZXJ2YWJsZUFycmF5PENsaWVudE1vZGVsLldheXBvaW50PigpO1xyXG4gICAgV2F5cG9pbnRDb25uZWN0aW9ucyA9IGtvLm9ic2VydmFibGVBcnJheTxTZXJ2ZXJNb2RlbC5XYXlwb2ludENvbm5lY3Rpb24+KCk7XHJcbiAgICBIYXJib3VycyA9IGtvLm9ic2VydmFibGVBcnJheTxDbGllbnRNb2RlbC5IYXJib3VyPigpO1xyXG4gICAgUGVyc29ucyA9IGtvLm9ic2VydmFibGVBcnJheTxDbGllbnRNb2RlbC5QZXJzb24+KCk7XHJcbiAgICBKb2JzID0ga28ub2JzZXJ2YWJsZUFycmF5PENsaWVudE1vZGVsLkpvYj4oKTtcclxuICAgIFRyaXBzID0ga28ub2JzZXJ2YWJsZUFycmF5PENsaWVudE1vZGVsLlRyaXA+KCk7XHJcbiAgICBBZGRyZXNzZXMgPSBrby5vYnNlcnZhYmxlQXJyYXk8Q2xpZW50TW9kZWwuQWRkcmVzcz4oKTtcclxuICAgIEltYWdlcyA9IGtvLm9ic2VydmFibGVBcnJheTxDbGllbnRNb2RlbC5JbWFnZT4oKTtcclxuICAgIEFsYnVtcyA9IGtvLm9ic2VydmFibGVBcnJheTxDbGllbnRNb2RlbC5BbGJ1bT4oKTtcclxuICAgIFRhY2tzID0ga28ub2JzZXJ2YWJsZUFycmF5PENsaWVudE1vZGVsLlRhY2s+KCk7XHJcbiAgICBMb2NhdGlvbnMgPSBrby5vYnNlcnZhYmxlQXJyYXk8Q2xpZW50TW9kZWwuTG9jYXRpb24+KCk7XHJcbiAgICBTdXBlcm1hcmtldHMgPSBrby5vYnNlcnZhYmxlQXJyYXk8Q2xpZW50TW9kZWwuU3VwZXJtYXJrZXQ+KCk7XHJcbiAgICBSZXN0YXVyYW50cyA9IGtvLm9ic2VydmFibGVBcnJheTxDbGllbnRNb2RlbC5SZXN0YXVyYW50PigpO1xyXG5cclxuXHJcbiAgICBTZWxlY3RlZFdheXBvaW50ID0ga28ub2JzZXJ2YWJsZTxDbGllbnRNb2RlbC5XYXlwb2ludD4oKTtcclxuICAgIFNlbGVjdGVkSGFyYm91ciA9IGtvLm9ic2VydmFibGU8Q2xpZW50TW9kZWwuSGFyYm91cj4oKTtcclxuICAgIFNlbGVjdGVkUGVyc29uID0ga28ub2JzZXJ2YWJsZTxDbGllbnRNb2RlbC5QZXJzb24+KCk7XHJcbiAgICBTZWxlY3RlZEpvYiA9IGtvLm9ic2VydmFibGU8Q2xpZW50TW9kZWwuSm9iPigpO1xyXG4gICAgU2VsZWN0ZWRUcmlwID0ga28ub2JzZXJ2YWJsZTxDbGllbnRNb2RlbC5UcmlwPigpO1xyXG4gICAgU2VsZWN0ZWRBZGRyZXNzID0ga28ub2JzZXJ2YWJsZTxDbGllbnRNb2RlbC5BZGRyZXNzPigpO1xyXG4gICAgU2VsZWN0ZWRJbWFnZSA9IGtvLm9ic2VydmFibGU8Q2xpZW50TW9kZWwuSW1hZ2U+KCk7XHJcbiAgICBTZWxlY3RlZEFsYnVtID0ga28ub2JzZXJ2YWJsZTxDbGllbnRNb2RlbC5BbGJ1bT4oKTtcclxuICAgIFNlbGVjdGVkVGFjayA9IGtvLm9ic2VydmFibGU8Q2xpZW50TW9kZWwuVGFjaz4oKTtcclxuICAgIFNlbGVjdGVkTG9jYXRpb24gPSBrby5vYnNlcnZhYmxlPENsaWVudE1vZGVsLkxvY2F0aW9uPigpO1xyXG4gICAgU2VsZWN0ZWRTdXBlcm1hcmtldCA9IGtvLm9ic2VydmFibGU8Q2xpZW50TW9kZWwuU3VwZXJtYXJrZXQ+KCk7XHJcbiAgICBTZWxlY3RlZFJlc3RhdXJhbnQgPSBrby5vYnNlcnZhYmxlPENsaWVudE1vZGVsLlJlc3RhdXJhbnQ+KCk7XHJcbn1cclxuXHJcbnZhciBtYXBWaWV3TW9kZWwgPSBuZXcgTWFwVmlld01vZGVsKCk7XHJcbmtvLmFwcGx5QmluZGluZ3MobWFwVmlld01vZGVsKTtcclxudmFyIGRyb3B6b25lTW9kYWxPcGVuZWRCeURyYWcgPSBmYWxzZTtcclxuXHJcbnZhciBkcm9wem9uZU1vZGFsID0gJChcIiNkcm9wem9uZU1vZGFsXCIpO1xyXG52YXIgZHJvcHpvbmU6IERyb3B6b25lO1xyXG5Ecm9wem9uZS5vcHRpb25zLmRyb3B6b25lPVxyXG57XHJcbiAgICBhY2NlcHRlZEZpbGVzOiBcImltYWdlL2pwZWcsaW1hZ2UvcG5nXCIsXHJcbiAgICBkaWN0SW52YWxpZEZpbGVUeXBlOiBcIkRpZXNlciBEYXRlaXR5cCB3aXJkIG5pY2h0IHVudGVyc3TDvHR6dFwiLFxyXG4gICAgZGljdERlZmF1bHRNZXNzYWdlOiBcIkRhdGVpZW4gaGllciBhYmxlZ2VuXCIsXHJcbiAgICBpbml0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICBkcm9wem9uZSA9IHRoaXM7XHJcbiAgICAgICAgZHJvcHpvbmUub24oXCJzdWNjZXNzXCIsXHJcbiAgICAgICAgKGUsIGRhdGE6IFNlcnZlck1vZGVsLkltYWdlKSA9PiB7XHJcbiAgICAgICAgICAgIHZhciBpbWFnZSA9IG5ldyBDbGllbnRNb2RlbC5JbWFnZSgpLkxvYWRGcm9tU2VydmVyRW50aXR5KGRhdGEpO1xyXG4gICAgICAgICAgICBtYXBWaWV3TW9kZWwuSW1hZ2VzLnB1c2goaW1hZ2UpO1xyXG4gICAgICAgICAgICBtYXBWaWV3TW9kZWwuR2V0QWxidW1CeUlkKGltYWdlLkFsYnVtSWQoKSkuSW1hZ2VzLnB1c2goaW1hZ2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRyb3B6b25lLm9uKFwicXVldWVjb21wbGV0ZVwiLFxyXG4gICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGRyb3B6b25lTW9kYWxPcGVuZWRCeURyYWcpXHJcbiAgICAgICAgICAgICAgICBkcm9wem9uZU1vZGFsLm1vZGFsKFwiaGlkZVwiKTtcclxuICAgICAgICAgICAgZHJvcHpvbmVNb2RhbE9wZW5lZEJ5RHJhZyA9IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59O1xyXG5kb2N1bWVudC5vbmRyYWdlbnRlciA9XHJcbiAgICBmdW5jdGlvbiAoZTogRHJhZ0V2ZW50KSB7XHJcbiAgICAgICAgaWYgKGRyb3B6b25lTW9kYWwuaXMoXCI6bm90KC5pbilcIikgJiYgZS5kYXRhVHJhbnNmZXIudHlwZXNbMF0gPT09IFwiRmlsZXNcIiAmJiBtYXBWaWV3TW9kZWwuU2VsZWN0ZWRIYXJib3VyKCkgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBkcm9wem9uZU1vZGFsLm1vZGFsKFwic2hvd1wiKTtcclxuICAgICAgICAgICAgZHJvcHpvbmVNb2RhbE9wZW5lZEJ5RHJhZyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH07XHJcbmRyb3B6b25lTW9kYWwub24oXCJoaWRlLmJzLm1vZGFsXCIsXHJcbiAgICBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGlmIChkcm9wem9uZS5nZXRRdWV1ZWRGaWxlcygpLmxlbmd0aD4wIHx8IGRyb3B6b25lLmdldFVwbG9hZGluZ0ZpbGVzKCkubGVuZ3RoPjApIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICBhbGVydChcIkRhcyBGZW5zdGVyIGthbm4gbmljaHQgZ2VzY2hsb3NzZW4gd2VyZGVuLCB3w6RocmVuZCBEYXRlaWVuIGhvY2hnZWxhZGVuIHdlcmRlbi5cIik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkcm9wem9uZS5yZW1vdmVBbGxGaWxlcygpO1xyXG4gICAgICAgIH1cclxuICAgIH0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==\n","import SHarbour = ServerModel.Harbour;\r\n\r\nclass MapViewModel {\r\n    constructor() {\r\n        L.mapbox\r\n            .accessToken =\r\n            \"pk.eyJ1IjoiZGFuaWVsLWt1b24iLCJhIjoiY2lldnVtY29iMDBiOHQxbTBvZzBqZWl6cCJ9.UEc2YqH59pB1YTpv22vg8A\";\r\n        this.Map = L.mapbox.map(\"map\", \"mapbox.streets\")\r\n            .setView([51, 10], 9) as any;\r\n\r\n        this.SelectedHarbour.subscribe(() => {\r\n            \r\n        });\r\n\r\n        ServerApi.WaypointApi.GetDefault()\r\n            .Get()\r\n            .done(d => {\r\n                for (let sEntity of d) {\r\n                    if (sEntity.Type === ServerModel.Waypoint.GetType())\r\n                        this.Waypoints.push(new ClientModel\r\n                            .Waypoint(L.latLng(sEntity.Latitude, sEntity.Longitude), MarkerType.Waypoint, this.Map)\r\n                            .LoadFromServerEntity(sEntity));\r\n                    else if (sEntity.Type === ServerModel.Harbour.GetType()) {\r\n                        const harbour = new ClientModel\r\n                            .Harbour(sEntity.Name, L.latLng(sEntity.Latitude, sEntity.Longitude), this.Map)\r\n                            .LoadFromServerEntity(sEntity as SHarbour);\r\n                        harbour.marker.addEventListener(\"click\",\r\n                            () => {\r\n                                this.SelectedHarbour(harbour);\r\n                            });\r\n                        this.Harbours.push(harbour);\r\n                    }\r\n                }\r\n                this.WaypointsLoaded = true;\r\n                this.InitializeModel();\r\n            });\r\n        ServerApi.WaypointConnectionApi.GetDefault()\r\n            .Get()\r\n            .done(d => {\r\n                for (let sEntity of d) {\r\n                    this.WaypointConnections.push(sEntity);\r\n                }\r\n                this.WaypointConnectionsLoaded = true;\r\n                this.InitializeModel();\r\n            });\r\n        ServerApi.PersonApi.GetDefault()\r\n            .Get()\r\n            .done(d => {\r\n                for (let sEntity of d) {\r\n                    this.Persons.push(new ClientModel.Person().LoadFromServerEntity(sEntity));\r\n                }\r\n                this.PersonsLoaded = true;\r\n                this.InitializeModel();\r\n            });\r\n        ServerApi.JobApi.GetDefault()\r\n            .Get()\r\n            .done(d => {\r\n                for (let sEntity of d) {\r\n                    this.Jobs.push(new ClientModel.Job().LoadFromServerEntity(sEntity));\r\n                }\r\n                this.JobsLoaded = true;\r\n                this.InitializeModel();\r\n            });\r\n        ServerApi.TripApi.GetDefault()\r\n            .Get()\r\n            .done(d => {\r\n                for (let sEntity of d) {\r\n                    this.Trips.push(new ClientModel.Trip().LoadFromServerEntity(sEntity));\r\n                }\r\n                this.TripsLoaded = true;\r\n                this.InitializeModel();\r\n            });\r\n        ServerApi.AddressApi.GetDefault()\r\n            .Get()\r\n            .done(d => {\r\n                for (let sEntity of d) {\r\n                    this.Addresses.push(new ClientModel.Address().LoadFromServerEntity(sEntity));\r\n                }\r\n                this.AddressesLoaded = true;\r\n                this.InitializeModel();\r\n            });\r\n        ServerApi.ImageApi.GetDefault()\r\n            .Get()\r\n            .done(d => {\r\n                for (let sEntity of d) {\r\n                    this.Images.push(new ClientModel.Image().LoadFromServerEntity(sEntity));\r\n                }\r\n                this.ImagesLoaded = true;\r\n                this.InitializeModel();\r\n            });\r\n        ServerApi.AlbumApi.GetDefault()\r\n            .Get()\r\n            .done(d => {\r\n                for (let sEntity of d) {\r\n                    this.Albums.push(new ClientModel.Album().LoadFromServerEntity(sEntity));\r\n                }\r\n                this.AlbumsLoaded = true;\r\n                this.InitializeModel();\r\n            });\r\n        //ServerApi.WaypointTackApi.GetDefault().Get().done(d => {\r\n        //    for (let sEntity of d) { this.WaypointTacks.push(new ClientModel.WaypointTack().LoadFromServerEntity(sEntity)); }\r\n        //    this.WaypointTacksLoaded = true;\r\n        //    this.InitialozeModel();\r\n        //});\r\n        ServerApi.TackApi.GetDefault()\r\n            .Get()\r\n            .done(d => {\r\n                for (let sEntity of d) {\r\n                    this.Tacks.push(new ClientModel.Tack().LoadFromServerEntity(sEntity));\r\n                }\r\n                this.TacksLoaded = true;\r\n                this.InitializeModel();\r\n            });\r\n        ServerApi.LocationApi.GetDefault()\r\n            .Get()\r\n            .done(d => {\r\n                for (let sEntity of d) {\r\n                    if (sEntity.Type === ServerModel.Location.GetType())\r\n                        this.Locations.push(new ClientModel.Location().LoadFromServerEntity(sEntity));\r\n                    else if (sEntity.Type === ServerModel.Restaurant.GetType())\r\n                        this.Restaurants.push(new ClientModel.Restaurant().LoadFromServerEntity(sEntity));\r\n                    else if (sEntity.Type === ServerModel.Supermarket.GetType())\r\n                        this.Supermarkets.push(new ClientModel.Supermarket().LoadFromServerEntity(sEntity));\r\n                }\r\n                this.LocationsLoaded = true;\r\n                this.InitializeModel();\r\n            });\r\n    }\r\n\r\n    InitializeModel() {\r\n        if (this.WaypointsLoaded &&\r\n            this.WaypointConnectionsLoaded &&\r\n            this.PersonsLoaded &&\r\n            this.JobsLoaded &&\r\n            this.TripsLoaded &&\r\n            this.AddressesLoaded &&\r\n            this.ImagesLoaded &&\r\n            this.AlbumsLoaded &&\r\n            //this.WaypointTacksLoaded &&\r\n            this.TacksLoaded &&\r\n            this.LocationsLoaded) {\r\n            for (let entity of this.Harbours()) {\r\n                entity.Album(this.GetAlbumById(entity.AlbumId()));\r\n            }\r\n            for (let entity of this.Jobs()) {\r\n                if (entity.AssignedToId() !== undefined)\r\n                    entity.AssignedTo(this.GetPersonById(entity.AssignedToId()));\r\n                if (entity.TripId() !== undefined)\r\n                    entity.Trip(this.GetTripById(entity.TripId()));\r\n                if (entity.SuperJobId() !== undefined) {\r\n                    entity.SuperJob(this.GetJobById(entity.SuperJobId()));\r\n                    entity.SuperJob().SubJobs.push(entity);\r\n                }\r\n            }\r\n            for (let entity of this.Locations()) {\r\n                entity.Address(this.GetAddressById(entity.AddressId()));\r\n                this.GetHarbourById(entity.HarbourId()).Locations.push(entity);\r\n            }\r\n            for (let entity of this.Images()) {\r\n                this.GetAlbumById(entity.AlbumId()).Images.push(entity);\r\n            }\r\n            //for (let entity of this.Tacks()) {\r\n            //    entity.(this.GetAlbumById(entity.AlbumId()));\r\n            //}\r\n            //for (let entity of this.Harbours()) {\r\n            //    entity.Album(this.GetAlbumById(entity.AlbumId()));\r\n            //}\r\n            //for (let entity of this.Harbours()) {\r\n            //    entity.Album(this.GetAlbumById(entity.AlbumId()));\r\n            //}\r\n            $(\"#loadingOverlay\").remove();\r\n        }\r\n    }\r\n\r\n    Map: L.mapbox.Map;\r\n\r\n    GetWaypointById(id: number): ClientModel.Waypoint {\r\n        for (let entity of this.Waypoints()) {\r\n            if (entity.Id() === id) return entity;\r\n        }\r\n        for (let entity of this.Harbours()) {\r\n            if (entity.Id() === id) return entity;\r\n        }\r\n        //throw \"No Waypoint with id \" + id + \" found\";\r\n    }\r\n\r\n    GetHarbourById(id: number): ClientModel.Harbour {\r\n        for (let entity of this.Harbours()) {\r\n            if (entity.Id() === id) return entity;\r\n        }\r\n        //throw \"No Harbour with id \" + id + \" found\";\r\n    }\r\n\r\n    GetPersonById(id: number): ClientModel.Person {\r\n        for (let entity of this.Persons()) {\r\n            if (entity.Id() === id) return entity;\r\n        }\r\n        //throw \"No Person with id \" + id + \" found\";\r\n    }\r\n\r\n    GetJobById(id: number): ClientModel.Job {\r\n        for (let entity of this.Jobs()) {\r\n            if (entity.Id() === id) return entity;\r\n        }\r\n        //throw \"No Job with id \" + id + \" found\";\r\n    }\r\n\r\n    GetTripById(id: number): ClientModel.Trip {\r\n        for (let entity of this.Trips()) {\r\n            if (entity.Id() === id) return entity;\r\n        }\r\n        //throw \"No Trip with id \" + id + \" found\";\r\n    }\r\n\r\n    GetAddressById(id: number): ClientModel.Address {\r\n        for (let entity of this.Addresses()) {\r\n            if (entity.Id() === id) return entity;\r\n        }\r\n        //throw \"No Address with id \" + id + \" found\";\r\n    }\r\n\r\n    GetImageById(id: number): ClientModel.Image {\r\n        for (let entity of this.Images()) {\r\n            if (entity.Id() === id) return entity;\r\n        }\r\n        //throw \"No Image with id \" + id + \" found\";\r\n    }\r\n\r\n    GetAlbumById(id: number): ClientModel.Album {\r\n        for (let entity of this.Albums()) {\r\n            if (entity.Id() === id) return entity;\r\n        }\r\n        //throw \"No Album with id \" + id + \" found\";\r\n    }\r\n\r\n    GetTackById(id: number): ClientModel.Tack {\r\n        for (let entity of this.Tacks()) {\r\n            if (entity.Id() === id) return entity;\r\n        }\r\n        //throw \"No Tack with id \" + id + \" found\";\r\n    }\r\n\r\n    GetLocationById(id: number): ClientModel.Location {\r\n        for (let entity of this.Locations()) {\r\n            if (entity.Id() === id) return entity;\r\n        }\r\n        for (let entity of this.Restaurants()) {\r\n            if (entity.Id() === id) return entity;\r\n        }\r\n        for (let entity of this.Restaurants()) {\r\n            if (entity.Id() === id) return entity;\r\n        }\r\n        //throw \"No Location with id \" + id + \" found\";\r\n    }\r\n\r\n    WaypointsLoaded = false;\r\n    WaypointConnectionsLoaded = false;\r\n    PersonsLoaded = false;\r\n    JobsLoaded = false;\r\n    TripsLoaded = false;\r\n    AddressesLoaded = false;\r\n    ImagesLoaded = false;\r\n    AlbumsLoaded = false;\r\n    WaypointTacksLoaded = false;\r\n    TacksLoaded = false;\r\n    LocationsLoaded = false;\r\n\r\n    Waypoints = ko.observableArray<ClientModel.Waypoint>();\r\n    WaypointConnections = ko.observableArray<ServerModel.WaypointConnection>();\r\n    Harbours = ko.observableArray<ClientModel.Harbour>();\r\n    Persons = ko.observableArray<ClientModel.Person>();\r\n    Jobs = ko.observableArray<ClientModel.Job>();\r\n    Trips = ko.observableArray<ClientModel.Trip>();\r\n    Addresses = ko.observableArray<ClientModel.Address>();\r\n    Images = ko.observableArray<ClientModel.Image>();\r\n    Albums = ko.observableArray<ClientModel.Album>();\r\n    Tacks = ko.observableArray<ClientModel.Tack>();\r\n    Locations = ko.observableArray<ClientModel.Location>();\r\n    Supermarkets = ko.observableArray<ClientModel.Supermarket>();\r\n    Restaurants = ko.observableArray<ClientModel.Restaurant>();\r\n\r\n\r\n    SelectedWaypoint = ko.observable<ClientModel.Waypoint>();\r\n    SelectedHarbour = ko.observable<ClientModel.Harbour>();\r\n    SelectedPerson = ko.observable<ClientModel.Person>();\r\n    SelectedJob = ko.observable<ClientModel.Job>();\r\n    SelectedTrip = ko.observable<ClientModel.Trip>();\r\n    SelectedAddress = ko.observable<ClientModel.Address>();\r\n    SelectedImage = ko.observable<ClientModel.Image>();\r\n    SelectedAlbum = ko.observable<ClientModel.Album>();\r\n    SelectedTack = ko.observable<ClientModel.Tack>();\r\n    SelectedLocation = ko.observable<ClientModel.Location>();\r\n    SelectedSupermarket = ko.observable<ClientModel.Supermarket>();\r\n    SelectedRestaurant = ko.observable<ClientModel.Restaurant>();\r\n}\r\n\r\nvar mapViewModel = new MapViewModel();\r\nko.applyBindings(mapViewModel);\r\nvar dropzoneModalOpenedByDrag = false;\r\n\r\nvar dropzoneModal = $(\"#dropzoneModal\");\r\nvar dropzone: Dropzone;\r\nDropzone.options.dropzone=\r\n{\r\n    acceptedFiles: \"image/jpeg,image/png\",\r\n    dictInvalidFileType: \"Dieser Dateityp wird nicht untersttzt\",\r\n    dictDefaultMessage: \"Dateien hier ablegen\",\r\n    init: function() {\r\n        dropzone = this;\r\n        dropzone.on(\"success\",\r\n        (e, data: ServerModel.Image) => {\r\n            var image = new ClientModel.Image().LoadFromServerEntity(data);\r\n            mapViewModel.Images.push(image);\r\n            mapViewModel.GetAlbumById(image.AlbumId()).Images.push(image);\r\n        });\r\n        dropzone.on(\"queuecomplete\",\r\n        () => {\r\n            if (dropzoneModalOpenedByDrag)\r\n                dropzoneModal.modal(\"hide\");\r\n            dropzoneModalOpenedByDrag = false;\r\n        });\r\n    }\r\n};\r\ndocument.ondragenter =\r\n    function (e: DragEvent) {\r\n        if (dropzoneModal.is(\":not(.in)\") && e.dataTransfer.types[0] === \"Files\" && mapViewModel.SelectedHarbour() !== undefined) {\r\n            dropzoneModal.modal(\"show\");\r\n            dropzoneModalOpenedByDrag = true;\r\n        }\r\n\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    };\r\ndropzoneModal.on(\"hide.bs.modal\",\r\n    function (e) {\r\n        if (dropzone.getQueuedFiles().length>0 || dropzone.getUploadingFiles().length>0) {\r\n            e.preventDefault();\r\n            e.stopImmediatePropagation();\r\n            alert(\"Das Fenster kann nicht geschlossen werden, whrend Dateien hochgeladen werden.\");\r\n            return false;\r\n        } else {\r\n            dropzone.removeAllFiles();\r\n        }\r\n    });"],"sourceRoot":"/source/"}