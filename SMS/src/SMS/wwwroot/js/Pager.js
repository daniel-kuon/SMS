var Pager = (function () {
    function Pager(source, options) {
        var _this = this;
        this.IdPrefix = ko.observable();
        this.HasDetailView = ko.observable(false);
        this.ShowEditDeleteControls = ko.observable(false);
        this.EditingHelper = ko.observable();
        this.UseResponsiveTable = ko.observable(false);
        this.UseStripedTable = ko.observable(false);
        this.UseSmallColumnControls = ko.observable(false);
        this.UseSmallControls = ko.observable(false);
        this.ActivePage = ko.observable(0);
        this.ShowPageSizeSelector = ko.observable(true);
        this.ShowColumnSelector = ko.observable(true);
        this.PageSize = ko.observable(10);
        this.PageSizes = ko.observableArray([5, 10, 15, 20, 30, 40, 50, 100]);
        this.PageCount = ko.computed({
            deferEvaluation: true,
            read: function () {
                var count = Math.ceil(_this.FilteredSource().length / _this.PageSize());
                if (_this.ActivePage() * _this.PageSize() >= count)
                    _this.ActivePage(count - 1);
                return count;
            }
        });
        this.Pages = ko.computed({
            deferEvaluation: true,
            read: function () {
                var out = [];
                for (var i = 0; i < _this.PageCount(); i++) {
                    out.push({ index: i + 1, selected: i === _this.ActivePage() });
                }
                return out;
            }
        });
        this.HasPrevPage = ko.computed({
            deferEvaluation: true,
            read: function () { return _this.ActivePage() !== 0; }
        });
        this.HasNextPage = ko.computed({
            deferEvaluation: true,
            read: function () { return _this.ActivePage() !== _this.PageCount() - 1; }
        });
        this.FilteredSource = ko.computed({
            deferEvaluation: true,
            read: function () { return _this.Source().slice(); }
        });
        this.SortedSource = ko.computed({
            deferEvaluation: true,
            read: function () {
                if (_this.CurrentlySortedBy() !== undefined)
                    return _this.FilteredSource().sort(_this.CurrentlySortedBy().CurrentSortMode() === SortModes.Ascending ?
                        _this.CurrentlySortedBy().Sorter :
                        function (e1, e2) { return _this.CurrentlySortedBy().Sorter(e2, e1); });
                else
                    return _this.FilteredSource();
            }
        });
        this.DisplaySource = ko.computed({
            deferEvaluation: true,
            read: function () {
                var start = _this.PageSize() * _this.ActivePage();
                return _this.SortedSource().slice(start, start + _this.PageSize());
            }
        });
        this.DisplayColumns = ko.computed({
            deferEvaluation: true,
            read: function () {
                return _this.Columns().slice().filter(function (c) { return c.Visible(); });
            }
        });
        this.DisplaySpecialActions = ko.computed({
            deferEvaluation: true,
            read: function () {
                return _this.SpecialActions().slice().filter(function (c) { return c.Visible(); });
            }
        });
        this.DisplaySpecialColumnActions = function (data) {
            return _this.SpecialColumnActions().slice().filter(function (c) { return c.Visible.apply(data); });
        };
        this.Columns = ko.observableArray();
        this.SpecialColumnActions = ko.observableArray();
        this.CurrentlySortedBy = ko.observable();
        this.ShowSorters = ko.observable(true);
        this.SpecialActions = ko.observableArray();
        this.SortBy = function (column) {
            if (column.IsSortable())
                if (column.CurrentSortMode() === SortModes.Ascending)
                    column.CurrentSortMode(SortModes.Descending);
                else if (column.CurrentSortMode() === SortModes.Descending)
                    column.CurrentSortMode(SortModes.Ascending);
                else {
                    column.CurrentSortMode(SortModes.Ascending);
                    if (_this.CurrentlySortedBy() !== undefined)
                        _this.CurrentlySortedBy().CurrentSortMode(SortModes.None);
                    _this.CurrentlySortedBy(column);
                }
        };
        this.SelectPage = function (page) {
            _this.ActivePage(page.index - 1);
        };
        this.SelectNextPage = function () {
            if (_this.HasNextPage())
                _this.ActivePage(_this.ActivePage() + 1);
        };
        this.SelectPrevPage = function () {
            if (_this.HasPrevPage())
                _this.ActivePage(_this.ActivePage() - 1);
        };
        var _self = this;
        this.Source = source;
        this.Columns(options.Columns);
        for (var _i = 0, _a = this.Columns(); _i < _a.length; _i++) {
            var col = _a[_i];
            if (col.CurrentSortMode() !== SortModes.None && this.CurrentlySortedBy() !== col) {
                if (this.CurrentlySortedBy() !== undefined)
                    this.CurrentlySortedBy().CurrentSortMode(SortModes.None);
                this.CurrentlySortedBy(col);
            }
        }
        if (options.SpecialColumnActions !== undefined)
            for (var _b = 0, _c = options.SpecialColumnActions; _b < _c.length; _b++) {
                var action = _c[_b];
                this.SpecialColumnActions.push(action);
            }
        if (options.SpecialActions !== undefined)
            for (var _d = 0, _e = options.SpecialActions; _d < _e.length; _d++) {
                var action = _e[_d];
                this.SpecialActions.push(action);
            }
        this.IdPrefix(options.IdPrefix);
        if (options.PageSize !== undefined)
            this.PageSize(options.PageSize);
        if (options.PageSizes !== undefined)
            this.PageSizes(options.PageSizes);
        this.UseResponsiveTable(options.UseResponsiveTable || false);
        this.UseStripedTable(options.UseStripedTable || false);
        this.UseSmallColumnControls(options.UseSmallColumnControls || false);
        this.UseSmallControls(options.UseSmallControls || false);
        if (options.EditingHelper !== undefined) {
            this.HasDetailView(options.EditingHelper.HasDetailView);
            this.ShowEditDeleteControls(options.ShowEditDeleteControls || false);
            this.EditingHelper(options.EditingHelper);
        }
        if (options.ShowColumnSelector !== undefined)
            this.ShowColumnSelector(options.ShowColumnSelector);
        if (options.ShowPageSizeSelector !== undefined)
            this.ShowPageSizeSelector(options.ShowPageSizeSelector);
    }
    return Pager;
}());
var PagerSpecialColumnAction = (function () {
    function PagerSpecialColumnAction(Name, Action, enabled, visible) {
        this.Name = Name;
        this.Action = Action;
        this.Enabled = ko.computed(function () { return true; });
        this.Visible = ko.computed(function () { return true; });
        if (enabled !== undefined)
            if (ko.isObservable(enabled))
                this.Enabled = enabled;
            else
                this.Enabled = ko.computed(function () { return enabled(this); });
        if (visible !== undefined)
            if (ko.isObservable(visible))
                this.Visible = visible;
            else
                this.Visible = ko.computed(function () {
                    console.log(this);
                    return visible(this);
                });
    }
    return PagerSpecialColumnAction;
}());
var PagerSpecialAction = (function () {
    function PagerSpecialAction(Name, Action, enabled, visible) {
        this.Name = Name;
        this.Action = Action;
        this.Enabled = ko.computed(function () { return true; });
        this.Visible = ko.computed(function () { return true; });
        if (enabled !== undefined)
            if (ko.isObservable(enabled))
                this.Enabled = enabled;
            else
                this.Enabled = ko.computed(function () { return enabled(); });
        if (visible !== undefined)
            if (ko.isObservable(visible))
                this.Visible = visible;
            else
                this.Visible = ko.computed(function () { return visible(); });
    }
    return PagerSpecialAction;
}());
var SortModes;
(function (SortModes) {
    SortModes[SortModes["None"] = 0] = "None";
    SortModes[SortModes["Ascending"] = 1] = "Ascending";
    SortModes[SortModes["Descending"] = 2] = "Descending";
})(SortModes || (SortModes = {}));
var PagerColumn = (function () {
    function PagerColumn(Name, Value, options) {
        var _this = this;
        if (options === void 0) { options = {}; }
        this.Name = Name;
        this.Value = Value;
        this.CssClasses = "";
        this.Styles = "";
        this.Visible = ko.observable(true);
        this.IsSortable = function () { return _this.ValueSorter !== undefined; };
        this.CurrentSortMode = ko.observable(SortModes.None);
        this.Sorter = function (e1, e2) { return _this.ValueSorter(ko.unwrap(_this.Value(e1)), ko.unwrap(_this.Value(e2))); };
        this.DisplayValue = function (v) {
            return ko.computed({
                deferEvaluation: true,
                read: function () {
                    var value = ko.unwrap(_this.Value(v));
                    if (value === undefined)
                        return "";
                    return _this.Renderer(value);
                }
            });
        };
        this.DisplayName = ko.computed({
            deferEvaluation: true,
            read: function () { return _this.CurrentSortMode() === SortModes.None ? ko.unwrap(_this.Name) : ko.unwrap(_this.Name) +
                (_this.CurrentSortMode() === SortModes.Ascending ? " &#9650;" : " &#9660;"); }
        });
        if (options.Visible !== undefined)
            this.Visible(options.Visible);
        this.Renderer = options.Renderer || PagerColumn.DefaultRenderer();
        this.ValueSorter = options.Sorter;
        if (options.SortMode !== undefined)
            this.CurrentSortMode(options.SortMode);
        if (options.CssClasses !== undefined)
            if (options.CssClasses instanceof Array && options.CssClasses.length > 0) {
                this.CssClasses = options.CssClasses[0];
                for (var i = 1; i < options.CssClasses.length; i++) {
                    this.CssClasses + " " + options.CssClasses[i];
                }
            }
            else if (typeof options.CssClasses === "string")
                this.CssClasses = options.CssClasses;
        if (options.Styles !== undefined)
            if (options.Styles instanceof Array && options.Styles.length > 0) {
                this.Styles = "";
                for (var _i = 0, _a = options.Styles; _i < _a.length; _i++) {
                    var style = _a[_i];
                    this.Styles += style.key + ": " + style.value + ";";
                }
            }
            else if (typeof options.Styles === "string")
                this.Styles = options.Styles;
        if (options.Width !== undefined)
            this.Styles = "width: " + options.Width + "px;" + (this.Styles || "");
    }
    PagerColumn.ArrayRenderer = function (seperator, elementRenderer) {
        if (seperator === void 0) { seperator = ", "; }
        if (elementRenderer === void 0) { elementRenderer = PagerColumn.DefaultRenderer(); }
        return function (v) {
            var out = "";
            if (v !== undefined && v.length > 0) {
                out += elementRenderer(v[0]);
                for (var i = 1; i < v.length; i++)
                    out += seperator + elementRenderer(v[i]);
            }
            return out;
        };
    };
    PagerColumn.StringSorter = function () { return function (e1, e2) { return e1 > e2 ? 1 : -1; }; };
    PagerColumn.NumberSorter = function () { return function (e1, e2) { return e1 > e2 ? 1 : -1; }; };
    PagerColumn.DateSorter = function () { return function (e1, e2) { return new Date(e1) - new Date(e2); }; };
    PagerColumn.ArraySorter = function () { return function (e1, e2) { return e1.length - e2.length; }; };
    PagerColumn.DefaultRenderer = function () { return function (v) {
        if (v === undefined)
            return "";
        else if (v instanceof Date)
            return PagerColumn.DateRenderer()(v);
        else if (v instanceof Array) {
            return PagerColumn.ArrayRenderer()(v);
        }
        return v.toString();
    }; };
    PagerColumn.DateRenderer = function () { return function (v) { return moment(v).format("LL"); }; };
    PagerColumn.DateTimeRenderer = function () { return function (v) { return moment(v).format("LLL"); }; };
    PagerColumn.TimeRenderer = function () { return function (v) { return moment(v).format("LT"); }; };
    return PagerColumn;
}());

//# sourceMappingURL=data:application/json;base64,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QUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBOUIsQ0FBOEIsRUFBN0QsQ0FBNkQsQ0FBQztJQUNuRiw0QkFBZ0IsR0FBRyxjQUFNLE9BQUEsVUFBQyxDQUF5QixJQUFLLE9BQVEsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBL0IsQ0FBK0IsRUFBOUQsQ0FBOEQsQ0FBQztJQUN4Rix3QkFBWSxHQUFHLGNBQU0sT0FBQSxVQUFDLENBQXlCLElBQUssT0FBUSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUE5QixDQUE4QixFQUE3RCxDQUE2RCxDQUFDO0lBYTlGLGtCQUFDO0FBQUQsQ0F6RkEsQUF5RkMsSUFBQSIsImZpbGUiOiJQYWdlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFBhZ2VyPFQgZXh0ZW5kcyBDbGllbnRNb2RlbC5FbnRpdHk+IHtcclxuICAgIGNvbnN0cnVjdG9yKHNvdXJjZTogS25vY2tvdXRPYnNlcnZhYmxlPFRbXT4sIG9wdGlvbnM6IElQYWdlck9wdGlvbnM8VD4pIHtcclxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuU291cmNlID0gc291cmNlO1xyXG4gICAgICAgIHRoaXMuQ29sdW1ucyhvcHRpb25zLkNvbHVtbnMpO1xyXG4gICAgICAgIGZvciAobGV0IGNvbCBvZiB0aGlzLkNvbHVtbnMoKSkge1xyXG4gICAgICAgICAgICBpZiAoY29sLkN1cnJlbnRTb3J0TW9kZSgpICE9PSBTb3J0TW9kZXMuTm9uZSAmJiB0aGlzLkN1cnJlbnRseVNvcnRlZEJ5KCkgIT09IGNvbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuQ3VycmVudGx5U29ydGVkQnkoKSAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuQ3VycmVudGx5U29ydGVkQnkoKS5DdXJyZW50U29ydE1vZGUoU29ydE1vZGVzLk5vbmUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5DdXJyZW50bHlTb3J0ZWRCeShjb2wpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvcHRpb25zLlNwZWNpYWxDb2x1bW5BY3Rpb25zICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIGZvciAobGV0IGFjdGlvbiBvZiBvcHRpb25zLlNwZWNpYWxDb2x1bW5BY3Rpb25zKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLlNwZWNpYWxDb2x1bW5BY3Rpb25zLnB1c2goYWN0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIGlmIChvcHRpb25zLlNwZWNpYWxBY3Rpb25zICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIGZvciAobGV0IGFjdGlvbiBvZiBvcHRpb25zLlNwZWNpYWxBY3Rpb25zKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLlNwZWNpYWxBY3Rpb25zLnB1c2goYWN0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuSWRQcmVmaXgob3B0aW9ucy5JZFByZWZpeCk7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuUGFnZVNpemUgIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgdGhpcy5QYWdlU2l6ZShvcHRpb25zLlBhZ2VTaXplKTtcclxuICAgICAgICBpZiAob3B0aW9ucy5QYWdlU2l6ZXMgIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgdGhpcy5QYWdlU2l6ZXMob3B0aW9ucy5QYWdlU2l6ZXMpO1xyXG4gICAgICAgIHRoaXMuVXNlUmVzcG9uc2l2ZVRhYmxlKG9wdGlvbnMuVXNlUmVzcG9uc2l2ZVRhYmxlIHx8IGZhbHNlKTtcclxuICAgICAgICB0aGlzLlVzZVN0cmlwZWRUYWJsZShvcHRpb25zLlVzZVN0cmlwZWRUYWJsZSB8fCBmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5Vc2VTbWFsbENvbHVtbkNvbnRyb2xzKG9wdGlvbnMuVXNlU21hbGxDb2x1bW5Db250cm9scyB8fCBmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5Vc2VTbWFsbENvbnRyb2xzKG9wdGlvbnMuVXNlU21hbGxDb250cm9scyB8fCBmYWxzZSk7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuRWRpdGluZ0hlbHBlciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuSGFzRGV0YWlsVmlldyhvcHRpb25zLkVkaXRpbmdIZWxwZXIuSGFzRGV0YWlsVmlldyk7XHJcbiAgICAgICAgICAgIHRoaXMuU2hvd0VkaXREZWxldGVDb250cm9scyhvcHRpb25zLlNob3dFZGl0RGVsZXRlQ29udHJvbHMgfHwgZmFsc2UpO1xyXG4gICAgICAgICAgICB0aGlzLkVkaXRpbmdIZWxwZXIob3B0aW9ucy5FZGl0aW5nSGVscGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuU2hvd0NvbHVtblNlbGVjdG9yICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIHRoaXMuU2hvd0NvbHVtblNlbGVjdG9yKG9wdGlvbnMuU2hvd0NvbHVtblNlbGVjdG9yKTtcclxuICAgICAgICBpZiAob3B0aW9ucy5TaG93UGFnZVNpemVTZWxlY3RvciAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICB0aGlzLlNob3dQYWdlU2l6ZVNlbGVjdG9yKG9wdGlvbnMuU2hvd1BhZ2VTaXplU2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIElkUHJlZml4ID0ga28ub2JzZXJ2YWJsZTxzdHJpbmc+KCk7XHJcbiAgICBIYXNEZXRhaWxWaWV3ID0ga28ub2JzZXJ2YWJsZShmYWxzZSk7XHJcbiAgICBTaG93RWRpdERlbGV0ZUNvbnRyb2xzID0ga28ub2JzZXJ2YWJsZShmYWxzZSk7XHJcbiAgICBFZGl0aW5nSGVscGVyID0ga28ub2JzZXJ2YWJsZTxFZGl0aW5nSGVscGVyPFQ+PigpO1xyXG4gICAgVXNlUmVzcG9uc2l2ZVRhYmxlID0ga28ub2JzZXJ2YWJsZShmYWxzZSk7XHJcbiAgICBVc2VTdHJpcGVkVGFibGUgPSBrby5vYnNlcnZhYmxlKGZhbHNlKTtcclxuICAgIFVzZVNtYWxsQ29sdW1uQ29udHJvbHMgPSBrby5vYnNlcnZhYmxlKGZhbHNlKTtcclxuICAgIFVzZVNtYWxsQ29udHJvbHMgPSBrby5vYnNlcnZhYmxlKGZhbHNlKTtcclxuICAgIFNvdXJjZTogS25vY2tvdXRPYnNlcnZhYmxlPFRbXT47XHJcbiAgICBBY3RpdmVQYWdlID0ga28ub2JzZXJ2YWJsZSgwKTtcclxuICAgIFNob3dQYWdlU2l6ZVNlbGVjdG9yID0ga28ub2JzZXJ2YWJsZSh0cnVlKTtcclxuICAgIFNob3dDb2x1bW5TZWxlY3RvciA9IGtvLm9ic2VydmFibGUodHJ1ZSk7XHJcbiAgICBQYWdlU2l6ZSA9IGtvLm9ic2VydmFibGUoMTApO1xyXG4gICAgUGFnZVNpemVzID0ga28ub2JzZXJ2YWJsZUFycmF5KFs1LCAxMCwgMTUsIDIwLCAzMCwgNDAsIDUwLCAxMDBdKTtcclxuICAgIFBhZ2VDb3VudCA9IGtvLmNvbXB1dGVkKHtcclxuICAgICAgICBkZWZlckV2YWx1YXRpb246IHRydWUsXHJcbiAgICAgICAgcmVhZDogKCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgY291bnQgPSBNYXRoLmNlaWwodGhpcy5GaWx0ZXJlZFNvdXJjZSgpLmxlbmd0aCAvIHRoaXMuUGFnZVNpemUoKSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLkFjdGl2ZVBhZ2UoKSAqIHRoaXMuUGFnZVNpemUoKSA+PSBjb3VudClcclxuICAgICAgICAgICAgICAgIHRoaXMuQWN0aXZlUGFnZShjb3VudCAtIDEpO1xyXG4gICAgICAgICAgICByZXR1cm4gY291bnQ7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICB9KTtcclxuICAgIFBhZ2VzID0ga28uY29tcHV0ZWQoe1xyXG4gICAgICAgIGRlZmVyRXZhbHVhdGlvbjogdHJ1ZSxcclxuICAgICAgICByZWFkOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG91dCA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuUGFnZUNvdW50KCk7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgb3V0LnB1c2goeyBpbmRleDogaSArIDEsIHNlbGVjdGVkOiBpID09PSB0aGlzLkFjdGl2ZVBhZ2UoKSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gb3V0O1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgSGFzUHJldlBhZ2UgPSBrby5jb21wdXRlZCh7XHJcbiAgICAgICAgZGVmZXJFdmFsdWF0aW9uOiB0cnVlLFxyXG4gICAgICAgIHJlYWQ6ICgpID0+IHRoaXMuQWN0aXZlUGFnZSgpICE9PSAwXHJcbiAgICB9KTtcclxuICAgIEhhc05leHRQYWdlID0ga28uY29tcHV0ZWQoe1xyXG4gICAgICAgIGRlZmVyRXZhbHVhdGlvbjogdHJ1ZSxcclxuICAgICAgICByZWFkOiAoKSA9PiB0aGlzLkFjdGl2ZVBhZ2UoKSAhPT0gdGhpcy5QYWdlQ291bnQoKSAtIDFcclxuICAgIH0pO1xyXG4gICAgRmlsdGVyZWRTb3VyY2UgPSBrby5jb21wdXRlZCh7XHJcbiAgICAgICAgZGVmZXJFdmFsdWF0aW9uOiB0cnVlLFxyXG4gICAgICAgIHJlYWQ6ICgpID0+IHRoaXMuU291cmNlKCkuc2xpY2UoKVxyXG4gICAgfSk7XHJcbiAgICBTb3J0ZWRTb3VyY2UgPSBrby5jb21wdXRlZCh7XHJcbiAgICAgICAgZGVmZXJFdmFsdWF0aW9uOiB0cnVlLFxyXG4gICAgICAgIHJlYWQ6ICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuQ3VycmVudGx5U29ydGVkQnkoKSAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuRmlsdGVyZWRTb3VyY2UoKS5zb3J0KHRoaXMuQ3VycmVudGx5U29ydGVkQnkoKS5DdXJyZW50U29ydE1vZGUoKSA9PT0gU29ydE1vZGVzLkFzY2VuZGluZyA/XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5DdXJyZW50bHlTb3J0ZWRCeSgpLlNvcnRlciA6XHJcbiAgICAgICAgICAgICAgICAgICAgKGUxOiBULCBlMjogVCkgPT4gdGhpcy5DdXJyZW50bHlTb3J0ZWRCeSgpLlNvcnRlcihlMiwgZTEpKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuRmlsdGVyZWRTb3VyY2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIERpc3BsYXlTb3VyY2UgPSBrby5jb21wdXRlZCh7XHJcbiAgICAgICAgZGVmZXJFdmFsdWF0aW9uOiB0cnVlLFxyXG4gICAgICAgIHJlYWQ6ICgpID0+IHtcclxuICAgICAgICAgICAgbGV0IHN0YXJ0ID0gdGhpcy5QYWdlU2l6ZSgpICogdGhpcy5BY3RpdmVQYWdlKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLlNvcnRlZFNvdXJjZSgpLnNsaWNlKHN0YXJ0LCBzdGFydCArIHRoaXMuUGFnZVNpemUoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBEaXNwbGF5Q29sdW1ucyA9IGtvLmNvbXB1dGVkKHtcclxuICAgICAgICBkZWZlckV2YWx1YXRpb246IHRydWUsXHJcbiAgICAgICAgcmVhZDogKCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5Db2x1bW5zKCkuc2xpY2UoKS5maWx0ZXIoKGMpID0+IGMuVmlzaWJsZSgpKVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgfSk7XHJcbiAgICBEaXNwbGF5U3BlY2lhbEFjdGlvbnMgPSBrby5jb21wdXRlZCh7XHJcbiAgICAgICAgZGVmZXJFdmFsdWF0aW9uOiB0cnVlLFxyXG4gICAgICAgIHJlYWQ6ICgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuU3BlY2lhbEFjdGlvbnMoKS5zbGljZSgpLmZpbHRlcigoYykgPT4gYy5WaXNpYmxlKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9KTtcclxuICAgIERpc3BsYXlTcGVjaWFsQ29sdW1uQWN0aW9ucyA9IChkYXRhKT0+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5TcGVjaWFsQ29sdW1uQWN0aW9ucygpLnNsaWNlKCkuZmlsdGVyKChjKSA9PiBjLlZpc2libGUuYXBwbHkoZGF0YSkpXHJcbiAgICB9O1xyXG4gICAgQ29sdW1ucyA9IGtvLm9ic2VydmFibGVBcnJheTxJUGFnZXJDb2x1bW48VD4+KCk7XHJcbiAgICBTcGVjaWFsQ29sdW1uQWN0aW9ucyA9IGtvLm9ic2VydmFibGVBcnJheTxQYWdlclNwZWNpYWxDb2x1bW5BY3Rpb248VD4+KCk7XHJcbiAgICBDdXJyZW50bHlTb3J0ZWRCeSA9IGtvLm9ic2VydmFibGU8SVBhZ2VyQ29sdW1uPFQ+PigpO1xyXG4gICAgU2hvd1NvcnRlcnMgPSBrby5vYnNlcnZhYmxlKHRydWUpO1xyXG4gICAgU3BlY2lhbEFjdGlvbnMgPSBrby5vYnNlcnZhYmxlQXJyYXk8UGFnZXJTcGVjaWFsQWN0aW9uPigpO1xyXG5cclxuICAgIFNvcnRCeSA9IChjb2x1bW46IElQYWdlckNvbHVtbjxUPikgPT4ge1xyXG4gICAgICAgIGlmIChjb2x1bW4uSXNTb3J0YWJsZSgpKVxyXG4gICAgICAgICAgICBpZiAoY29sdW1uLkN1cnJlbnRTb3J0TW9kZSgpID09PSBTb3J0TW9kZXMuQXNjZW5kaW5nKVxyXG4gICAgICAgICAgICAgICAgY29sdW1uLkN1cnJlbnRTb3J0TW9kZShTb3J0TW9kZXMuRGVzY2VuZGluZyk7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbHVtbi5DdXJyZW50U29ydE1vZGUoKSA9PT0gU29ydE1vZGVzLkRlc2NlbmRpbmcpXHJcbiAgICAgICAgICAgICAgICBjb2x1bW4uQ3VycmVudFNvcnRNb2RlKFNvcnRNb2Rlcy5Bc2NlbmRpbmcpO1xyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbHVtbi5DdXJyZW50U29ydE1vZGUoU29ydE1vZGVzLkFzY2VuZGluZyk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5DdXJyZW50bHlTb3J0ZWRCeSgpICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5DdXJyZW50bHlTb3J0ZWRCeSgpLkN1cnJlbnRTb3J0TW9kZShTb3J0TW9kZXMuTm9uZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkN1cnJlbnRseVNvcnRlZEJ5KGNvbHVtbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBTZWxlY3RQYWdlID0gKHBhZ2UpID0+IHtcclxuICAgICAgICB0aGlzLkFjdGl2ZVBhZ2UocGFnZS5pbmRleCAtIDEpO1xyXG4gICAgfVxyXG4gICAgU2VsZWN0TmV4dFBhZ2UgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuSGFzTmV4dFBhZ2UoKSlcclxuICAgICAgICAgICAgdGhpcy5BY3RpdmVQYWdlKHRoaXMuQWN0aXZlUGFnZSgpICsgMSk7XHJcbiAgICB9XHJcbiAgICBTZWxlY3RQcmV2UGFnZSA9ICgpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5IYXNQcmV2UGFnZSgpKVxyXG4gICAgICAgICAgICB0aGlzLkFjdGl2ZVBhZ2UodGhpcy5BY3RpdmVQYWdlKCkgLSAxKTtcclxuICAgIH1cclxufVxyXG5cclxuaW50ZXJmYWNlIElQYWdlck9wdGlvbnM8VCBleHRlbmRzIENsaWVudE1vZGVsLkVudGl0eT4ge1xyXG5cclxuICAgIC8vRmlsdGVyczooVCk9PmJvb2xlYW58QXJyYXk8KFQpPT5ib29sZWFuPjtcclxuICAgIENvbHVtbnM6IEFycmF5PElQYWdlckNvbHVtbjxUPj47XHJcbiAgICBQYWdlU2l6ZT86IG51bWJlcjtcclxuICAgIFNob3dQYWdlU2l6ZVNlbGVjdG9yPzogYm9vbGVhbjtcclxuICAgIFNob3dDb2x1bW5TZWxlY3Rvcj86IGJvb2xlYW47XHJcbiAgICBQYWdlU2l6ZXM/OiBudW1iZXJbXTtcclxuICAgIFVzZVJlc3BvbnNpdmVUYWJsZT86IGJvb2xlYW47XHJcbiAgICBVc2VTdHJpcGVkVGFibGU/OiBib29sZWFuO1xyXG4gICAgRWRpdGluZ0hlbHBlcj86IEVkaXRpbmdIZWxwZXI8VD47XHJcbiAgICBTaG93RWRpdERlbGV0ZUNvbnRyb2xzPzogYm9vbGVhbjtcclxuICAgIElkUHJlZml4OiBzdHJpbmc7XHJcbiAgICBTcGVjaWFsQ29sdW1uQWN0aW9ucz86IFBhZ2VyU3BlY2lhbENvbHVtbkFjdGlvbjxUPltdO1xyXG4gICAgU3BlY2lhbEFjdGlvbnM/OiBQYWdlclNwZWNpYWxBY3Rpb25bXTtcclxuICAgIFVzZVNtYWxsQ29sdW1uQ29udHJvbHM/OmJvb2xlYW47XHJcbiAgICBVc2VTbWFsbENvbnRyb2xzPzpib29sZWFuO1xyXG59XHJcblxyXG5cclxuY2xhc3MgUGFnZXJTcGVjaWFsQ29sdW1uQWN0aW9uPFQ+IHtcclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBOYW1lOiBzdHJpbmcsIHB1YmxpYyBBY3Rpb246IChlOiBUKSA9PiB2b2lkLCBlbmFibGVkPzogKCh2OiBUKSA9PiBib29sZWFuKSB8IEtub2Nrb3V0T2JzZXJ2YWJsZTxib29sZWFuPiwgdmlzaWJsZT86IEtub2Nrb3V0T2JzZXJ2YWJsZTxib29sZWFuPiB8ICgodjogVCkgPT4gYm9vbGVhbikpIHtcclxuICAgICAgICBpZiAoZW5hYmxlZCAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICBpZiAoa28uaXNPYnNlcnZhYmxlKGVuYWJsZWQpKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5FbmFibGVkID0gZW5hYmxlZDtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5FbmFibGVkID0ga28uY29tcHV0ZWQoZnVuY3Rpb24gKCkgeyByZXR1cm4gZW5hYmxlZCh0aGlzKTsgfSk7XHJcbiAgICAgICAgaWYgKHZpc2libGUgIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgaWYgKGtvLmlzT2JzZXJ2YWJsZSh2aXNpYmxlKSlcclxuICAgICAgICAgICAgICAgIHRoaXMuVmlzaWJsZSA9IHZpc2libGU7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHRoaXMuVmlzaWJsZSA9IGtvLmNvbXB1dGVkKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmlzaWJsZSh0aGlzKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIEVuYWJsZWQ6IEtub2Nrb3V0T2JzZXJ2YWJsZTxib29sZWFuPiA9IGtvLmNvbXB1dGVkKCgpID0+IHRydWUpO1xyXG4gICAgVmlzaWJsZTogS25vY2tvdXRPYnNlcnZhYmxlPGJvb2xlYW4+ID0ga28uY29tcHV0ZWQoKCkgPT4gdHJ1ZSk7XHJcbn1cclxuXHJcblxyXG5jbGFzcyBQYWdlclNwZWNpYWxBY3Rpb24ge1xyXG4gICAgY29uc3RydWN0b3IocHVibGljIE5hbWU6IHN0cmluZywgcHVibGljIEFjdGlvbjogKCkgPT4gdm9pZCwgZW5hYmxlZD86ICgoKSA9PiBib29sZWFuKSB8IEtub2Nrb3V0T2JzZXJ2YWJsZTxib29sZWFuPiwgdmlzaWJsZT86IEtub2Nrb3V0T2JzZXJ2YWJsZTxib29sZWFuPiB8ICgoKSA9PiBib29sZWFuKSkge1xyXG4gICAgICAgIGlmIChlbmFibGVkICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIGlmIChrby5pc09ic2VydmFibGUoZW5hYmxlZCkpXHJcbiAgICAgICAgICAgICAgICB0aGlzLkVuYWJsZWQgPSBlbmFibGVkO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB0aGlzLkVuYWJsZWQgPSBrby5jb21wdXRlZChmdW5jdGlvbiAoKSB7IHJldHVybiBlbmFibGVkKCk7IH0pO1xyXG4gICAgICAgIGlmICh2aXNpYmxlICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIGlmIChrby5pc09ic2VydmFibGUodmlzaWJsZSkpXHJcbiAgICAgICAgICAgICAgICB0aGlzLlZpc2libGUgPSB2aXNpYmxlO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB0aGlzLlZpc2libGUgPSBrby5jb21wdXRlZChmdW5jdGlvbiAoKSB7IHJldHVybiB2aXNpYmxlKCk7IH0pO1xyXG4gICAgfVxyXG5cclxuICAgIEVuYWJsZWQ6IEtub2Nrb3V0T2JzZXJ2YWJsZTxib29sZWFuPiA9IGtvLmNvbXB1dGVkKCgpID0+IHRydWUpO1xyXG4gICAgVmlzaWJsZTogS25vY2tvdXRPYnNlcnZhYmxlPGJvb2xlYW4+ID0ga28uY29tcHV0ZWQoKCkgPT4gdHJ1ZSk7XHJcbn1cclxuXHJcbmludGVyZmFjZSBJUGFnZXJGaWx0ZXI8VD4ge1xyXG5cclxufVxyXG5cclxuZW51bSBTb3J0TW9kZXMge1xyXG4gICAgTm9uZSxcclxuICAgIEFzY2VuZGluZyxcclxuICAgIERlc2NlbmRpbmdcclxufVxyXG5cclxuXHJcblxyXG5pbnRlcmZhY2UgSVBhZ2VyQ29sdW1uPFQ+IHtcclxuICAgIERpc3BsYXlWYWx1ZTogKHY6IFQpID0+IEtub2Nrb3V0Q29tcHV0ZWQ8c3RyaW5nPjtcclxuICAgIElzU29ydGFibGU6ICgpID0+IGJvb2xlYW47XHJcbiAgICBDdXJyZW50U29ydE1vZGU6IEtub2Nrb3V0T2JzZXJ2YWJsZTxTb3J0TW9kZXM+O1xyXG4gICAgU29ydGVyOiAoZTE6IFQsIGUyOiBUKSA9PiBudW1iZXI7XHJcbiAgICBEaXNwbGF5TmFtZTogS25vY2tvdXRDb21wdXRlZDxzdHJpbmc+O1xyXG4gICAgTmFtZTogc3RyaW5nIHwgS25vY2tvdXRPYnNlcnZhYmxlPHN0cmluZz47XHJcbiAgICBWaXNpYmxlOiBLbm9ja291dE9ic2VydmFibGU8Ym9vbGVhbj47XHJcbiAgICBDc3NDbGFzc2VzOiBzdHJpbmc7XHJcbiAgICBTdHlsZXM6IHN0cmluZztcclxufVxyXG5cclxuaW50ZXJmYWNlIElQYWdlckNvbHVtbk9wdGlvbnM8VD4ge1xyXG4gICAgQ3NzQ2xhc3Nlcz86IHN0cmluZyB8IHN0cmluZ1tdO1xyXG4gICAgU3R5bGVzPzogc3RyaW5nIHwgeyBrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9W11cclxuICAgIFdpZHRoPzogbnVtYmVyO1xyXG4gICAgU29ydGVyPzogKGUxOiBULCBlMjogVCkgPT4gbnVtYmVyO1xyXG4gICAgUmVuZGVyZXI/OiAodjogVCkgPT4gc3RyaW5nO1xyXG4gICAgVmlzaWJsZT86IGJvb2xlYW47XHJcbiAgICBTb3J0TW9kZT86IFNvcnRNb2RlcztcclxufVxyXG5cclxuY2xhc3MgUGFnZXJDb2x1bW48VCwgVlQ+IGltcGxlbWVudHMgSVBhZ2VyQ29sdW1uPFQ+IHtcclxuICAgIFJlbmRlcmVyOiAodjogVlQpID0+IHN0cmluZztcclxuICAgIFZhbHVlU29ydGVyOiAoZTE6IFZULCBlMjogVlQpID0+IG51bWJlcjtcclxuICAgIENzc0NsYXNzZXMgPSBcIlwiO1xyXG4gICAgU3R5bGVzID0gXCJcIjtcclxuICAgIFZpc2libGUgPSBrby5vYnNlcnZhYmxlKHRydWUpO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBOYW1lOiBzdHJpbmcgfCBLbm9ja291dE9ic2VydmFibGU8c3RyaW5nPiwgcHVibGljIFZhbHVlOiAodjogVCkgPT4gVlQgfCBLbm9ja291dE9ic2VydmFibGU8VlQ+LCBvcHRpb25zOiBJUGFnZXJDb2x1bW5PcHRpb25zPFZUPiA9IHt9KSB7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuVmlzaWJsZSAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICB0aGlzLlZpc2libGUob3B0aW9ucy5WaXNpYmxlKTtcclxuICAgICAgICB0aGlzLlJlbmRlcmVyID0gb3B0aW9ucy5SZW5kZXJlciB8fCBQYWdlckNvbHVtbi5EZWZhdWx0UmVuZGVyZXIoKTtcclxuICAgICAgICB0aGlzLlZhbHVlU29ydGVyID0gb3B0aW9ucy5Tb3J0ZXI7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuU29ydE1vZGUgIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgdGhpcy5DdXJyZW50U29ydE1vZGUob3B0aW9ucy5Tb3J0TW9kZSlcclxuXHJcbiAgICAgICAgaWYgKG9wdGlvbnMuQ3NzQ2xhc3NlcyAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5Dc3NDbGFzc2VzIGluc3RhbmNlb2YgQXJyYXkgJiYgb3B0aW9ucy5Dc3NDbGFzc2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuQ3NzQ2xhc3NlcyA9IG9wdGlvbnMuQ3NzQ2xhc3Nlc1swXTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgb3B0aW9ucy5Dc3NDbGFzc2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5Dc3NDbGFzc2VzICsgXCIgXCIgKyBvcHRpb25zLkNzc0NsYXNzZXNbaV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMuQ3NzQ2xhc3NlcyA9PT0gXCJzdHJpbmdcIilcclxuICAgICAgICAgICAgICAgIHRoaXMuQ3NzQ2xhc3NlcyA9IDxzdHJpbmc+b3B0aW9ucy5Dc3NDbGFzc2VzO1xyXG4gICAgICAgIGlmIChvcHRpb25zLlN0eWxlcyAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5TdHlsZXMgaW5zdGFuY2VvZiBBcnJheSAmJiBvcHRpb25zLlN0eWxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLlN0eWxlcyA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBzdHlsZSBvZiA8eyBrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9W10+b3B0aW9ucy5TdHlsZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLlN0eWxlcyArPSBzdHlsZS5rZXkgKyBcIjogXCIgKyBzdHlsZS52YWx1ZSArIFwiO1wiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygb3B0aW9ucy5TdHlsZXMgPT09IFwic3RyaW5nXCIpXHJcbiAgICAgICAgICAgICAgICB0aGlzLlN0eWxlcyA9IDxzdHJpbmc+b3B0aW9ucy5TdHlsZXM7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuV2lkdGggIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgdGhpcy5TdHlsZXMgPSBcIndpZHRoOiBcIiArIG9wdGlvbnMuV2lkdGggKyBcInB4O1wiICsgKHRoaXMuU3R5bGVzIHx8IFwiXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIElzU29ydGFibGUgPSAoKSA9PiB0aGlzLlZhbHVlU29ydGVyICE9PSB1bmRlZmluZWQ7XHJcbiAgICBDdXJyZW50U29ydE1vZGUgPSBrby5vYnNlcnZhYmxlKFNvcnRNb2Rlcy5Ob25lKTtcclxuICAgIFNvcnRlciA9IChlMTogVCwgZTI6IFQpID0+IHRoaXMuVmFsdWVTb3J0ZXIoa28udW53cmFwKHRoaXMuVmFsdWUoZTEpKSwga28udW53cmFwKHRoaXMuVmFsdWUoZTIpKSk7XHJcbiAgICBEaXNwbGF5VmFsdWUgPSAodjogVCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBrby5jb21wdXRlZDxzdHJpbmc+KHtcclxuICAgICAgICAgICAgZGVmZXJFdmFsdWF0aW9uOiB0cnVlLFxyXG4gICAgICAgICAgICByZWFkOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGtvLnVud3JhcCh0aGlzLlZhbHVlKHYpKTtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuUmVuZGVyZXIodmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIClcclxuICAgIH07XHJcblxyXG4gICAgRGlzcGxheU5hbWUgPSBrby5jb21wdXRlZDxzdHJpbmc+KHtcclxuICAgICAgICBkZWZlckV2YWx1YXRpb246IHRydWUsXHJcbiAgICAgICAgcmVhZDogKCkgPT4gdGhpcy5DdXJyZW50U29ydE1vZGUoKSA9PT0gU29ydE1vZGVzLk5vbmUgPyBrby51bndyYXAodGhpcy5OYW1lKSA6IGtvLnVud3JhcCh0aGlzLk5hbWUpICtcclxuICAgICAgICAgICAgKHRoaXMuQ3VycmVudFNvcnRNb2RlKCkgPT09IFNvcnRNb2Rlcy5Bc2NlbmRpbmcgPyBcIiAmIzk2NTA7XCIgOiBcIiAmIzk2NjA7XCIpLFxyXG5cclxuICAgIH0pXHJcblxyXG4gICAgc3RhdGljIFN0cmluZ1NvcnRlciA9ICgpID0+IChlMTogc3RyaW5nLCBlMjogc3RyaW5nKSA9PiBlMSA+IGUyID8gMSA6IC0xO1xyXG4gICAgc3RhdGljIE51bWJlclNvcnRlciA9ICgpID0+IChlMTogbnVtYmVyLCBlMjogbnVtYmVyKSA9PiBlMSA+IGUyID8gMSA6IC0xO1xyXG4gICAgc3RhdGljIERhdGVTb3J0ZXIgPSAoKSA9PiAoZTE6IERhdGUgfCBudW1iZXIgfCBzdHJpbmcsIGUyOiBEYXRlIHwgbnVtYmVyIHwgc3RyaW5nKSA9PiBuZXcgRGF0ZShlMSkgLSBuZXcgRGF0ZShlMik7XHJcbiAgICBzdGF0aWMgQXJyYXlTb3J0ZXIgPSAoKSA9PiAoZTE6IGFueVtdLCBlMjogYW55W10pID0+IGUxLmxlbmd0aCAtIGUyLmxlbmd0aDtcclxuXHJcbiAgICBzdGF0aWMgRGVmYXVsdFJlbmRlcmVyID0gKCkgPT4gKHYpID0+IHtcclxuICAgICAgICBpZiAodiA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICBlbHNlIGlmICh2IGluc3RhbmNlb2YgRGF0ZSlcclxuICAgICAgICAgICAgcmV0dXJuIFBhZ2VyQ29sdW1uLkRhdGVSZW5kZXJlcigpKHYpO1xyXG4gICAgICAgIGVsc2UgaWYgKHYgaW5zdGFuY2VvZiBBcnJheSkge1xyXG4gICAgICAgICAgICByZXR1cm4gUGFnZXJDb2x1bW4uQXJyYXlSZW5kZXJlcigpKHYpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdi50b1N0cmluZygpO1xyXG4gICAgfTtcclxuICAgIHN0YXRpYyBEYXRlUmVuZGVyZXIgPSAoKSA9PiAodjogRGF0ZSB8IG51bWJlciB8IHN0cmluZykgPT4gPHN0cmluZz5tb21lbnQodikuZm9ybWF0KFwiTExcIik7XHJcbiAgICBzdGF0aWMgRGF0ZVRpbWVSZW5kZXJlciA9ICgpID0+ICh2OiBEYXRlIHwgbnVtYmVyIHwgc3RyaW5nKSA9PiA8c3RyaW5nPm1vbWVudCh2KS5mb3JtYXQoXCJMTExcIik7XHJcbiAgICBzdGF0aWMgVGltZVJlbmRlcmVyID0gKCkgPT4gKHY6IERhdGUgfCBudW1iZXIgfCBzdHJpbmcpID0+IDxzdHJpbmc+bW9tZW50KHYpLmZvcm1hdChcIkxUXCIpO1xyXG4gICAgc3RhdGljIEFycmF5UmVuZGVyZXI8VFM+KHNlcGVyYXRvciA9IFwiLCBcIiwgZWxlbWVudFJlbmRlcmVyOiAodjogVFMpID0+IHN0cmluZyA9IFBhZ2VyQ29sdW1uLkRlZmF1bHRSZW5kZXJlcigpKSB7XHJcbiAgICAgICAgcmV0dXJuICh2OiBUU1tdKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBvdXQgPSBcIlwiO1xyXG4gICAgICAgICAgICBpZiAodiAhPT0gdW5kZWZpbmVkICYmIHYubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgb3V0ICs9IGVsZW1lbnRSZW5kZXJlcih2WzBdKTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdi5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICBvdXQgKz0gc2VwZXJhdG9yICsgZWxlbWVudFJlbmRlcmVyKHZbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBvdXQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufVxyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
