{"version":3,"sources":["/source/wwwroot/js/ViewModels/Admin/ViewModels/Admin/Persons.ts"],"names":["personDeails","$","Person","ClientModel","deletePerson","adminPersonViewModel","AdminPersonViewModel","Model","_this","this","People","ko","observableArray","CurrentPerson","observable","PersonApi","ServerApi","Persons","NewPerson","computed","undefined","Id","Get","done","data","_i","data_1","length","person","push","LoadFromServerEntity","prototype","SavePerson","SaveToServer","modal","CancelEditPerson","RevertState","DeletePerson","DeleteOnServer","remove","AddPerson","SelectPerson","SaveState","applyBindings"],"mappings":"AACA,GAAIA,cAAeC,EAAE,kBACdC,OAASC,YAAYD,OAGxBE,aAAeH,EAAE,iBACjBI,qBAGGC,sBAAP,SAAOA,GACH,GAAOJ,GAASC,YAAYD,OAE5BK,EAAA,WACI,QAAAA,KADJ,GAAAC,GAAAC,IAWIA,MAAAC,OAASC,GAAGC,kBACZH,KAAAI,cAAgBF,GAAGG,WAAW,GAAIZ,IAClCO,KAAAM,UAAYC,UAAUC,QAVlBR,KAAKS,UAAYP,GAAGQ,SAAkB,WAAM,MAA8BC,UAA9BZ,EAAKK,gBAAgBQ,OACjEZ,KAAKM,UAAUO,MACVC,KAAK,SAAAC,GACF,IAAmB,GAAAC,GAAA,EAAAC,EAAAF,EAAAC,EAAAC,EAAAC,OAAAF,IAAK,CAAnB,GAAIG,GAAMF,EAAAD,EACXjB,GAAKE,OAAOmB,MAAK,GAAI3B,IAAS4B,qBAAqBF,OA6CvE,MArCIrB,GAAAwB,UAAAC,WAAA,WACI3B,qBAAqBQ,gBAAgBoB,eAAeV,KAAK,WACrDvB,aAAakC,MAAM,QACnB7B,qBAAqBK,OAAOmB,KAAKxB,qBAAqBQ,iBACtDR,qBAAqBQ,cAAc,GAAIX,OAK/CK,EAAAwB,UAAAI,iBAAA,WACI9B,qBAAqBQ,gBAAgBuB,aAAY,GACjD/B,qBAAqBQ,cAAc,GAAIX,IACvCF,aAAakC,MAAM,SAGvB3B,EAAAwB,UAAAM,aAAA,WACIhC,qBAAqBQ,gBAChByB,iBACAf,KAAK,WACFlB,qBAAqBK,OAAO6B,OAAOlC,qBAAqBQ,iBACxDT,aAAa8B,MAAM,QACnB7B,qBAAqBQ,cAAcO,WAI/Cb,EAAAwB,UAAAS,UAAA,WACInC,qBAAqBQ,cAAc,GAAIX,IACvCG,qBAAqBK,OAAOmB,KAAKxB,qBAAqBQ,iBACtDR,qBAAqB2B,cAGzBzB,EAAAwB,UAAAU,aAAA,SAAab,GACTvB,qBAAqBQ,cAAce,GACnCA,EAAOc,aAIfnC,IApDaD,GAAAC,MAAKA,GAHfD,uBAAAA,0BA0DPD,qBAAuB,GAAIC,sBAAqBC,MAChDI,GAAGgC,cAActC","file":"wwwroot/js/ViewModels/Admin/Persons.min.js","sourcesContent":["\r\nvar personDeails = $(\"#personDetails\");\r\nimport Person = ClientModel.Person;\r\n\r\n\r\nvar deletePerson = $(\"#deletePerson\");\r\nvar adminPersonViewModel: AdminPersonViewModel.Model;\r\n\r\n\r\nmodule AdminPersonViewModel {\r\n    import Person = ClientModel.Person;\r\n\r\n    export class Model {\r\n        constructor() {\r\n\r\n            this.NewPerson = ko.computed<boolean>(() => this.CurrentPerson().Id() === undefined);\r\n            this.PersonApi.Get()\r\n                .done(data => {\r\n                    for (let person of data) {\r\n                        this.People.push(new Person().LoadFromServerEntity(person));\r\n                    }\r\n                });\r\n        }\r\n        People = ko.observableArray<Person>();\r\n        CurrentPerson = ko.observable(new Person());\r\n        PersonApi = ServerApi.Persons;\r\n\r\n        SavePerson() {\r\n            adminPersonViewModel.CurrentPerson().SaveToServer().done(() => {\r\n                personDeails.modal(\"hide\");\r\n                adminPersonViewModel.People.push(adminPersonViewModel.CurrentPerson());\r\n                adminPersonViewModel.CurrentPerson(new Person());\r\n            });\r\n\r\n        }\r\n\r\n        CancelEditPerson() {\r\n            adminPersonViewModel.CurrentPerson().RevertState(true);\r\n            adminPersonViewModel.CurrentPerson(new Person());\r\n            personDeails.modal(\"hide\");\r\n        }\r\n\r\n        DeletePerson() {\r\n            adminPersonViewModel.CurrentPerson()\r\n                .DeleteOnServer()\r\n                .done(() => {\r\n                    adminPersonViewModel.People.remove(adminPersonViewModel.CurrentPerson());\r\n                    deletePerson.modal(\"hide\");\r\n                    adminPersonViewModel.CurrentPerson(undefined);\r\n                });\r\n        }\r\n\r\n        AddPerson() {\r\n            adminPersonViewModel.CurrentPerson(new Person());\r\n            adminPersonViewModel.People.push(adminPersonViewModel.CurrentPerson());\r\n            adminPersonViewModel.SavePerson();\r\n        }\r\n\r\n        SelectPerson(person: Person) {\r\n            adminPersonViewModel.CurrentPerson(person);\r\n            person.SaveState();\r\n        }\r\n\r\n        NewPerson: KnockoutComputed<boolean>;\r\n    }\r\n}\r\n\r\nadminPersonViewModel = new AdminPersonViewModel.Model();\r\nko.applyBindings(adminPersonViewModel);"],"sourceRoot":"/source/"}