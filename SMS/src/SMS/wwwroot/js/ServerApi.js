var WaypointConnection = ServerModel.WaypointConnection;
var WaypointTack = ServerModel.WaypointTack;
var AlbumImage = ServerModel.AlbumImage;
var HttpMethod;
(function (HttpMethod) {
    HttpMethod[HttpMethod["POST"] = 0] = "POST";
    HttpMethod[HttpMethod["GET"] = 1] = "GET";
    HttpMethod[HttpMethod["PUT"] = 2] = "PUT";
    HttpMethod[HttpMethod["DELETE"] = 3] = "DELETE";
})(HttpMethod || (HttpMethod = {}));
var AlbumImageApi = (function () {
    function AlbumImageApi(baseUrl) {
        this.baseUrl = baseUrl;
    }
    AlbumImageApi.prototype.Get = function () {
        return ServerApi.CreateRequest(ServerApi.BuildRequestBody(this.baseUrl, HttpMethod.GET));
    };
    return AlbumImageApi;
}());
var CrewApi = (function () {
    function CrewApi(baseUrl) {
        this.baseUrl = baseUrl;
    }
    CrewApi.prototype.Get = function () {
        return ServerApi.CreateRequest(ServerApi.BuildRequestBody(this.baseUrl, HttpMethod.GET));
    };
    return CrewApi;
}());
var ConnectionApi = (function () {
    function ConnectionApi(baseUrl) {
        this.baseUrl = baseUrl;
    }
    ConnectionApi.prototype.Get = function () {
        return ServerApi.CreateRequest(ServerApi.BuildRequestBody("", HttpMethod.GET));
    };
    ConnectionApi.prototype.Connect = function (id1, id2) {
        return ServerApi.CreateRequest(ServerApi.BuildRequestBody(id1 + "/" + id2, HttpMethod.POST));
    };
    ConnectionApi.prototype.Disconnect = function (id1, id2) {
        return ServerApi.CreateRequest(ServerApi.BuildRequestBody(id1 + "/" + id2, HttpMethod.DELETE));
    };
    return ConnectionApi;
}());
var WaypointConnectionApi = (function () {
    function WaypointConnectionApi(baseUrl) {
        this.baseUrl = baseUrl;
    }
    WaypointConnectionApi.prototype.Get = function () {
        return ServerApi.CreateRequest(ServerApi.BuildRequestBody(this.baseUrl, HttpMethod.GET));
    };
    WaypointConnectionApi.prototype.Connect = function (id1, id2) {
        return ServerApi.CreateRequest(ServerApi.BuildRequestBody(this.baseUrl + "/" + id1 + "/" + id2, HttpMethod.POST));
    };
    WaypointConnectionApi.prototype.Disconnect = function (id1, id2) {
        if (id2 !== undefined)
            return ServerApi.CreateRequest(ServerApi.BuildRequestBody(this.baseUrl + "/" + id1 + "/" + id2, HttpMethod.DELETE));
        return ServerApi.CreateRequest(ServerApi.BuildRequestBody(this.baseUrl + "/" + id1.toString(), HttpMethod.DELETE));
    };
    return WaypointConnectionApi;
}());
var ServerApi = (function () {
    function ServerApi(baseUrl) {
        this.baseUrl = baseUrl;
    }
    ServerApi.BuildRequestBody = function (url, method, data) {
        return {
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            method: HttpMethod[method],
            url: url,
            data: JSON.stringify(data)
        };
    };
    ServerApi.prototype.Get = function (id) {
        if (id === undefined)
            return ServerApi.CreateRequest((ServerApi.BuildRequestBody(this.baseUrl, HttpMethod.GET)));
        else
            return ServerApi.CreateRequest((ServerApi.BuildRequestBody(this.baseUrl + "/" + id.toString(), HttpMethod.GET)));
    };
    ServerApi.prototype.Delete = function (id) {
        return ServerApi.CreateRequest((ServerApi.BuildRequestBody(this.baseUrl + "/" + id.toString(), HttpMethod.DELETE)));
    };
    ServerApi.prototype.Create = function (entity) {
        return ServerApi.CreateRequest((ServerApi.BuildRequestBody(this.baseUrl, HttpMethod.POST, entity)));
    };
    ServerApi.prototype.Update = function (entity) {
        return ServerApi.CreateRequest(ServerApi.BuildRequestBody(this.baseUrl + "/" + entity.Id.toString(), HttpMethod.PUT, entity));
    };
    ServerApi.CreateRequest = function (body) {
        ServerApi.conntectionCount(ServerApi.conntectionCount() + 1);
        return $.ajax(body).fail(function () {
            //alert(d);
            alert("Es gab ein Fehler beim Verarbeiten der Daten auf dem Server. Bitte überprüfe deine Eingaben und versuche er erneut.");
            console.log(arguments);
        }).always(function () {
            ServerApi.conntectionCount(ServerApi.conntectionCount() - 1);
        });
    };
    ServerApi.GetApi = function (type) {
        if (type instanceof ClientModel.Person)
            return ServerApi.Persons;
        if (type instanceof ClientModel.Job)
            return ServerApi.Jobs;
        if (type instanceof ClientModel.Trip)
            return ServerApi.Trips;
        if (type instanceof ClientModel.Tack)
            return ServerApi.Tacks;
        if (type instanceof ClientModel.Address)
            return ServerApi.Addresses;
        if (type instanceof ClientModel.Image)
            return ServerApi.Images;
        if (type instanceof ClientModel.Location)
            return ServerApi.Locations;
        //if (type instanceof ClientModel.Supermarket)
        //return ServerApi.Supermarkets;
        //if (type instanceof ClientModel.Restaurant)
        //return ServerApi.Restaurants;
        if (type instanceof ClientModel.Harbour)
            return ServerApi.Harbours;
        if (type instanceof ClientModel.Album)
            return ServerApi.Albums;
        if (type instanceof ClientModel.Comment)
            return ServerApi.Comments;
        if (type instanceof ClientModel.Waypoint)
            return ServerApi.Waypoints;
        if (type instanceof ClientModel.LogBookEntry)
            return ServerApi.LogBookEntries;
        if (type instanceof ClientModel.Wifi)
            return ServerApi.Wifis;
        if (type instanceof ClientModel.ContentPage)
            return ServerApi.ContentPages;
        throw ("No suitable Api found");
    };
    ServerApi.conntectionCount = ko.observable(0);
    ServerApi.connectionOpen = ko.computed(function () {
        return ServerApi.conntectionCount() > 0;
    });
    ServerApi.Persons = new ServerApi("/api/People");
    ServerApi.Jobs = new ServerApi("/api/Jobs");
    ServerApi.Trips = new ServerApi("/api/Trips");
    ServerApi.Tacks = new ServerApi("/api/Tacks");
    ServerApi.Addresses = new ServerApi("/api/Addresses");
    ServerApi.Images = new ServerApi("/api/Images");
    ServerApi.Locations = new ServerApi("api/Locations");
    //static Supermarkets = new EntityApi("/api/Supermarkets");
    //static Restaurants = new EntityApi("/api/Restaurants");
    ServerApi.Harbours = new ServerApi("/api/Harbours");
    ServerApi.Albums = new ServerApi("/api/Albums");
    ServerApi.Comments = new ServerApi("/api/Comments");
    ServerApi.Waypoints = new ServerApi("/api/Waypoints");
    ServerApi.Wifis = new ServerApi("/api/Wifis");
    ServerApi.AlbumImages = new AlbumImageApi("/api/AlbumImages");
    ServerApi.Crews = new CrewApi("/api/Crews");
    ServerApi.LogBookEntries = new ServerApi("/api/LogBookEntries");
    ServerApi.ContentPages = new ServerApi("/api/ContentPages");
    ServerApi.WaypointConnections = new WaypointConnectionApi("/api/WaypointConnections");
    return ServerApi;
}());

//# sourceMappingURL=data:application/json;base64,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QUFJLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0lBRTVDLGdCQUFNLEdBQUcsSUFBSSxTQUFTLENBQUMsYUFBYSxDQUFDLENBQUM7SUFFdEMsbUJBQVMsR0FBRyxJQUFJLFNBQVMsQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUVsRCwyREFBMkQ7SUFDM0QseURBQXlEO0lBRWxELGtCQUFRLEdBQUcsSUFBSSxTQUFTLENBQUMsZUFBZSxDQUFDLENBQUM7SUFFMUMsZ0JBQU0sR0FBRyxJQUFJLFNBQVMsQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUV0QyxrQkFBUSxHQUFHLElBQUksU0FBUyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0lBRTFDLG1CQUFTLEdBQUcsSUFBSSxTQUFTLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUU1QyxlQUFLLEdBQUcsSUFBSSxTQUFTLENBQUMsWUFBWSxDQUFDLENBQUM7SUFFcEMscUJBQVcsR0FBRyxJQUFJLGFBQWEsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXBELGVBQUssR0FBRyxJQUFJLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUVsQyx3QkFBYyxHQUFHLElBQUksU0FBUyxDQUFDLHFCQUFxQixDQUFDLENBQUM7SUFDdEQsc0JBQVksR0FBRyxJQUFJLFNBQVMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO0lBRWxELDZCQUFtQixHQUFHLElBQUkscUJBQXFCLENBQUMsMEJBQTBCLENBQUMsQ0FBQztJQXFDdkYsZ0JBQUM7QUFBRCxDQTdIQSxBQTZIQyxJQUFBIiwiZmlsZSI6IlNlcnZlckFwaS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBFbnRpdHkgPSBTZXJ2ZXJNb2RlbC5FbnRpdHk7XHJcbmltcG9ydCBXYXlwb2ludENvbm5lY3Rpb24gPSBTZXJ2ZXJNb2RlbC5XYXlwb2ludENvbm5lY3Rpb247XHJcbmltcG9ydCBXYXlwb2ludFRhY2sgPSBTZXJ2ZXJNb2RlbC5XYXlwb2ludFRhY2s7XHJcbmltcG9ydCBBbGJ1bUltYWdlID0gU2VydmVyTW9kZWwuQWxidW1JbWFnZTtcclxuXHJcbmVudW0gSHR0cE1ldGhvZCB7XHJcbiAgICBQT1NULFxyXG4gICAgR0VULFxyXG4gICAgUFVULFxyXG4gICAgREVMRVRFXHJcbn1cclxuXHJcbmNsYXNzIEFsYnVtSW1hZ2VBcGkge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBiYXNlVXJsOiBzdHJpbmcpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgR2V0KCk6IEpRdWVyeVByb21pc2U8QWxidW1JbWFnZVtdPiB7XHJcbiAgICAgICAgcmV0dXJuIFNlcnZlckFwaS5DcmVhdGVSZXF1ZXN0KFNlcnZlckFwaS5CdWlsZFJlcXVlc3RCb2R5KHRoaXMuYmFzZVVybCwgSHR0cE1ldGhvZC5HRVQpKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmNsYXNzIENyZXdBcGkge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBiYXNlVXJsOiBzdHJpbmcpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgR2V0KCk6IEpRdWVyeVByb21pc2U8U2VydmVyTW9kZWwuQ3Jld1tdPiB7XHJcbiAgICAgICAgcmV0dXJuIFNlcnZlckFwaS5DcmVhdGVSZXF1ZXN0KFNlcnZlckFwaS5CdWlsZFJlcXVlc3RCb2R5KHRoaXMuYmFzZVVybCwgSHR0cE1ldGhvZC5HRVQpKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmFic3RyYWN0IGNsYXNzIENvbm5lY3Rpb25BcGk8VD4ge1xyXG5cclxuICAgIEdldCgpOiBKUXVlcnlQcm9taXNlPFRbXT4ge1xyXG4gICAgICAgIHJldHVybiBTZXJ2ZXJBcGkuQ3JlYXRlUmVxdWVzdDxUW10+KFNlcnZlckFwaS5CdWlsZFJlcXVlc3RCb2R5KFwiXCIsIEh0dHBNZXRob2QuR0VUKSk7XHJcbiAgICB9XHJcblxyXG4gICAgQ29ubmVjdChpZDE6IG51bWJlciwgaWQyOiBudW1iZXIpOiBKUXVlcnlQcm9taXNlPFQ+IHtcclxuICAgICAgICByZXR1cm4gU2VydmVyQXBpLkNyZWF0ZVJlcXVlc3Q8VD4oU2VydmVyQXBpLkJ1aWxkUmVxdWVzdEJvZHkoaWQxICsgXCIvXCIgKyBpZDIsIEh0dHBNZXRob2QuUE9TVCkpO1xyXG4gICAgfVxyXG5cclxuICAgIERpc2Nvbm5lY3QoaWQxOiBudW1iZXIsIGlkMjogbnVtYmVyKTogSlF1ZXJ5UHJvbWlzZTxUPiB7XHJcbiAgICAgICAgcmV0dXJuIFNlcnZlckFwaS5DcmVhdGVSZXF1ZXN0PFQ+KFNlcnZlckFwaS5CdWlsZFJlcXVlc3RCb2R5KGlkMSArIFwiL1wiICsgaWQyLCBIdHRwTWV0aG9kLkRFTEVURSkpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBiYXNlVXJsOiBzdHJpbmcpIHtcclxuXHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5jbGFzcyBXYXlwb2ludENvbm5lY3Rpb25BcGkge1xyXG5cclxuICAgIEdldCgpOiBKUXVlcnlQcm9taXNlPFdheXBvaW50Q29ubmVjdGlvbltdPiB7XHJcbiAgICAgICAgcmV0dXJuIFNlcnZlckFwaS5DcmVhdGVSZXF1ZXN0PFdheXBvaW50Q29ubmVjdGlvbltdPihTZXJ2ZXJBcGkuQnVpbGRSZXF1ZXN0Qm9keSh0aGlzLmJhc2VVcmwsIEh0dHBNZXRob2QuR0VUKSk7XHJcbiAgICB9XHJcblxyXG4gICAgQ29ubmVjdChpZDE6IG51bWJlciwgaWQyOiBudW1iZXIpOiBKUXVlcnlQcm9taXNlPFdheXBvaW50Q29ubmVjdGlvbj4ge1xyXG4gICAgICAgIHJldHVybiBTZXJ2ZXJBcGkuQ3JlYXRlUmVxdWVzdDxXYXlwb2ludENvbm5lY3Rpb24+KFNlcnZlckFwaS5CdWlsZFJlcXVlc3RCb2R5KHRoaXMuYmFzZVVybCArIFwiL1wiICsgaWQxICsgXCIvXCIgKyBpZDIsIEh0dHBNZXRob2QuUE9TVCkpO1xyXG4gICAgfVxyXG4gICAgRGlzY29ubmVjdChpZDogbnVtYmVyKTogSlF1ZXJ5UHJvbWlzZTxXYXlwb2ludENvbm5lY3Rpb24+O1xyXG4gICAgRGlzY29ubmVjdChpZDE6IG51bWJlciwgaWQyOiBudW1iZXIpOiBKUXVlcnlQcm9taXNlPFdheXBvaW50Q29ubmVjdGlvbj47XHJcbiAgICBEaXNjb25uZWN0KGlkMTogbnVtYmVyLCBpZDI/OiBudW1iZXIpOiBKUXVlcnlQcm9taXNlPFdheXBvaW50Q29ubmVjdGlvbj4ge1xyXG4gICAgICAgIGlmIChpZDIgIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgcmV0dXJuIFNlcnZlckFwaS5DcmVhdGVSZXF1ZXN0PFdheXBvaW50Q29ubmVjdGlvbj4oU2VydmVyQXBpLkJ1aWxkUmVxdWVzdEJvZHkodGhpcy5iYXNlVXJsICsgXCIvXCIgKyBpZDEgKyBcIi9cIiArIGlkMiwgSHR0cE1ldGhvZC5ERUxFVEUpKTtcclxuICAgICAgICByZXR1cm4gU2VydmVyQXBpLkNyZWF0ZVJlcXVlc3Q8V2F5cG9pbnRDb25uZWN0aW9uPihTZXJ2ZXJBcGkuQnVpbGRSZXF1ZXN0Qm9keSh0aGlzLmJhc2VVcmwgKyBcIi9cIiArIGlkMS50b1N0cmluZygpLCBIdHRwTWV0aG9kLkRFTEVURSkpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBiYXNlVXJsOiBzdHJpbmcpIHtcclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIFNlcnZlckFwaSB7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBjb25udGVjdGlvbkNvdW50ID0ga28ub2JzZXJ2YWJsZSgwKTtcclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBjb25uZWN0aW9uT3BlbiA9IGtvLmNvbXB1dGVkKCgpID0+IHtcclxuICAgICAgICByZXR1cm4gU2VydmVyQXBpLmNvbm50ZWN0aW9uQ291bnQoKSA+IDA7XHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgYmFzZVVybDogc3RyaW5nKSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBCdWlsZFJlcXVlc3RCb2R5KHVybDogc3RyaW5nLCBtZXRob2Q6IEh0dHBNZXRob2QsIGRhdGE/OiBhbnkpOiBKUXVlcnlBamF4U2V0dGluZ3Mge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLThcIixcclxuICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiLFxyXG4gICAgICAgICAgICBtZXRob2Q6IEh0dHBNZXRob2RbbWV0aG9kXSxcclxuICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGRhdGEpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBHZXQoKTogSlF1ZXJ5UHJvbWlzZTxFbnRpdHlbXT47XHJcbiAgICBHZXQoaWQ6IG51bWJlcik6IEpRdWVyeVByb21pc2U8RW50aXR5PjtcclxuICAgIEdldChpZD86IG51bWJlcik6IGFueSB7XHJcbiAgICAgICAgaWYgKGlkID09PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIHJldHVybiBTZXJ2ZXJBcGkuQ3JlYXRlUmVxdWVzdDxFbnRpdHlbXT4oKFNlcnZlckFwaS5CdWlsZFJlcXVlc3RCb2R5KHRoaXMuYmFzZVVybCwgSHR0cE1ldGhvZC5HRVQpKSk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gU2VydmVyQXBpLkNyZWF0ZVJlcXVlc3Q8RW50aXR5PigoU2VydmVyQXBpLkJ1aWxkUmVxdWVzdEJvZHkodGhpcy5iYXNlVXJsICsgXCIvXCIgKyBpZC50b1N0cmluZygpLCBIdHRwTWV0aG9kLkdFVCkpKTtcclxuICAgIH1cclxuXHJcbiAgICBEZWxldGUoaWQ6IG51bWJlcik6IEpRdWVyeVByb21pc2U8RW50aXR5PiB7XHJcbiAgICAgICAgcmV0dXJuIFNlcnZlckFwaS5DcmVhdGVSZXF1ZXN0PEVudGl0eT4oKFNlcnZlckFwaS5CdWlsZFJlcXVlc3RCb2R5KHRoaXMuYmFzZVVybCArIFwiL1wiICsgaWQudG9TdHJpbmcoKSwgSHR0cE1ldGhvZC5ERUxFVEUpKSk7XHJcbiAgICB9XHJcblxyXG4gICAgQ3JlYXRlKGVudGl0eTogRW50aXR5KTogSlF1ZXJ5UHJvbWlzZTxFbnRpdHk+IHtcclxuICAgICAgICByZXR1cm4gU2VydmVyQXBpLkNyZWF0ZVJlcXVlc3Q8RW50aXR5PigoU2VydmVyQXBpLkJ1aWxkUmVxdWVzdEJvZHkodGhpcy5iYXNlVXJsLCBIdHRwTWV0aG9kLlBPU1QsIGVudGl0eSkpKTtcclxuICAgIH1cclxuXHJcbiAgICBVcGRhdGUoZW50aXR5OiBFbnRpdHkpOiBKUXVlcnlQcm9taXNlPEVudGl0eT4ge1xyXG4gICAgICAgIHJldHVybiBTZXJ2ZXJBcGkuQ3JlYXRlUmVxdWVzdDxFbnRpdHk+KFNlcnZlckFwaS5CdWlsZFJlcXVlc3RCb2R5KHRoaXMuYmFzZVVybCArIFwiL1wiICsgZW50aXR5LklkLnRvU3RyaW5nKCksIEh0dHBNZXRob2QuUFVULCBlbnRpdHkpKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgQ3JlYXRlUmVxdWVzdDxUPihib2R5OiBKUXVlcnlBamF4U2V0dGluZ3MpOiBKUXVlcnlQcm9taXNlPFQ+IHtcclxuICAgICAgICBTZXJ2ZXJBcGkuY29ubnRlY3Rpb25Db3VudChTZXJ2ZXJBcGkuY29ubnRlY3Rpb25Db3VudCgpICsgMSk7XHJcbiAgICAgICAgcmV0dXJuICQuYWpheChib2R5KS5mYWlsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy9hbGVydChkKTtcclxuICAgICAgICAgICAgYWxlcnQoXCJFcyBnYWIgZWluIEZlaGxlciBiZWltIFZlcmFyYmVpdGVuIGRlciBEYXRlbiBhdWYgZGVtIFNlcnZlci4gQml0dGUgw7xiZXJwcsO8ZmUgZGVpbmUgRWluZ2FiZW4gdW5kIHZlcnN1Y2hlIGVyIGVybmV1dC5cIik7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGFyZ3VtZW50cyk7XHJcbiAgICAgICAgfSkuYWx3YXlzKCgpID0+IHtcclxuICAgICAgICAgICAgU2VydmVyQXBpLmNvbm50ZWN0aW9uQ291bnQoU2VydmVyQXBpLmNvbm50ZWN0aW9uQ291bnQoKSAtIDEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBzdGF0aWMgUGVyc29ucyA9IG5ldyBTZXJ2ZXJBcGkoXCIvYXBpL1Blb3BsZVwiKTtcclxuXHJcbiAgICBzdGF0aWMgSm9icyA9IG5ldyBTZXJ2ZXJBcGkoXCIvYXBpL0pvYnNcIik7XHJcblxyXG4gICAgc3RhdGljIFRyaXBzID0gbmV3IFNlcnZlckFwaShcIi9hcGkvVHJpcHNcIik7XHJcblxyXG4gICAgc3RhdGljIFRhY2tzID0gbmV3IFNlcnZlckFwaShcIi9hcGkvVGFja3NcIik7XHJcblxyXG4gICAgc3RhdGljIEFkZHJlc3NlcyA9IG5ldyBTZXJ2ZXJBcGkoXCIvYXBpL0FkZHJlc3Nlc1wiKTtcclxuXHJcbiAgICBzdGF0aWMgSW1hZ2VzID0gbmV3IFNlcnZlckFwaShcIi9hcGkvSW1hZ2VzXCIpO1xyXG5cclxuICAgIHN0YXRpYyBMb2NhdGlvbnMgPSBuZXcgU2VydmVyQXBpKFwiYXBpL0xvY2F0aW9uc1wiKTtcclxuXHJcbiAgICAvL3N0YXRpYyBTdXBlcm1hcmtldHMgPSBuZXcgRW50aXR5QXBpKFwiL2FwaS9TdXBlcm1hcmtldHNcIik7XHJcbiAgICAvL3N0YXRpYyBSZXN0YXVyYW50cyA9IG5ldyBFbnRpdHlBcGkoXCIvYXBpL1Jlc3RhdXJhbnRzXCIpO1xyXG5cclxuICAgIHN0YXRpYyBIYXJib3VycyA9IG5ldyBTZXJ2ZXJBcGkoXCIvYXBpL0hhcmJvdXJzXCIpO1xyXG5cclxuICAgIHN0YXRpYyBBbGJ1bXMgPSBuZXcgU2VydmVyQXBpKFwiL2FwaS9BbGJ1bXNcIik7XHJcblxyXG4gICAgc3RhdGljIENvbW1lbnRzID0gbmV3IFNlcnZlckFwaShcIi9hcGkvQ29tbWVudHNcIik7XHJcblxyXG4gICAgc3RhdGljIFdheXBvaW50cyA9IG5ldyBTZXJ2ZXJBcGkoXCIvYXBpL1dheXBvaW50c1wiKTtcclxuXHJcbiAgICBzdGF0aWMgV2lmaXMgPSBuZXcgU2VydmVyQXBpKFwiL2FwaS9XaWZpc1wiKTtcclxuXHJcbiAgICBzdGF0aWMgQWxidW1JbWFnZXMgPSBuZXcgQWxidW1JbWFnZUFwaShcIi9hcGkvQWxidW1JbWFnZXNcIik7XHJcblxyXG4gICAgc3RhdGljIENyZXdzID0gbmV3IENyZXdBcGkoXCIvYXBpL0NyZXdzXCIpO1xyXG5cclxuICAgIHN0YXRpYyBMb2dCb29rRW50cmllcyA9IG5ldyBTZXJ2ZXJBcGkoXCIvYXBpL0xvZ0Jvb2tFbnRyaWVzXCIpO1xyXG4gICAgc3RhdGljIENvbnRlbnRQYWdlcyA9IG5ldyBTZXJ2ZXJBcGkoXCIvYXBpL0NvbnRlbnRQYWdlc1wiKTtcclxuXHJcbiAgICBzdGF0aWMgV2F5cG9pbnRDb25uZWN0aW9ucyA9IG5ldyBXYXlwb2ludENvbm5lY3Rpb25BcGkoXCIvYXBpL1dheXBvaW50Q29ubmVjdGlvbnNcIik7XHJcblxyXG4gICAgc3RhdGljIEdldEFwaSh0eXBlOiBDbGllbnRNb2RlbC5FbnRpdHkpOiBTZXJ2ZXJBcGkge1xyXG4gICAgICAgIGlmICh0eXBlIGluc3RhbmNlb2YgQ2xpZW50TW9kZWwuUGVyc29uKVxyXG4gICAgICAgICAgICByZXR1cm4gU2VydmVyQXBpLlBlcnNvbnM7XHJcbiAgICAgICAgaWYgKHR5cGUgaW5zdGFuY2VvZiBDbGllbnRNb2RlbC5Kb2IpXHJcbiAgICAgICAgICAgIHJldHVybiBTZXJ2ZXJBcGkuSm9icztcclxuICAgICAgICBpZiAodHlwZSBpbnN0YW5jZW9mIENsaWVudE1vZGVsLlRyaXApXHJcbiAgICAgICAgICAgIHJldHVybiBTZXJ2ZXJBcGkuVHJpcHM7XHJcbiAgICAgICAgaWYgKHR5cGUgaW5zdGFuY2VvZiBDbGllbnRNb2RlbC5UYWNrKVxyXG4gICAgICAgICAgICByZXR1cm4gU2VydmVyQXBpLlRhY2tzO1xyXG4gICAgICAgIGlmICh0eXBlIGluc3RhbmNlb2YgQ2xpZW50TW9kZWwuQWRkcmVzcylcclxuICAgICAgICAgICAgcmV0dXJuIFNlcnZlckFwaS5BZGRyZXNzZXM7XHJcbiAgICAgICAgaWYgKHR5cGUgaW5zdGFuY2VvZiBDbGllbnRNb2RlbC5JbWFnZSlcclxuICAgICAgICAgICAgcmV0dXJuIFNlcnZlckFwaS5JbWFnZXM7XHJcbiAgICAgICAgaWYgKHR5cGUgaW5zdGFuY2VvZiBDbGllbnRNb2RlbC5Mb2NhdGlvbilcclxuICAgICAgICAgICAgcmV0dXJuIFNlcnZlckFwaS5Mb2NhdGlvbnM7XHJcbiAgICAgICAgLy9pZiAodHlwZSBpbnN0YW5jZW9mIENsaWVudE1vZGVsLlN1cGVybWFya2V0KVxyXG4gICAgICAgIC8vcmV0dXJuIFNlcnZlckFwaS5TdXBlcm1hcmtldHM7XHJcbiAgICAgICAgLy9pZiAodHlwZSBpbnN0YW5jZW9mIENsaWVudE1vZGVsLlJlc3RhdXJhbnQpXHJcbiAgICAgICAgLy9yZXR1cm4gU2VydmVyQXBpLlJlc3RhdXJhbnRzO1xyXG4gICAgICAgIGlmICh0eXBlIGluc3RhbmNlb2YgQ2xpZW50TW9kZWwuSGFyYm91cilcclxuICAgICAgICAgICAgcmV0dXJuIFNlcnZlckFwaS5IYXJib3VycztcclxuICAgICAgICBpZiAodHlwZSBpbnN0YW5jZW9mIENsaWVudE1vZGVsLkFsYnVtKVxyXG4gICAgICAgICAgICByZXR1cm4gU2VydmVyQXBpLkFsYnVtcztcclxuICAgICAgICBpZiAodHlwZSBpbnN0YW5jZW9mIENsaWVudE1vZGVsLkNvbW1lbnQpXHJcbiAgICAgICAgICAgIHJldHVybiBTZXJ2ZXJBcGkuQ29tbWVudHM7XHJcbiAgICAgICAgaWYgKHR5cGUgaW5zdGFuY2VvZiBDbGllbnRNb2RlbC5XYXlwb2ludClcclxuICAgICAgICAgICAgcmV0dXJuIFNlcnZlckFwaS5XYXlwb2ludHM7XHJcbiAgICAgICAgaWYgKHR5cGUgaW5zdGFuY2VvZiBDbGllbnRNb2RlbC5Mb2dCb29rRW50cnkpXHJcbiAgICAgICAgICAgIHJldHVybiBTZXJ2ZXJBcGkuTG9nQm9va0VudHJpZXM7XHJcbiAgICAgICAgaWYgKHR5cGUgaW5zdGFuY2VvZiBDbGllbnRNb2RlbC5XaWZpKVxyXG4gICAgICAgICAgICByZXR1cm4gU2VydmVyQXBpLldpZmlzO1xyXG4gICAgICAgIGlmICh0eXBlIGluc3RhbmNlb2YgQ2xpZW50TW9kZWwuQ29udGVudFBhZ2UpXHJcbiAgICAgICAgICAgIHJldHVybiBTZXJ2ZXJBcGkuQ29udGVudFBhZ2VzO1xyXG4gICAgICAgIHRocm93IChcIk5vIHN1aXRhYmxlIEFwaSBmb3VuZFwiKTtcclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
